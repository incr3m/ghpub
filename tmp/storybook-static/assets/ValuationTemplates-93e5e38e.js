import{j as t}from"./TransitionGroupContext-9d36972e.js";import{R as r}from"./index-f1f749bf.js";import{u as v}from"./ProjectLink-987015ba.js";import{P as S,D as V,a as b,b as L}from"./VewJobDetails.story-c6ae2e88.js";import{d as C}from"./pick-dba65392.js";import{d as k,L as w,u as _}from"./updateValuationTemplate-e87484e5.js";import{F}from"./index-ce960f89.js";import{F as A}from"./index-f70ce446.js";import{a as B}from"./index.esm-bf21a293.js";import{b as E}from"./index-bcfaa842.js";import{a2 as M,B as m,T as p,i as x,a8 as R,a9 as q,aa as D}from"./papaparse.min-b66e70e7.js";import{L as I}from"./LoadingButton-f7387eca.js";import{B as P}from"./Button-352c3435.js";import"./assertThisInitialized-ad1db8e7.js";import"./_commonjsHelpers-042e6b4d.js";import"./Play-87fed129.js";import"./react-router-19e5b27c.js";import"./index-4d501b15.js";import"./tiny-invariant-dd7d57d2.js";import"./iframe-ed7f5a3f.js";import"../sb-preview/runtime.js";import"./filter-f99df4e5.js";import"./LocalizationProvider-a287304f.js";import"./_baseForOwn-9b89c4b6.js";import"./react-router-dom-60ea8218.js";import"./index-96c5f47c.js";import"./debounce-213cd46f.js";import"./uniq-0d482d7b.js";import"./_arrayIncludes-2cfb33ae.js";import"./cloneDeep-91467704.js";import"./index-72884e22.js";import"./index-147ad7aa.js";import"./index-356e4a49.js";import"./stories-1f769a10.js";import"./index-63a3e378.js";import"./zod-575fe4a8.js";import"./Add-be7f5660.js";import"./userGroups-edff3f7b.js";import"./SyncEagleDevTool-4c34bdb8.js";import"./searchUsers-04324aeb.js";import"./find-8750f979.js";import"./index-18188c67.js";import"./index-61adb48a.js";import"./useFetchMore-be228481.js";import"./useTagSearch-f4fcfbe9.js";import"./Skeleton-cd6f071e.js";import"./ExpandMore-79a3c159.js";import"./uniqBy-baac1626.js";import"./RemoveCircle-617bdac2.js";import"./index-b769406f.js";import"./DragIndicator-582939ba.js";import"./TableRow-00aadd87.js";import"./TableHead-dd1583ce.js";import"./capitalize-c31f38e2.js";import"./isString-2f2f79c0.js";import"./Save-b67fa0ac.js";import"./Person-5be09a1e.js";import"./times-069ea398.js";import"./_castFunction-353dfc26.js";import"./TaskForm-863cdb73.js";import"./SelectEsModelInput-d580a9f7.js";import"./useIncludeFieldNames-35a180a9.js";import"./RepeatFields-8275ed19.js";import"./useBeforeSave-e049f6dd.js";import"./Alert-fd9a067a.js";import"./TaskAssignees-858ea3c9.js";import"./useTaskAssignees-9f1fd5d3.js";import"./github-91d085b0.js";import"./SortUpIcon-3aecf5f0.js";import"./OpportunityLink-b32d0c35.js";import"./index-9d3afdfc.js";import"./index-79afbab1.js";import"./Check-78df5e8e.js";import"./bundle-053bdffd.js";import"./MilestoneIcon-61fb6e69.js";import"./Trash-822e65ce.js";import"./index-5d349c56.js";import"./EstimateEditorPopover-b8debf9a.js";import"./AssigneeEditorPopover-2b4e6473.js";import"./isNativeReflectConstruct-05c29d01.js";import"./isPlainObject-07477f89.js";import"./ToggleButtonGroup-93d9af56.js";import"./index-71ed01a9.js";import"./index-4d31058a.js";import"./Undo-33c7aa7a.js";import"./camelCase-4e7e8b23.js";import"./AuditLogsNoBreadCrumbs-8da9c0ce.js";import"./ExpenseView-2f5d1473.js";import"./MenuOptions-0bc3bb51.js";import"./MultipleSelectFieldInput-d0cee4a2.js";import"./LocationBeFormBody-c033b2b3.js";import"./reduce-4f6f1985.js";import"./useGetProjectSummaryFields-0ab32aca.js";import"./Link-c687dc07.js";function ko(){const[h,a]=r.useState(!1),[u,n]=r.useState("view"),[e,T]=r.useState(null),{enqueueSnackbar:g}=E(),[j,y]=r.useState(!1);v({paths:[{label:"",link:"/"},{label:"Settings",link:"/settings"},{label:"LAWD"},{label:"Valuation Templates",link:"/settings/lawd/valuation-templates"}]});function s(o){const l={...o};T(()=>l)}const i=B({defaultValues:{}}),{data:c,isFetching:d,isLoading:f}=M({queryKey:["VALUATION_TEMPLATES"],queryFn:()=>L()});return console.log(">>LawdSettings/ValuationTemplates::","templates",c),r.useEffect(()=>{y(f)},[f]),r.useEffect(()=>{i.setValue("valuationTemplate",e)},[e]),t.jsxs(m,{children:[t.jsx(S,{mb:2,children:"Valuation Templates"}),t.jsx(V,{isLoading:j,headers:[{name:"Template Name",colSpan:11},{name:"",colSpan:.5},{name:"",colSpan:.5}],rows:()=>(c||[]).map(o=>({cells:[{colSpan:11,children:t.jsx(p,{sx:{transition:"0.3s all ease",cursor:"pointer","&:hover":{opacity:.8}},onClick:()=>{s(o),n("view"),a(!0)},children:o==null?void 0:o.name})},{colSpan:.5,children:t.jsx(x,{onClick:()=>{s(o),n("view"),a(!0)},children:t.jsx(k,{})})},{colSpan:.5,children:t.jsx(x,{sx:{marginRight:3},onClick:()=>{s(o),n("edit"),a(!0)},children:t.jsx(C,{})})}]}))}),t.jsx(R,{open:h,onClose:()=>a(!1),maxWidth:"lg",fullWidth:!0,children:t.jsx(q,{children:t.jsxs(m,{children:[t.jsxs(m,{children:[u==="edit"?t.jsxs(m,{display:"flex",columnGap:1,children:[t.jsx(F,{control:i.control,name:"valuationTemplate.name",label:"Name",defaultValue:e==null?void 0:e.name,sx:{flex:1},fullWidth:!0}),t.jsx(A,{control:i.control,name:"valuationTemplate.valuationType",options:Object.entries(b).map(o=>{const[l]=o;return{label:l,value:l}}),sx:{width:"300px"},textFieldProps:{label:"Component Type",fullWidth:!0}})]}):t.jsx(p,{children:e==null?void 0:e.name}),t.jsx(m,{marginTop:5,children:t.jsx(w,{data:e==null?void 0:e.items})}),t.jsx(p,{variant:"subtitle2",mt:2})]}),u==="edit"?t.jsx(t.Fragment,{children:t.jsxs(m,{display:"flex",justifyContent:"flex-end",children:[t.jsx(I,{sx:{marginRight:1,width:"80px"},loading:d,disabled:d,variant:"contained",onClick:async()=>{const o=await _({id:i.control._formValues.valuationTemplate.id,name:i.control._formValues.valuationTemplate.name,type:i.control._formValues.valuationTemplate.type,code:i.control._formValues.valuationTemplate.code,valuationType:i.control._formValues.valuationTemplate.valuationType,__typename:"Resource"});await D.refetchQueries({queryKey:["VALUATION_TEMPLATES"]}),g("Template name updated successfully!",{variant:"success"}),a(!1),console.log("Updating Valuation Template",o)},children:"Save"}),t.jsx(P,{sx:{width:"80px"},variant:"outlined",onClick:()=>a(!1),children:"Close"})]})}):null]})})})]})}export{ko as default};
