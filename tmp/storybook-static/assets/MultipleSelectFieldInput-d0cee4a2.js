import{j as l}from"./TransitionGroupContext-9d36972e.js";import{R as m}from"./index-f1f749bf.js";import{m as R,d as v,p as T,h as N,J as F,C as M,a1 as $,A as z,az as _,V as L,T as P}from"./papaparse.min-b66e70e7.js";import{B as w}from"./Button-352c3435.js";import{g as A}from"./_baseForOwn-9b89c4b6.js";const S=R(n=>({root:{"& .MuiInput-underline:before":{display:"none",borderBottom:"none !important"},"& .MuiInputBase-root":{},"& .fi-btn":{whiteSpace:"nowrap",height:20}},readOnly:{color:n.palette.text.primary},customInput:{display:"none"}}));function W({label:n="Choose File",btnProps:t={},...i}){const x=m.useRef();let u=S().customInput;i.className&&(u+=` ${i.className}`);const d=m.useCallback(()=>{x.current.click()},[]);return l.jsxs(l.Fragment,{children:[l.jsx(w,{className:"fi-btn",disabled:i.disabled,size:"small",variant:"contained",...t,sx:{background:p=>p.palette.text.secondary},onClick:d,children:i!=null&&i.loading?l.jsx(M,{size:20}):n}),l.jsx("input",{...$(i,"inputRef"),ref:x,className:u})]})}function K({onChange:n,name:t,label:i,InputProps:x,className:b,InputLabelProps:u,asBlob:d=!1,single:p=!1,...I}){const j=S(),{namesRef:k}=m.useContext(v);k.current.names[t]="file";const{errors:c,values:a,setFieldValue:C}=T(),O=m.useCallback(r=>{let s;if(d){s=[];for(const f of r.target.files)s.push(f)}else{const f=r.target.files,g=f.length;let e="";if(g>1){e+=f[0].name;const o=g-1;e+=` and ${o} other${o>1?"s":""}.`}s=e}C(t,p?s[0]:s),n&&n(r)},[n,C,t,d,p]);let h=j.root;return b&&(h+=` ${b}`),l.jsx(N,{sx:{pt:"16px"},type:"file",disabled:a==null?void 0:a.readOnly,inputProps:{accept:".png,.jpg,.jpeg"},InputProps:{classes:a!=null&&a.readOnly?{disabled:j.readOnly}:{},inputComponent:W,...x},InputLabelProps:{shrink:!0,...u},name:t,error:!!(c!=null&&c[t]),helperText:c==null?void 0:c[t],label:i||F(t),onChange:O,...I,className:h})}const E=R(n=>({root:t=>({...!t.fullWidth&&{width:500},"& > * + *":{marginTop:n.spacing(3)}})}));function Q({options:n,name:t,fullWidth:i,label:x,chipifyReadOnly:b=!1,parseValue:u,readOnlyDisplay:d,formatValue:p,placeholder:I,loading:j}){const k=E({fullWidth:i}),{namesRef:c}=m.useContext(v);c.current.names[t]=void 0;const{values:{[t]:a,readOnly:C}={},setFieldValue:O}=T(),h=m.useMemo(()=>{let e=n||[];return A(e,"0.value")||(e=e.map(o=>({value:o}))),e},[n]);let r,s;if(u)r=u(a);else{s=a==null?void 0:a.split(",");const e=s==null?void 0:s.map(o=>h.findIndex(y=>y.value===o));r=e==null?void 0:e.map(o=>h[o])}const f=r&&r[0]?r:[];let g=x||F(t);return j&&(g="Loading..."),l.jsx(m.Fragment,{children:C?d?d(f):l.jsx(_,{label:g,value:b&&a?s.map(e=>l.jsx(L,{label:F(e),size:"small"},e)):l.jsx(P,{children:s?s.join(", "):""})}):l.jsx("div",{className:k.root,children:l.jsx(z,{multiple:!0,value:f,onChange:(e,o)=>{let y;p?y=p(o):y=o.map(B=>B.value).toString(),O(t,y)},disabled:C||j,name:t,id:"tags-standard",options:h,getOptionLabel:e=>F(e.text||e.value),filterSelectedOptions:!0,renderInput:e=>l.jsx(N,{...e,fullWidth:!0,variant:"outlined",label:g,placeholder:I})})})})}export{W as C,K as F,Q as M};
