import{j as t}from"./TransitionGroupContext-9d36972e.js";import{R as l,r as L}from"./index-f1f749bf.js";import{u as T}from"./ProjectLink-987015ba.js";import{p as y,j as g,l as I,P as R,D as B,k as E}from"./VewJobDetails.story-c6ae2e88.js";import{b as k}from"./index-bcfaa842.js";import{a as _}from"./index.esm-bf21a293.js";import{aC as P,T as j,B as m,b6 as q,a8 as F,ac as z}from"./papaparse.min-b66e70e7.js";import"./_baseForOwn-9b89c4b6.js";import{F as A}from"./index-ce960f89.js";import{F as N}from"./index-f70ce446.js";import{B as h}from"./Button-352c3435.js";import{d as W}from"./pick-dba65392.js";import"./assertThisInitialized-ad1db8e7.js";import"./_commonjsHelpers-042e6b4d.js";import"./Play-87fed129.js";import"./react-router-19e5b27c.js";import"./index-4d501b15.js";import"./tiny-invariant-dd7d57d2.js";import"./iframe-ed7f5a3f.js";import"../sb-preview/runtime.js";import"./filter-f99df4e5.js";import"./LocalizationProvider-a287304f.js";import"./react-router-dom-60ea8218.js";import"./index-96c5f47c.js";import"./debounce-213cd46f.js";import"./uniq-0d482d7b.js";import"./_arrayIncludes-2cfb33ae.js";import"./cloneDeep-91467704.js";import"./index-72884e22.js";import"./index-147ad7aa.js";import"./index-356e4a49.js";import"./stories-1f769a10.js";import"./index-63a3e378.js";import"./zod-575fe4a8.js";import"./Add-be7f5660.js";import"./userGroups-edff3f7b.js";import"./SyncEagleDevTool-4c34bdb8.js";import"./searchUsers-04324aeb.js";import"./find-8750f979.js";import"./index-18188c67.js";import"./index-61adb48a.js";import"./useFetchMore-be228481.js";import"./useTagSearch-f4fcfbe9.js";import"./Skeleton-cd6f071e.js";import"./ExpandMore-79a3c159.js";import"./uniqBy-baac1626.js";import"./RemoveCircle-617bdac2.js";import"./index-b769406f.js";import"./DragIndicator-582939ba.js";import"./TableRow-00aadd87.js";import"./TableHead-dd1583ce.js";import"./capitalize-c31f38e2.js";import"./isString-2f2f79c0.js";import"./Save-b67fa0ac.js";import"./Person-5be09a1e.js";import"./times-069ea398.js";import"./_castFunction-353dfc26.js";import"./TaskForm-863cdb73.js";import"./SelectEsModelInput-d580a9f7.js";import"./useIncludeFieldNames-35a180a9.js";import"./RepeatFields-8275ed19.js";import"./useBeforeSave-e049f6dd.js";import"./Alert-fd9a067a.js";import"./TaskAssignees-858ea3c9.js";import"./useTaskAssignees-9f1fd5d3.js";import"./github-91d085b0.js";import"./SortUpIcon-3aecf5f0.js";import"./OpportunityLink-b32d0c35.js";import"./index-9d3afdfc.js";import"./index-79afbab1.js";import"./Check-78df5e8e.js";import"./bundle-053bdffd.js";import"./MilestoneIcon-61fb6e69.js";import"./Trash-822e65ce.js";import"./index-5d349c56.js";import"./EstimateEditorPopover-b8debf9a.js";import"./AssigneeEditorPopover-2b4e6473.js";import"./isNativeReflectConstruct-05c29d01.js";import"./isPlainObject-07477f89.js";import"./ToggleButtonGroup-93d9af56.js";import"./index-71ed01a9.js";import"./index-4d31058a.js";import"./Undo-33c7aa7a.js";import"./camelCase-4e7e8b23.js";import"./AuditLogsNoBreadCrumbs-8da9c0ce.js";import"./useGetProjectSummaryFields-0ab32aca.js";import"./Link-c687dc07.js";import"./ExpenseView-2f5d1473.js";import"./MenuOptions-0bc3bb51.js";import"./MultipleSelectFieldInput-d0cee4a2.js";import"./LocationBeFormBody-c033b2b3.js";import"./reduce-4f6f1985.js";function M(u){const{setShowCriticalForm:r,selectedCritical:i,setSelectedCritical:n}=u,[s,p]=l.useState(!1),{enqueueSnackbar:c}=k(),d=_({defaultValues:{name:i?i.name:"",description:i?i.description:"",types:i?i.types:[]}});return t.jsx("form",{children:t.jsxs(P,{sx:{padding:2,width:"100%"},children:[t.jsxs(j,{variant:"h6",sx:{marginBottom:2},children:[i!==null?"Edit":"Add"," Critical Assumption"]}),t.jsxs(m,{display:"grid",gridTemplateColumns:"repeat(1, 1fr)",gap:2,mt:"14px",children:[t.jsx(m,{gridColumn:"span 1",children:t.jsx(A,{name:"name",control:d.control,label:"Name"})}),t.jsx(m,{gridColumn:"span 1",children:t.jsx(A,{name:"description",control:d.control,multiline:!0,rows:6,label:"Description"})})]}),t.jsx(m,{gridColumn:"span 1",mt:"14px",children:t.jsx(N,{name:"types",multiple:!0,control:d.control,options:[{label:"Full Report",value:"Full Report"},{label:"Compensation",value:"Compensation"},{label:"Desktop",value:"Desktop"}],textFieldProps:{label:"Types",placeholder:""}})}),t.jsxs(m,{sx:{marginTop:2,display:"flex",justifyContent:"flex-end"},children:[t.jsx(h,{sx:{height:"40px",width:"100px",marginRight:1},variant:"outlined",onClick:()=>{r(!1),n(null)},children:"Cancel"}),t.jsx(h,{sx:{height:"40px",width:"100px"},variant:"contained",onClick:d.handleSubmit(async(a,C)=>{var f,o;try{await c("Creating Critical Assumption...",{variant:"info"}),i!==null?await y({item:{name:(f=a==null?void 0:a.name)==null?void 0:f.replace(/[^a-z0-9]/gi,""),...a},id:i==null?void 0:i.id}):await y({item:{name:(o=a==null?void 0:a.name)==null?void 0:o.replace(/[^a-z0-9]/gi,""),...a}}),await n(null),await p(!1),await r(!1),await c("Successfully Created Critical Assumptions",{variant:"success"})}catch{console.log({event:C})}}),disabled:s===!0,children:"Save"})]})]})})}async function V(u){var n,s;const r=await g({id:"lawdCriticalAssumptions"});if(!r)return;const i=(n=r.attributes)==null?void 0:n.list.findIndex(p=>p.id===u.id);return(s=r==null?void 0:r.attributes)!=null&&s.list[i]?(r.attributes.list.splice(i,1),await q([{__op:"update",...I(r)}]),g({id:"lawdCriticalAssumptions"})):r}function ki(){T({paths:[{label:"",link:"/"},{label:"Settings",link:"/settings"},{label:"LAWD"},{label:"Critical Assumptions",link:"/settings/lawd/critical-assumptions"}]});const{enqueueSnackbar:u}=k(),[r,i]=l.useState([]),[n,s]=l.useState(!1),[p,c]=l.useState(!1),[d,a]=l.useState(null),[C,f]=l.useState(null),[o,S]=l.useState(null),[w,b]=l.useState(!1);return L.useMemo(()=>{b(!0),g({id:"lawdCriticalAssumptions"}).then(e=>{var x;i((x=e==null?void 0:e.attributes)==null?void 0:x.list),b(!1)})},[n,C]),t.jsxs(m,{children:[t.jsx(R,{mb:2,children:"Critical Assumptions"}),t.jsx(F,{fullWidth:!0,open:n,children:t.jsx(M,{setShowCriticalForm:s,selectedCritical:d,setSelectedCritical:a})}),p&&t.jsx(t.Fragment,{children:t.jsxs(F,{open:p,children:[t.jsxs(j,{sx:{p:"24px"},children:["Are you sure you want to delete ",o==null?void 0:o.name," ?"," "]}),t.jsxs(m,{sx:{display:"flex",justifyContent:"flex-end",p:"8px"},children:[t.jsx(h,{onClick:()=>{c(!1)},children:"Cancel"}),t.jsx(h,{onClick:async()=>{await V({id:o==null?void 0:o.id}),await u("Successfully Deleted",{variant:"success"}),await f(o==null?void 0:o.id),c(!1)},children:"Confirm"})]})]})}),t.jsx(h,{sx:{float:"right"},variant:"contained",onClick:()=>{s(!0)},children:t.jsx(j,{children:"Add Assumption"})}),(!z(r)||w)&&t.jsx(B,{isLoading:w,headers:[{name:"Edit",colSpan:1},{name:"Delete",colSpan:1},{name:"Name",colSpan:2},{name:"Type",colSpan:2},{name:"Description",colSpan:4}],rows:()=>r&&r.map(e=>{var x;return{cells:[{colSpan:1,children:t.jsx(t.Fragment,{children:t.jsx(W,{sx:{cursor:"pointer"},onClick:()=>{a(e),s(!0)}})})},{colSpan:1,children:t.jsx(t.Fragment,{children:t.jsx(E,{sx:{cursor:"pointer"},onClick:()=>{S(e),c(!0)}})})},{colSpan:2,children:t.jsx(t.Fragment,{children:e==null?void 0:e.name})},{colSpan:2,children:t.jsx(t.Fragment,{children:(x=e==null?void 0:e.types)==null?void 0:x.map(D=>t.jsxs(t.Fragment,{children:[D,", "]}))})},{colSpan:4,children:t.jsx(t.Fragment,{children:e==null?void 0:e.description})}]}},[])})]})}export{ki as default};
