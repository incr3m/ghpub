import{j as e}from"./TransitionGroupContext-9d36972e.js";import{R as l,r as Q}from"./index-f1f749bf.js";import{av as _t,aw as qt,H as Ut,u as Gt,h as ht,P as xt,A as te,v as se,o as Qt,T as Yt,g as ae,V as Jt,ax as Xt,ay as $t,az as es,D as Ue,a7 as ts,O as ft,r as Ee,Y as ss,p as ns,a1 as Ge,a2 as be,a0 as Qe,an as as,y as rs,ap as is,Z as os,_ as ls,aA as cs,a3 as $,a4 as ee,a5 as gt,K as ds,i as us,N as ps,d as ms,B as Ct,z as hs,aa as xs,ab as fs,L as jt,C as Ye,ar as gs,aB as Cs,aC as re,au as js,af as Je,R as ys}from"./Play-87fed129.js";import{h as oe,F as ue,at as Y,au as je,av as ye,m as z,u as X,l as ge,X as w,b_ as P,B as u,i as R,T as I,y as Ce,ax as yt,d0 as kt,d1 as U,b$ as B,bZ as pe,bb as Re,C as ce,dH as Oe,a8 as Ne,dI as ks,f as bt,g as me,K as vt,as as De,ck as bs,a3 as J,bx as vs,dJ as Ss,A as Is,dK as xe,dL as fe,dM as Xe,bJ as St,ad as It,dN as Tt,j as Ts,U as As,b6 as ws,a as Ms,dO as Ls,ae as At,bo as Es,dp as Os,b as ie,o as Ds,ch as Ie,P as Te,V as Bs,aW as $e,aN as Rs,v as Ns,w as Vs,di as Ps,bN as zs,H as Fs,ah as wt,ba as Mt,c7 as et,ai as Lt,aj as Et,c_ as Hs,r as Zs,L as Ks,J as Ws,an as _s,af as qs,b1 as Us,a2 as Gs,cI as Qs,z as Ys,D as Js,dP as Xs,dQ as $s,a4 as en,dR as tt,dS as tn}from"./papaparse.min-b66e70e7.js";import{a as st,h as Be}from"./hotkeys-a6c2398e.js";import{S as F,b as Ve,K as sn,Y as nn,f as Pe,s as Ot,u as G,E as Ae,q as ze}from"./index-bcfaa842.js";import{R as H,i as an,e as rn,U as on}from"./filter-f99df4e5.js";import{S as ln,c as cn,g as dn,d as un,b as pn}from"./Stop-d43309a7.js";import{L as le}from"./react-router-dom-60ea8218.js";import{d as mn}from"./Error-a5d563f0.js";import{B as N}from"./Button-352c3435.js";import{U as Dt,d as hn,P as nt}from"./ProjectSelect-6c06b3ef.js";import{g as W}from"./_baseForOwn-9b89c4b6.js";import{_ as ke}from"./iframe-ed7f5a3f.js";import{S as xn}from"./Save-1bca3c1a.js";import{g as Fe,d as fn}from"./LocalizationProvider-a287304f.js";import{p as gn}from"./_arrayIncludes-2cfb33ae.js";import"./index-96c5f47c.js";import{R as Cn}from"./index-5757e0d6.js";import{T as jn}from"./TaskStatusPrompt-5fa87980.js";import{d as Bt}from"./debounce-213cd46f.js";import{h as we}from"./react-router-19e5b27c.js";import{S as yn}from"./SearchIcon-482ff285.js";import{C as kn}from"./Cup-50456763.js";import{a as Rt}from"./auth-5b6b0f80.js";const at=({value:t,onChange:s,label:n,error:a,messages:r,isDirty:i})=>e.jsx(_t,{messages:i?r:[],children:e.jsx(qt,{label:n,value:t,inputFormat:"dd/MM/yyyy hh:mm a",onChange:o=>{s&&s(o,{data:{type:"date-picker"}})},renderInput:o=>e.jsx(oe,{sx:{"> .MuiInputLabel-root:not(.MuiInputLabel-shrink)":{top:"-4px"},".Mui-error .MuiOutlinedInput-notchedOutline":{border:"1px solid red!important"}},...o,error:a&&i})})});function bn(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsxs("g",{fill:s?"url(#linear)":"inherit",children:[e.jsx("path",{d:"M16.2587 8.95154C13.8488 8.95154 11.734 10.3825 10.5425 12.5335C9.4601 11.6959 8.15136 11.2063 6.74132 11.2063C3.01829 11.2063 0 14.6201 0 18.8312C0 21.3036 3.01829 22.3109 6.74132 22.3109C9.96993 22.3109 12.6678 21.7185 13.3279 19.805C14.2144 19.9759 15.2082 20.0561 16.2587 20.0561C19.9817 20.0561 23 19.2686 23 16.5764C23 12.3653 19.9817 8.95154 16.2587 8.95154ZM11.1972 15.9467C11.4202 16.4198 11.5903 16.9314 11.6977 17.4716C11.7632 17.8008 11.805 18.1399 11.8221 18.4872C11.8276 18.6009 11.8309 18.7158 11.8309 18.8312C11.8309 19.067 11.788 19.2307 11.7351 19.3483C11.7021 19.4209 11.6657 19.4764 11.6332 19.5192C11.4791 19.7242 11.2137 19.9094 10.8454 20.0704C9.94736 20.4633 8.5665 20.6623 6.74132 20.6623C5.04113 20.6623 3.59365 20.4271 2.66592 20.0006C2.28767 19.827 2.00192 19.6231 1.83894 19.4121C1.71011 19.2445 1.6523 19.0653 1.6523 18.8312C1.6523 15.5361 3.93556 12.8549 6.74187 12.8549C7.92232 12.8549 9.00972 13.3292 9.87413 14.1238C10.1131 14.3436 10.3344 14.5876 10.5365 14.8531C10.7903 15.1861 11.0116 15.5526 11.1972 15.9467ZM21.15 17.2645C20.9959 17.4694 20.7305 17.6546 20.3622 17.8156C19.4642 18.2086 18.0833 18.4075 16.2581 18.4075C15.2054 18.4075 14.2502 18.3174 13.4546 18.1476C13.3224 16.4682 12.7096 14.9454 11.7714 13.7567C12.6303 11.8795 14.319 10.6002 16.2576 10.6002C19.0639 10.6002 21.3472 13.2808 21.3472 16.5764C21.3472 16.9584 21.2348 17.1518 21.15 17.2645Z"}),e.jsx("path",{d:"M16.2587 0C14.0107 0 12.1882 1.81898 12.1882 4.06276C12.1882 6.30654 14.0107 8.12552 16.2587 8.12552C18.5067 8.12552 20.3291 6.30654 20.3291 4.06276C20.3291 1.81898 18.5067 0 16.2587 0ZM16.2587 6.4769C14.9252 6.4769 13.84 5.39375 13.84 4.06276C13.84 2.73177 14.9252 1.64863 16.2587 1.64863C17.5922 1.64863 18.6774 2.73177 18.6774 4.06276C18.6774 5.39375 17.5922 6.4769 16.2587 6.4769V6.4769Z"}),e.jsx("path",{d:"M6.74135 2.23328C4.49332 2.23328 2.6709 4.05226 2.6709 6.29604C2.6709 8.53982 4.49332 10.3588 6.74135 10.3588C8.98938 10.3588 10.8118 8.53982 10.8118 6.29604C10.8118 4.05226 8.98938 2.23328 6.74135 2.23328V2.23328ZM6.74135 8.71018C5.40784 8.71018 4.32264 7.62703 4.32264 6.29604C4.32264 4.96505 5.40784 3.8819 6.74135 3.8819C8.07486 3.8819 9.16005 4.96505 9.16005 6.29604C9.16005 7.62703 8.07486 8.71018 6.74135 8.71018Z"})]}),t.gradient&&H(t.gradient)]})}function vn(){return e.jsxs("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[e.jsx("path",{d:"M0 20.4H20V0.4H0V20.4Z",fill:"url(#pattern0)"}),e.jsxs("defs",{children:[e.jsx("pattern",{id:"pattern0",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:e.jsx("use",{xlinkHref:"#image0",transform:"scale(0.015625)"})}),e.jsx("image",{id:"image0",width:"64",height:"64",xlinkHref:"data:image/png;base64,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"})]})]})}function Sn(t){return e.jsx(ue,{...t,width:"24px",height:"24px",viewBox:"0 0 24 24",paths:["M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z"]})}function In(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M8 9C8 5.13401 11.134 2 15 2C18.866 2 22 5.13401 22 9C22 12.866 18.866 16 15 16H13V18H11V20H9V22H2V16.5858L8.14801 10.4378C8.04995 9.96847 8 9.48731 8 9ZM11 14H15C17.7614 14 20 11.7614 20 9C20 6.23858 17.7614 4 15 4C12.2386 4 10 6.23858 10 9C10 9.49863 10.0727 9.98638 10.2141 10.4529L10.3879 11.0263L4 17.4142V20H7V18H9V16H11V14ZM15 11C13.8954 11 13 10.1046 13 9C13 7.89543 13.8954 7 15 7C16.1046 7 17 7.89543 17 9C17 10.1046 16.1046 11 15 11Z"})}),t.gradient&&H(t.gradient)]})}function Tn(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,viewBox:"-3 0 24 17",children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M11.0001 18H2.00009C0.895523 18 9.34601e-05 17.1046 9.34601e-05 16V2C9.34601e-05 0.89543 0.895523 0 2.00009 0L11.0001 0V2L2.00009 2V16H11.0001V18ZM16.5859 10H6.00009V8H16.5859L13.293 4.70711L14.7072 3.29289L20.4143 9L14.7072 14.7071L13.293 13.2929L16.5859 10Z"})}),t.gradient&&H(t.gradient)]})}function Se({trigger:t,callback:s}){const{globalState:{authUser:n}}=Y(),a=l.useMemo(()=>{var i,o;return t in st?(((o=(i=n.hotkeys)==null?void 0:i.items)==null?void 0:o.find(p=>p.trigger===t))||st[t]).binding:(console.error(`useHotkey: ${t} is not defined in hotkeys, make sure you define the trigger on the hotkeys.js`),null)},[n.hotkeys,t]),r=l.useCallback(i=>{if(console.log("click"),!(i.target.tagName==="INPUT"||i.target.tagName==="SELECT"||i.target.tagName==="TEXTAREA"))return i.preventDefault(),s(i),!1},[s]);l.useEffect(()=>{if(a)return Be(a,"embrace",r),()=>{Be.unbind(a,"embrace",r)}},[t,r,a])}var He={},An=ye;Object.defineProperty(He,"__esModule",{value:!0});var Nt=He.default=void 0,wn=An(je()),Mn=e;Nt=He.default=(0,wn.default)((0,Mn.jsx)("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune");function Ln(t){return t%60}function En(t){return t/60%60}function On(t){return t/3600}function Le(t){return Math.floor(t).toString().padStart(2,"0")}function Dn({start:t,end:s}){const n=Math.abs(s.getTime()-t.getTime())/1e3;return`${Le(On(n))}:${Le(En(n))}:${Le(Ln(n))}`}function Bn({startedAt:t,stoppedAt:s}){const[n,a]=l.useState(null);return l.useEffect(()=>{function r(){a(Dn({start:new Date(t),end:s?new Date(s):new Date}))}if(r(),!s){const i=setInterval(r,1e3);return()=>{clearInterval(i)}}},[t,s]),n}function Rn(t){return e.jsx(ue,{...t,width:"10px",height:"10px",viewBox:"0 0 10 10",paths:["M4.65754 8.65375C4.73504 8.76625 4.86338 8.83334 5.00004 8.83334C5.13671 8.83334 5.26504 8.76625 5.34254 8.65375L9.09254 3.23709C9.18088 3.10959 9.19088 2.94375 9.11879 2.80667C9.04713 2.66959 8.90504 2.58334 8.75004 2.58334H1.25004C1.09504 2.58334 0.952961 2.66959 0.880878 2.80667C0.808794 2.94375 0.819211 3.10959 0.907544 3.23709L4.65754 8.65375Z"]})}const Nn=z(t=>({root:{display:"inline-flex",verticalAlign:"middle",marginRight:5,color:t.palette.warning.main,"& > svg":{height:18}},tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:t.typography.pxToRem(12),border:"1px solid #dadde9"}}));function rt({id:t}){const[s,n]=l.useState([]),a=Nn(),r=X(ge`
      query TASK_ERRS($id: ID!) {
        getTask(id: $id) {
          id
          title
          code
          status
          due
          estimatedEffort
        }
      }
    `,{skip:!t,variables:{id:t}});return l.useEffect(()=>{var p;const i=[],o=(p=r.data)==null?void 0:p.getTask;o&&[void 0,null].includes(o.estimatedEffort)&&i.push("No Estimate"),n(i)},[r]),s.length<1?null:e.jsx("span",{className:a.root,children:e.jsx(w,{title:e.jsx(l.Fragment,{children:s.map((i,o)=>e.jsxs("div",{children:[" • ",i]},o))}),classes:{tooltip:a.tooltip},children:e.jsx(mn,{})})})}const Vn=z({flexVCenter:{display:"flex",alignItems:"center"},taskCode:{padding:"0px 5px",fontSize:"11px"},taskTitle:{opacity:.5,width:"225px",overflow:"hidden",textOverflow:"ellipsis",textDecoration:"none",whiteSpace:"nowrap",color:"inherit","&:hover":{textDecoration:"underline"}},flat:{padding:0},smallBtn:{width:"25px",height:"25px"},caret:{width:"10px",height:"10px",zIndex:10},commentIcon:{width:"18px",height:"18px"},timer:{lineHeight:"150%",fontWeight:"bolder",fontSize:14,fontStyle:"normal",fontFamily:"Poppins",letterSpacing:"0.75px"},timerRunning:{color:"#1AE970"},timerStopped:{opacity:.5}});function Pn({interval:t,restartCurrentInterval:s,stopCurrentInterval:n,toggleSearchTasks:a,toggleIntervalComment:r}){var C,k,L,M,v,O,V,S;const{globalState:{isMobile:i}}=Y(),o=Vn();let p=null,c,x=null,f,m,d;t&&(t.targetType==="opportunity"?(p=(C=t.project)==null?void 0:C.code,c=(k=t.project)==null?void 0:k.name,x=(L=t.project)==null?void 0:L.color,f="Project",m=t.project):t.targetType===P.Opportunity.resultType?(c=(M=t.opportunity)==null?void 0:M.name,f="Project",m=t.opportunity):t.targetType===P.Task.resultType?(p=(v=t.task)==null?void 0:v.code,c=(O=t.task)==null?void 0:O.title,x=(S=(V=t.task)==null?void 0:V.project)==null?void 0:S.color,f="Task",m=t.task):(d=!0,f=t.targetType));const{record:j}=Ut({model:f,id:t==null?void 0:t.targetId,skip:!d}),g=Gt({model:f,data:j||m});let h;if(t){let y;t.targetType===P.Task.resultType?y=e.jsxs(u,{sx:{marginLeft:"5px",display:"flex",alignItems:"center",width:"100%","& .link-spn":{width:"100%"},"& .link-txt":{opacity:.5,color:"#000",position:"absolute",width:"100%",top:"-4px"}},children:[e.jsx(rt,{id:m==null?void 0:m.id}),e.jsx(ht,{modelName:"Task",modelId:m==null?void 0:m.id,hideLabel:!0,maxWidth:300,hideTaskCode:i})]}):j?y=e.jsxs(e.Fragment,{children:[e.jsx(u,{ml:1,className:o.taskCode,style:{backgroundColor:"#ededed",color:"#000"},children:f}),e.jsx(u,{ml:1,component:le,to:(g==null?void 0:g.link)||"#",className:o.taskTitle,children:(j==null?void 0:j.name)||(j==null?void 0:j.title)||(j==null?void 0:j.label)})]}):y=e.jsxs(e.Fragment,{children:[p?e.jsx(u,{ml:1,className:o.taskCode,id:"task-code",style:{backgroundColor:x||"#ededed",color:x?"#fff":"#000"},children:`#${p}`}):null,e.jsxs(u,{ml:1,component:le,to:(g==null?void 0:g.link)||"#",className:o.taskTitle,children:[f==="Task"&&e.jsx(rt,{id:m==null?void 0:m.id}),c]})]}),h=e.jsxs(u,{sx:{display:"flex",alignItems:"center",width:"100%"},children:[t.stoppedAt?e.jsx(w,{title:"Start",children:e.jsx(R,{className:o.flat,size:"small",onClick:s,children:e.jsx(xt,{gradient:!0})})}):e.jsx(w,{title:"Stop",children:e.jsx(R,{className:o.flat,size:"small",onClick:n,children:e.jsx(ln,{})})}),!i&&e.jsx(u,{sx:{ml:"8px",width:"65px",flexShrink:0},id:"timer",children:e.jsx(I,{className:`${o.timer} ${t.stoppedAt?o.timerStopped:o.timerRunning}`,children:e.jsx(Bn,{startedAt:t.startedAt,stoppedAt:t.stoppedAt})})}),y]})}else h=e.jsx(u,{mr:1,sx:{paddingLeft:"10px"},children:e.jsx(Ce,{name:"Core.AppContainer.Topbar.IntervalWidget",slotProps:{emptyPlaceholder:"Start something new"},children:y=>e.jsx(I,{children:y.emptyPlaceholder})})});return e.jsxs(e.Fragment,{children:[h,e.jsxs(u,{sx:{display:"flex",alignItems:"center"},mr:1,children:[e.jsx(u,{children:e.jsx(w,{title:"Select Task",children:e.jsx(R,{className:o.smallBtn,size:"small",onClick:a,children:e.jsx(Rn,{className:o.caret})})})}),e.jsx(w,{title:"Options",children:e.jsx(R,{className:o.smallBtn,size:"small",onClick:r,children:e.jsx(Nt,{className:o.commentIcon})})})]})]})}function Vt({children:t,saveMode:s,saving:n,save:a,onClose:r,modelName:i,label:o,saveLabel:p}){const c=l.useCallback(()=>{n||a()},[a,n]);return e.jsxs(u,{children:[n?e.jsx(yt,{color:"primary"}):null,e.jsxs(u,{p:2,minWidth:"500px",children:[e.jsxs(u,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsx(I,{variant:"h5",children:o||`${s==="create"?"Create":"Update"} ${i}`}),e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(u,{mr:1,children:e.jsx(N,{onClick:r,disabled:n,size:"small",variant:"outlined",children:s==="create"?"Cancel":"Close"})}),e.jsx(N,{onClick:c,disabled:n,color:"primary",size:"small",variant:"contained",children:p||`${s==="create"?"Create":"Save changes"}`})]})]}),e.jsx(u,{mt:2,children:t})]})]})}const zn=kt().shape({userId:U().required("Please select a user.")});function Fn({intervalId:t}){const[s,n]=l.useState(null);l.useEffect(()=>{async function g(){const h=await te.graphql(se(`query ($id: ID!) {
          getInterval (id: $id) {
            ${Oe}
          }
        }`,{id:t}));n(h.data.getInterval)}g()},[t]);const a=l.useCallback(()=>{B.publish("intervalFormDialogClose")},[]),{startInterval:r}=l.useContext(pe),{fetching:i,saving:o,save:p,formValues:c,formErrors:x,formTouched:f,onInputEvent:m,onBlurEvent:d,saveMode:j}=Re({model:"Interval",yupValidationSchema:zn,onSave:l.useCallback(async g=>{const h=await r({targetId:s.targetId||s.projectId||s.taskId,isTagged:!0,projectId:s.projectId,userId:g.userId,targetType:s.targetType});return a(),h},[s,r,a])});return!c||i||!s?e.jsx(u,{p:2,children:e.jsx(ce,{})}):e.jsxs(Vt,{saveMode:j,saving:o,save:p,saveLabel:"Tag user",onClose:a,label:"Tag user",children:[e.jsx(Dt,{label:"Assignee",value:c.userId,name:"userId",variant:"outlined",onChange:m,onBlur:d}),e.jsx(I,{color:"error",children:f.userId?x.userId:null})]})}function Hn(){const[{isOpen:t,intervalId:s},n]=l.useState({isOpen:!1,intervalId:null}),a=l.useCallback(()=>{n(r=>({...r,isOpen:!1}))},[]);return l.useEffect(()=>{const r=B.subscribe("intervalTagUserFormDialogOpen",(o,p)=>{n(c=>({...c,isOpen:!0,intervalId:p.intervalId}))}),i=B.subscribe("intervalFormDialogClose",()=>{n(o=>({...o,isOpen:!1}))});return()=>{B.unsubscribe(r),B.unsubscribe(i)}},[]),e.jsx(Ne,{open:t,onClose:a,children:e.jsx(Fn,{intervalId:s})})}function Zn(){const{globalState:{authUser:t},updateGlobalState:s}=Y(),{currentInterval:n,updateIntervalContext:a}=l.useContext(pe),[r,i]=l.useState({isOpen:!1,interval:null,isDeleting:!1});l.useEffect(()=>{const c=B.subscribe("intervalDelete",(x,f)=>{i(m=>({...m,isOpen:!0,isDeleting:!1,interval:f}))});return()=>{B.unsubscribe(c)}},[]);const o=l.useCallback(()=>{i(c=>({...c,isOpen:!1,interval:null,isDeleting:!1}))},[]),p=l.useCallback(async()=>{i(x=>({...x,isDeleting:!0}));let c=await te.graphql(se(`mutation {
      deleteInterval (input: {
        id: "${r.interval.id}"
      }) {
        ${Oe}
      }
    }`));if(c=c.data.deleteInterval,n&&c.id===n.id){let x=await te.graphql(se(`{
        searchIntervals (
          filter: {
            stoppedAtMs: {
              lt: ${Date.now()}
            }
          }
          sort: {
            field: stoppedAtMs
            direction: desc
          }
          limit: 1
        ) {
          items {
            ${Oe}
          }
        }
      }`));x=x.data.searchIntervals.items[0];const f=await te.graphql(se(`mutation {
        updateUser (input: {
          id: "${t.id}"
          lastStoppedIntervalId: "${c.id===t.lastStoppedIntervalId?x.id:t.lastStoppedIntervalId}"
          latestIntervalId: "${c.id===t.latestIntervalId?x.id:t.latestIntervalId}"
        }) {
          ${ks}
        }
      }`));a({currentInterval:x}),s({authUser:f.data.updateUser})}B.publish("intervalDeleted",c),o()},[r.interval,o,t,s,n,a]);return e.jsx(Ne,{open:r.isOpen,onClose:o,children:e.jsx(u,{p:2,children:r.isDeleting?e.jsx(ce,{size:30}):e.jsxs(e.Fragment,{children:[e.jsx(I,{children:"Are you sure you want to delete the interval?"}),e.jsxs(u,{mt:2,display:"flex",justifyContent:"flex-end",children:[e.jsx(u,{mr:2,children:e.jsx(N,{color:"secondary",size:"small",onClick:o,children:"Cancel"})}),e.jsx(N,{color:"primary",variant:"contained",size:"small",onClick:p,children:"Confirm"})]})]})})})}const Kn=z({intervalWidget:{backgroundColor:"#F3F7FB",borderRadius:"18px",height:"34px",display:"flex",alignItems:"center",justifyContent:"space-between"}});function Wn({toggleSearchTasks:t,toggleIntervalComment:s}){const n=Kn(),{fetching:a,fetched:r,currentInterval:i,stopCurrentInterval:o,startCurrentInterval:p}=l.useContext(pe);Se({trigger:"stopCurrentInterval",callback:o});const c=l.useCallback(()=>{i&&p({targetId:i.targetId||i.taskId||i.opportunityId,targetType:i.targetType})},[i,p]);Se({trigger:"startCurrentInterval",callback:c});const x=l.useMemo(()=>!i&&!r||a?e.jsx(u,{className:n.intervalWidget,children:e.jsx(ce,{size:20,color:"inherit"})}):e.jsx(u,{className:n.intervalWidget,children:e.jsx(Pn,{interval:i,restartCurrentInterval:c,stopCurrentInterval:o,toggleSearchTasks:t,toggleIntervalComment:s})}),[n,a,r,c,o,i,t,s]);return e.jsxs(e.Fragment,{children:[x,e.jsx(Hn,{}),e.jsx(Zn,{})]})}function _n(t,s){let n=null;return{callback:function(...r){clearTimeout(n),n=setTimeout(function(){t(...r)},s)},cancel:function(){clearTimeout(n)}}}function qn(){const{globalState:{authUser:t}}=Y(),s=t==null?void 0:t.id,n=bt({index:"interval",skip:!s,body:{sort:[{startedAt:{order:"desc"}}],size:0,query:{bool:{must:[{term:{"userId.keyword":s}}]}},aggs:{recent_task_ids:{terms:{field:"taskId.keyword",order:{latest_date:"desc"},size:5},aggs:{latest_date:{max:{field:"startedAt"}}}}}}}),a=W(n,"result.aggregations.recent_task_ids.buckets",[]).map(p=>p.key),r=X(ge(Un(a,s)),{skip:a.length<1});return{tasks:Object.values(W(r,"data",{})).map(p=>({...p,resultType:"task"})),refetch:n.refetch,loading:n.loading}}function Un(t,s){return t.length<1?"{_: Boolean}":`query MY_RECENT_TASKS_INFO {
    ${t.reduce(function(n,a,r){return`
      ${n}
      t_${r}: getTask(id: ${JSON.stringify(a)}){
        id
        title
        code
        createdAt
        isGlobalBookmark
        estimatedEffort
        status
        projectId
        project {
          id
          name
          color
          company {
            id
            name
          }
        }
        opportunity {
          id
          name
          company {
            id
            name
          }
        }
        sprint {
          id
          name
          sprintProjectId
        }
        bookmarks (filter: {
          userId: { eq: ${JSON.stringify(s)} }
        }) {
          items {
            id
          }
        }
      }
      `},"")}}`}function Gn(){const{globalState:{authUser:t}}=Y(),s=t==null?void 0:t.id;console.log(">>hooks/useMyAssignedTasks::","userId",s);const n=X(me`
      query($sort: AWSJSON, $filter: AWSJSON) {
        searchTasks: nestedSearch(type: "Task", filter: $filter, sort: $sort) {
          nextToken
          total
          items {
            ... on Task {
              id
              title
              code
              createdAt
              isGlobalBookmark
              status
              projectId
              estimatedEffort
              project {
                id
                name
                color
              }
              taskSprintId
              sprint {
                id
                name
                sprintProjectId
              }
              bookmarks (filter: {
                userId: { eq: ${JSON.stringify(s)} }
              }) {
                items {
                  id
                }
              }
            }
          }
        }
      }
    `,{variables:{filter:JSON.stringify({assignee:{id:{eq:s}},status:{ne:"COMPLETE"}}),sort:JSON.stringify({field:"createdAt",direction:"desc"})},fetchPolicy:"network-only",nextFetchPolicy:"cache-first"}),a=W(n,"data.searchTasks.total","");return W(n,"data.searchTasks.nextToken"),{total:a,tasks:W(n,"data.searchTasks.items",[])}}const Qn=z(t=>({root:{display:"flex",justifyContent:"space-between","& .MuiButton-outlinedSizeSmall":{fontSize:"x-small"},paddingRight:20,"& .baj":{borderRadius:10,backgroundColor:t.palette.secondary.main,marginLeft:3,padding:"0 5px",color:"white"}},btns:{"& > button":{borderRadius:20,marginRight:3,marginBottom:3},"& .MuiButton-outlined.Mui-disabled":{backgroundColor:"#dadada",color:t.palette.primary.main}},checkbox:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginRight:25},modelSelector:{marginTop:"5px",width:"442px"}}));function Yn({children:t,badge:s,...n}){return e.jsxs(N,{variant:"outlined",size:"small",...n,children:[e.jsx("div",{className:"btxt",children:t}),s?e.jsx("div",{className:"baj",children:s}):null]})}function Jn({className:t,data:s,props:n}){var i;const a={...n,className:t},r=!!((i=s._source.templateSetting)!=null&&i.enabled);return r?null:e.jsx("div",{...a,children:e.jsx(u,{sx:{paddingLeft:3,paddingRight:3,paddingTop:1,paddingBottom:1,cursor:"pointer","&:hover":{backgroundColor:"#dadada"}},children:e.jsxs(I,{color:"textPrimary",children:[(n==null?void 0:n.key)||""," ",r]})})})}function Xn({mode:t=K.RECENT,onChecked:s,isSimpleListView:n,incompleteTotal:a,filters:r,onChange:i,onFiltersChange:o}){const p=Qn(),c=l.useCallback(x=>{const f=x.target.closest("button").getAttribute("name");i&&i(f,t)},[i,t]);return console.log({filters:r}),e.jsxs(u,{children:[e.jsxs("div",{className:p.root,children:[e.jsxs("div",{className:p.btns,children:[t===K.SEARCH&&e.jsx(N,{name:"search",variant:"outlined",size:"small",disabled:t===K.SEARCH,onClick:c,children:"Search Results"}),e.jsx(N,{name:"recent",variant:"outlined",disabled:t===K.RECENT,size:"small",onClick:c,children:"Recent Tasks"}),a&&e.jsx(Yn,{name:"incomplete",disabled:t===K.INCOMPLETE,badge:a,onClick:c,children:"Open Tasks"}),e.jsx(N,{name:"today",variant:"outlined",disabled:t===K.TODAY,size:"small",onClick:c,children:"Today's Tasks"}),e.jsx(N,{name:"myBookmark",variant:"outlined",disabled:t===K.MYBOOKMARK,size:"small",onClick:c,children:"My Bookmark"}),e.jsx(N,{name:"myTeamBookmark",variant:"outlined",disabled:t===K.MYTEAMBOOKMARK,size:"small",onClick:c,children:"Team Bookmark"})]}),e.jsx("div",{className:p.modelSelector,children:e.jsx(vt,{model:"Project",label:"Project",variant:"slim-filter",custom:!0,icon:Qt,filterOptions:x=>console.log({filter:x}),value:r.projectId,onChange:(x,f)=>{var d;console.log({data:f});const m=(d=f==null?void 0:f._source)==null?void 0:d.id;o({projectId:m})},renderOption:(x,f)=>e.jsx(Jn,{className:p.opt,data:f,props:x}),fullWidth:!0})})]}),e.jsxs(u,{className:p.checkbox,children:[e.jsx(De,{size:"small",className:"bt-select",onChange:s,checked:n}),e.jsx(I,{variant:"p",children:"Simple Listing"})]})]})}function $n({date:t}){const s=l.useCallback(()=>t&&bs(new Date(t),{addSuffix:!0}),[t]),[n,a]=l.useState(s);return l.useEffect(()=>{const r=setInterval(()=>{a(s())},1e3);return()=>{clearInterval(r)}},[s]),t?n:null}function it(t){return e.jsx(ue,{...t,width:"12",height:"18",viewBox:"0 0 12 18",paths:["M6.00008 14.4317L0.166748 17.3484V1.83335C0.166748 0.912879 0.91294 0.166687 1.83341 0.166687H10.1667C11.0872 0.166687 11.8334 0.912879 11.8334 1.83335V17.3484L6.00008 14.4317ZM1.83341 14.6517L6.00008 12.5683L10.1667 14.6517V1.83335H1.83341V14.6517Z"]})}function ot(t){return e.jsx(ue,{...t,width:"16",height:"19",viewBox:"0 0 16 19",paths:["M6.33333 15.4317L0.5 18.3484V5.33337C0.5 4.4129 1.24619 3.66671 2.16667 3.66671H10.5C11.4205 3.66671 12.1667 4.4129 12.1667 5.33337V18.3484L6.33333 15.4317ZM2.16667 15.6517L6.33333 13.5683L10.5 15.6517V5.33337H2.16667V15.6517ZM4.66689 2.00004C4.68167 1.077 5.4221 0.333374 6.33333 0.333374H13.8333C14.7538 0.333374 15.5 1.09217 15.5 2.02819V15.2771L13.8333 14.4297V2.00004H4.66689Z"]})}const ea=280,ta=380;function sa({result:t,simpleListView:s}){var h,C,k,L,M,v,O,V;const{classes:n,setState:a,startCurrentInterval:r,afterSubmit:i,removeFromPersonalBookmarks:o,addToPersonalBookmarks:p,removeFromGlobalBookmarks:c,addToGlobalBookmarks:x}=l.useContext(Ze),{enqueueSnackbar:f}=Ve(),m=(h=t.project)==null?void 0:h.color;console.log(">>ResultTypes/TaskResult::","result",t);const d="bookmarks"in t;let j;d&&(j=W(t,"bookmarks.items[0]"));const g=((C=t.project)==null?void 0:C.company)||((k=t.opportunity)==null?void 0:k.company);return console.log(">>ResultTypes/TaskResult::","result",t),e.jsxs(u,{className:n.resultContainer,children:[e.jsxs(u,{className:s?n.simpleListView:"",children:[e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(w,{title:"Start task",children:e.jsx(R,{edge:"start",size:"small",onClick:()=>{t!=null&&t.estimatedEffort||f("Please set an Estimated Effort on your current interval.",{variant:"warning"}),r({targetId:t.id,targetType:t.resultType}),i()},children:e.jsx(xt,{gradient:!0,size:"small"})})}),e.jsx(u,{ml:1,display:"flex",alignItems:"center",children:t.resultType==="task"?e.jsx(Yt,{data:t,maxWidth:s?ea:ta}):e.jsxs(e.Fragment,{children:[t.code?e.jsxs(I,{className:n.taskCode,style:{backgroundColor:m||"#ededed",color:m?"#fff":"#000"},children:["#",t.code]}):null,e.jsx(I,{className:n.taskTitle,children:t.title})]})})]}),s&&e.jsxs(e.Fragment,{children:[t.project&&e.jsx(u,{children:e.jsx(I,{color:"textSecondary",variant:"caption",children:e.jsx(ae,{model:"Project",data:t.project,children:e.jsx("strong",{children:((L=t==null?void 0:t.project)==null?void 0:L.name)??""})})})}),t.opportunity&&e.jsx(u,{children:e.jsx(I,{color:"textSecondary",variant:"caption",children:e.jsx(ae,{model:"Opportunity",data:t.opportunity,children:e.jsx("strong",{children:((M=t==null?void 0:t.opportunity)==null?void 0:M.name)??""})})})}),g&&g.name&&e.jsx(u,{children:e.jsx(I,{color:"textSecondary",variant:"caption",children:e.jsx(ae,{model:"Company",data:g.name,children:e.jsx("strong",{children:(g==null?void 0:g.name)??""})})})})]})]}),!s&&e.jsxs(u,{className:"taskSubdetail",children:[e.jsxs(u,{children:[t.project&&e.jsx(u,{children:e.jsxs(I,{color:"textSecondary",variant:"caption",children:["In project"," ",e.jsx(ae,{model:"Project",data:t.project,children:e.jsx("strong",{children:((v=t==null?void 0:t.project)==null?void 0:v.name)??""})})]})}),t.opportunity&&e.jsx(u,{children:e.jsxs(I,{color:"textSecondary",variant:"caption",children:["In opportunity"," ",e.jsx(ae,{model:"Opportunity",data:t.opportunity,children:e.jsx("strong",{children:((O=t==null?void 0:t.opportunity)==null?void 0:O.name)??""})})]})}),g&&g.name&&e.jsx(u,{children:e.jsxs(I,{color:"textSecondary",variant:"caption",children:["In company"," ",e.jsx(ae,{model:"Company",data:g.name,children:e.jsx("strong",{children:(g==null?void 0:g.name)??""})})]})}),t.sprint&&e.jsx(u,{children:e.jsxs(I,{color:"textSecondary",variant:"caption",children:["In stage"," ",e.jsx(ae,{model:"Sprint",data:t.sprint,children:e.jsx("strong",{children:((V=t==null?void 0:t.sprint)==null?void 0:V.name)??""})})]})}),e.jsx(u,{children:e.jsx(I,{color:"textSecondary",variant:"caption",children:e.jsx($n,{date:t.createdAt})})})]}),e.jsx(u,{display:"flex",children:d&&e.jsxs(e.Fragment,{children:[e.jsx(u,{mr:1,children:j?e.jsx(w,{title:"Remove from your bookmarks",children:e.jsx(R,{size:"small",onClick:async()=>{await o(j.id),a(S=>{var y;return{...S,results:(y=S.results)==null?void 0:y.map(b=>b.id!==t.id?b:{...b,bookmark:null})}})},children:e.jsx(it,{gradient:!0,className:n.bookmarksBtn})})}):e.jsx(w,{title:"Add to your bookmarks",children:e.jsx(R,{size:"small",onClick:async()=>{const S=await p(t.id);console.log(">>ResultTypes/TaskResult::","result",t),a(y=>{var b;return{...y,results:(b=y.results)==null?void 0:b.map(D=>D.id!==t.id?D:{...D,bookmark:S})}})},children:e.jsx(it,{className:n.bookmarksBtn})})})}),e.jsx(u,{mr:2,children:t.isGlobalBookmark?e.jsx(w,{title:"Remove from your team's bookmarks",children:e.jsx(R,{size:"small",onClick:async()=>{await c(t.id),a(S=>{var y;return{...S,results:(y=S.results)==null?void 0:y.map(b=>b.id!==b.id?b:{...b,isGlobalBookmark:!1})}})},children:e.jsx(ot,{gradient:!0,className:n.bookmarksBtn})})}):e.jsx(w,{title:"Add to your team's bookmarks",children:e.jsx(R,{size:"small",onClick:async()=>{await x(t.id),a(S=>{var y;return{...S,results:(y=S.results)==null?void 0:y.map(b=>b.id!==b.id?b:{...b,isGlobalBookmark:!0})}})},children:e.jsx(ot,{className:n.bookmarksBtn})})})})]})})]})]})}const na=l.lazy(()=>ke(()=>import("./OpportunityResult-11c04efc.js"),["./OpportunityResult-11c04efc.js","./TransitionGroupContext-9d36972e.js","./index-f1f749bf.js","./_commonjsHelpers-042e6b4d.js","./assertThisInitialized-ad1db8e7.js","./Play-87fed129.js","./papaparse.min-b66e70e7.js","./_arrayIncludes-2cfb33ae.js","./_baseForOwn-9b89c4b6.js","./index-bcfaa842.js","./index-96c5f47c.js","./isNativeReflectConstruct-05c29d01.js","./Button-352c3435.js","./isPlainObject-07477f89.js","./debounce-213cd46f.js","./iframe-ed7f5a3f.js","./index-4d501b15.js","./papaparse-cdbe7e6d.css","./react-router-19e5b27c.js","./tiny-invariant-dd7d57d2.js","./filter-f99df4e5.js","./LocalizationProvider-a287304f.js","./react-router-dom-60ea8218.js","./uniq-0d482d7b.js","./cloneDeep-91467704.js","./OpportunityLink-b32d0c35.js","./hotkeys-a6c2398e.js","./Stop-d43309a7.js","./Error-a5d563f0.js","./ProjectSelect-6c06b3ef.js","./Save-1bca3c1a.js","./index-5757e0d6.js","./TaskStatusPrompt-5fa87980.js","./SearchIcon-482ff285.js","./Cup-50456763.js","./auth-5b6b0f80.js"],import.meta.url)),aa=l.lazy(()=>ke(()=>import("./OppItemResult-dd6439ba.js"),["./OppItemResult-dd6439ba.js","./TransitionGroupContext-9d36972e.js","./index-f1f749bf.js","./_commonjsHelpers-042e6b4d.js","./assertThisInitialized-ad1db8e7.js","./Play-87fed129.js","./papaparse.min-b66e70e7.js","./_arrayIncludes-2cfb33ae.js","./_baseForOwn-9b89c4b6.js","./index-bcfaa842.js","./index-96c5f47c.js","./isNativeReflectConstruct-05c29d01.js","./Button-352c3435.js","./isPlainObject-07477f89.js","./debounce-213cd46f.js","./iframe-ed7f5a3f.js","./index-4d501b15.js","./papaparse-cdbe7e6d.css","./react-router-19e5b27c.js","./tiny-invariant-dd7d57d2.js","./filter-f99df4e5.js","./LocalizationProvider-a287304f.js","./react-router-dom-60ea8218.js","./uniq-0d482d7b.js","./cloneDeep-91467704.js","./OpportunityLink-b32d0c35.js","./hotkeys-a6c2398e.js","./Stop-d43309a7.js","./Error-a5d563f0.js","./ProjectSelect-6c06b3ef.js","./Save-1bca3c1a.js","./index-5757e0d6.js","./TaskStatusPrompt-5fa87980.js","./SearchIcon-482ff285.js","./Cup-50456763.js","./auth-5b6b0f80.js"],import.meta.url)),K=Object.freeze({SEARCH:"search",RECENT:"recent",INCOMPLETE:"incomplete",TODAY:"today",MYBOOKMARK:"myBookmark",MYTEAMBOOKMARK:"myTeamBookmark"});function ra(){const{classes:t,filters:s,setState:n,fetching:a,recentTasksLoading:r,queryResults:i,searchString:o,handleListOptionChanged:p,incompleteTotal:c,myRecentTasks:x,myIncompleteTasks:f,myTodayTasks:m,myBookmarkTasks:d,myTeamBookmarkTasks:j,resultMode:g,isSimpleListView:h,onChecked:C}=l.useContext(Ze),k=l.useCallback(async y=>{n(b=>({...b,filters:y}))},[n]),L=a||r;function M(){if(L)return;let y,b;if(i&&o){if(!i.length)return{noResult:!0};y=i,b=K.SEARCH}else switch(b=g,g){case K.INCOMPLETE:y=f.map(D=>({...D,resultType:"task"}));break;case K.RECENT:y=x;break;case K.TODAY:y=[...new Set(m)].map(D=>({...D,resultType:"task"}));break;case K.MYBOOKMARK:y=[...new Set(d)].map(D=>({...D,resultType:"task"}));break;case K.MYTEAMBOOKMARK:y=j.map(D=>({...D,resultType:"task"}));break}return{resultLabel:b,results:y}}if(L)return e.jsx(u,{p:2,display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(J,{})});const{noResult:v,results:O,resultLabel:V}=M(),S=(O==null?void 0:O.sort((y,b)=>{var E,T,A,q;const D=((E=y==null?void 0:y.project)==null?void 0:E.company)??((T=y==null?void 0:y.opportunity)==null?void 0:T.company),_=((A=b==null?void 0:b.project)==null?void 0:A.company)??((q=b==null?void 0:b.opportunity)==null?void 0:q.company);return D==null?void 0:D.name.localeCompare(_==null?void 0:_.name)}))??[];return e.jsxs("div",{className:v?t.noResult:h?t.simpleListContainer:t.resultsList,children:[e.jsx(I,{variant:"caption",children:e.jsx(Xn,{mode:V,isSimpleListView:h,onChecked:C,filters:s,onChange:p,onFiltersChange:k,incompleteTotal:c})}),v&&e.jsx(u,{mt:3,children:e.jsx(I,{children:e.jsxs("center",{children:["No results found for ",e.jsx("strong",{children:o})]})})}),e.jsx(l.Suspense,{fallback:e.jsx(J,{}),children:!v&&S.map(y=>{if(!y.id||y.status===Jt)return null;switch(console.log({result:y.status}),y.resultType){case P.Task.resultType:return e.jsx(sa,{result:y,simpleListView:h},y.id);case P.OppItem.resultType:return e.jsx(aa,{result:y},y.id);default:return e.jsx(na,{result:y},y.id)}})})]})}function ia(){const{globalState:{authUser:t}}=Y(),{start:s=sn(new Date).getTime(),end:n=nn(new Date).getTime(),userId:a}=Xt(),r={or:[{startedAtMs:{gte:s},stoppedAtMs:{lte:n}},{isDone:{eq:!1}}]};a&&(r.userId={eq:t.id});const i=X(me`
      query TODAYS_TASK_Q(
        $filter: SearchableIntervalFilterInput
        $sort: SearchableIntervalSortInput
        $limit: Int
        $nextToken: String
      ) {
        searchIntervals(
          filter: $filter
          sort: $sort
          limit: $limit
          nextToken: $nextToken
        ) {
          nextToken
          items {
            id
            task {
              id
              code
              title
              createdAt
              projectId
              code
              taskSprintId
              project {
                id
                name
                color
              }
              sprint {
                id
                name
                sprintProjectId
              }
            }
          }
        }
      }
    `,{variables:{filter:r,limit:999,sort:{field:"startedAt",direction:"desc"}},fetchPolicy:"network-only",nextFetchPolicy:"cache-first"}),o=W(i,"data.searchIntervals.items");return{tasks:o==null?void 0:o.map(c=>c==null?void 0:c.task)}}const ve="#";function oa(t){return t.resultType===P.Task.resultType?t.title:(t.resultType===P.OppItem.resultType,t.name)}function lt(t){return oa(t).toLowerCase()}async function la(t){const{userId:s,searchText:n,filter:a}=t;if(ve===n||n.length<1)return;const r={archived:{ne:!0},status:{ne:"COMPLETE"}},i=n.startsWith(ve),o=n.toLowerCase();i?r.code={eq:o.replace(ve,"")}:r.title={matchPhrasePrefix:o.toLowerCase()};const p={archived:{ne:!0},name:{matchPhrasePrefix:o}},c={status:{ne:"COMPLETED"}};a!=null&&a.projectId?(r.projectId={eq:a.projectId},c.id={eq:a.projectId}):c.name={matchPhrasePrefix:o.toLowerCase()};const x=await vs.query({query:Ss,variables:{userId:s,tasksFilter:r,opportunityFilter:p,projectFilter:c},fetchPolicy:"network-only"});return[].concat(x.data.tasks.items.filter(f=>{var m;return((m=f==null?void 0:f.project)==null?void 0:m.status)!=="COMPLETED"}).map(f=>({...f,resultType:P.Task.resultType})),x.data.opportunities.items.map(f=>({...f,resultType:P.Opportunity.resultType}))).sort((f,m)=>{const d=lt(f),j=lt(m);return d===j?0:d>j?1:-1})}function ca(){const{globalState:{authUser:t}}=Y(),s=X(me`
      query MY_BOOKMARK_TASKS_Q(
        $filter: SearchableUserTaskBookmarkFilterInput
      ) {
        searchUserTaskBookmarks(
          filter: $filter
        ) {
          items {
            id
            task {
              id
              code
              title
              createdAt
              projectId
              code
              taskSprintId
              project {
                id
                name
                color
              }
              sprint {
                id
                name
                sprintProjectId
              }
            }
          }
        }
      }
    `,{variables:{filter:{userId:{eq:t.id}},limit:999,sort:{field:"startedAt",direction:"desc"}},fetchPolicy:"network-only",nextFetchPolicy:"cache-first"}),n=W(s,"data.searchUserTaskBookmarks.items");return{tasks:n==null?void 0:n.map(r=>r==null?void 0:r.task)}}function da(){const t=X(me`
      query MY_TEAM_BOOKMARK_TASKS_Q(
        $filter: SearchableTaskFilterInput!,
        $sort: SearchableTaskSortInput
      ) {
        searchTasks(
          filter: $filter,
          sort: $sort
        ) {
          items {
            id
            code
            title
            createdAt
            projectId
            code
            taskSprintId
            project {
                id
                name
                color
            }
            sprint {
                id
                name
                sprintProjectId
            }
          }
        }
      }
    `,{variables:{filter:{isGlobalBookmark:{eq:!0}},limit:999,sort:{field:"title",direction:"asc"}},fetchPolicy:"network-only",nextFetchPolicy:"cache-first"});return{tasks:W(t,"data.searchTasks.items")}}const Ze=l.createContext(null),ua=z(t=>({noResult:{overflowY:"overlay",height:"100px",marginTop:t.spacing(1)},resultsList:{overflowY:"overlay",height:"400px",marginTop:t.spacing(1)},resultContainer:{border:"1px dashed #CDD3DB",margin:"10px 0",padding:"5px","& .taskSubdetail":{display:"flex",alignItems:"center",justifyContent:"space-between",paddingLeft:"40px"},"& .taskSubdetail span":{opacity:.8},"& .taskSubdetail strong":{color:t.palette.primary.main,fontWeight:"unset"}},taskCode:{padding:"0px 5px",marginRight:"5px",fontSize:"11px",alignSelf:"center"},taskTitle:{width:"349px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},oppItem:{"& .opp-chip":{fontSize:"x-small",backgroundColor:"#9e9e9e",color:"white",marginRight:"5px",padding:"0 6px",borderRadius:"3px"},"& .opp-itm-chip":{backgroundColor:"#a0b78f"}},bookmarksBtn:{width:"16px",height:"19px"},simpleListContainer:{overflowY:"overlay",height:"100vh",marginTop:t.spacing(1)},simpleListView:{display:"grid",gridTemplateColumns:"320px 200px 200px",columnGap:1,justifyContent:"space-between"}}));function ct({afterSubmit:t,open:s,isSimpleListView:n,onChecked:a}){const r=ua(),i=l.useRef(null),[{results:o,fetching:p,searchString:c,filters:x,resultMode:f},m]=l.useState({results:null,resultMode:"recent",fetching:!1,searchString:"",filters:{}}),{startCurrentInterval:d}=l.useContext(pe),{globalState:{authUser:j}}=Y(),g=l.useCallback(async(Z,ne)=>{if(ve===Z||Z.length<1)return;const de=ne||x;m(Me=>({...Me,results:null,fetching:!0}));const he=await la({userId:j.id,filter:de,searchText:Z});m(Me=>({...Me,results:he,fetching:!1}))},[j.id,x]),h=l.useMemo(()=>_n(g,1e3),[g]),C=l.useCallback(({keyCode:Z})=>{Z===13&&(h.cancel(),g(c))},[h,c,g]),k=l.useCallback(({target:{value:Z}})=>{m(ne=>({...ne,result:null,resultMode:"recent",fetching:!1,searchString:Z}))},[]);l.useEffect(()=>{c?h.callback(c):h.cancel()},[c,h]);const{addToPersonalBookmarks:L,addToGlobalBookmarks:M,removeFromPersonalBookmarks:v,removeFromGlobalBookmarks:O}=$t(),{tasks:V,refetch:S,loading:y}=qn(),{total:b,tasks:D}=Gn(),{tasks:_}=ia(),{tasks:E}=ca(),{tasks:T}=da(),A=l.useCallback((Z,ne)=>{m(de=>{const he={...de,resultMode:Z};return ne==="search"&&(he.resultMode=Z,he.searchString=""),he})},[]),q=l.useCallback(()=>{B.publish("intervalFormDialogOpen")},[]);return l.useEffect(()=>{s&&setTimeout(()=>i.current.focus(),0),S()},[s]),e.jsxs(Ze.Provider,{value:{search:g,classes:r,filters:x,setState:m,fetching:p,recentTasksLoading:y,queryResults:o,searchString:c,handleListOptionChanged:A,incompleteTotal:b,myRecentTasks:V,myIncompleteTasks:D,myTodayTasks:_,myBookmarkTasks:E,myTeamBookmarkTasks:T,resultMode:f,startCurrentInterval:d,afterSubmit:t,removeFromPersonalBookmarks:v,addToPersonalBookmarks:L,removeFromGlobalBookmarks:O,addToGlobalBookmarks:M,onChecked:a,isSimpleListView:n},children:[e.jsx(u,{children:e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(oe,{fullWidth:!0,inputRef:i,label:"Search task title or code (#)",value:c,onChange:k,onKeyUp:C,variant:"outlined",margin:"dense"}),e.jsx(u,{mr:1,children:e.jsx(w,{title:"Create interval",children:e.jsx(R,{color:"inherit",size:"small",onClick:q,children:e.jsx(hn,{})})})})]})}),e.jsx(ra,{})]})}function dt({afterSubmit:t,open:s}){const n=l.useRef(null),{currentInterval:a}=l.useContext(pe),r=l.useMemo(()=>({enableReset:!0,id:(a==null?void 0:a.id)||null,model:"Interval",initialFormValues:{comment:(a==null?void 0:a.comment)||""},onAfterSave:({comment:m})=>{B.publish("intervalComment",m),t()}}),[t,a]),{formValues:i,onInputEvent:o,save:p,saving:c}=Re(r),x=l.useCallback(({keyCode:m})=>{m===13&&p()},[p]);l.useEffect(()=>{s&&!c&&setTimeout(()=>n.current.focus(),0)},[s,c]);const f=l.useCallback(()=>{p()},[p]);return e.jsx(u,{display:"flex",children:e.jsx(oe,{inputRef:n,label:"Short comment",variant:"outlined",margin:"dense",size:"small",value:i.comment||"",onChange:o,onKeyUp:x,disabled:c,name:"comment",fullWidth:!0,InputProps:{endAdornment:e.jsx(u,{mr:1,display:"flex",alignItems:"center",justifyContent:"center",children:c?e.jsx(ce,{size:20,color:"primary"}):e.jsx(R,{onClick:f,size:"large",children:e.jsx(xn,{})})})}})})}var Ke={},pa=ye;Object.defineProperty(Ke,"__esModule",{value:!0});var Pt=Ke.default=void 0,ma=pa(je()),ha=e;Pt=Ke.default=(0,ma.default)((0,ha.jsx)("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8z"}),"Update");function xa({requireProjectId:t,projectId:s,opportunityId:n,onChange:a,value:r,name:i,...o}){const[p,c]=l.useState(null),[x,f]=l.useState("");return l.useEffect(()=>{async function m(){if(s){const d=await te.graphql(se(`query (
            $filter: SearchableTaskFilterInput,
            $limit: Int,
            $sort: SearchableTaskSortInput
          ) {
            searchTasks (filter: $filter, limit: $limit, sort: $sort) {
              items {
                id
                title
              }
            }
          }`,{limit:999,filter:{projectId:{eq:s}},sort:{field:"title",direction:"asc"}}));c(d.data.searchTasks.items)}if(n){const d=await te.graphql(se(`query (
            $filter: SearchableTaskFilterInput,
            $limit: Int,
            $sort: SearchableTaskSortInput
          ) {
            searchTasks (filter: $filter, limit: $limit, sort: $sort) {
              items {
                id
                title
              }
            }
          }`,{limit:999,filter:{opportunityId:{eq:n}},sort:{field:"title",direction:"asc"}}));c(d.data.searchTasks.items)}}c(null),f(null),m()},[s,n]),l.useEffect(()=>{r&&!x&&p&&f(p.find(m=>m.id===r)||"")},[r,p,x]),p?(console.log({tasks:p}),e.jsx(Is,{autoComplete:!0,autoHighlight:!0,options:p,getOptionLabel:m=>(m==null?void 0:m.title)||"",value:x,onChange:(m,d)=>{a({target:{value:(d==null?void 0:d.id)||"",name:i}}),f(d)},renderOption:(m,d)=>Q.createElement(es,{...m,key:d.id,sx:{paddingLeft:2,paddingRight:2,paddingTop:1,paddingBottom:1,cursor:"pointer","&:hover":{backgroundColor:"#dadada"}}},e.jsx(I,{color:"textPrimary",children:(m==null?void 0:m.key)||""})),renderInput:m=>e.jsx(oe,{...m,...o,style:{minWidth:"200px"}})})):t&&!s?e.jsx(oe,{...o,disabled:!0,value:"Select a project first"}):e.jsx(ce,{size:10})}const fa=kt().shape({taskId:U().nullable(),targetType:U(),opportunityId:xe().when(["targetType"],{is:t=>t==="opportunityModel",then:U().required("Please select opportunity"),otherwise:U().nullable()}),forProjectId:xe().when(["targetType"],{is:t=>t==="task",then:U().required("Please select project."),otherwise:U().nullable()}),comment:U().nullable(),startedAt:xe().when({is:t=>!!t,then:xe().when(["stoppedAt"],{is:t=>!!t,then:fe().lessThan(Xe("stoppedAt"),"Time started must be less than time stopped."),otherwise:fe()}),otherwise:U()}).required("Please select date & time started."),stoppedAt:xe().nullable().when({is:t=>!!t,then:fe().when(["stoppedAtMs","stoppedAt"],{is:(t,s)=>t&&!s,then:fe().required("Please select date & time finished."),otherwise:fe().moreThan(Xe("startedAt"),"Time stopped must be greater than time started.")}),otherwise:U().when(["stoppedAtMs","stoppedAt"],{is:(t,s)=>t&&!s,then:U().required("Please select date & time finished."),otherwise:U()})})});function ga(t,{startedAt:s,stoppedAt:n}){return t.startedAt=new Date(s),t.startedAtMs=t.startedAt.getTime(),t.timezone=Tt,n&&(t.stoppedAt=new Date(n),t.stoppedAtMs=t.stoppedAt.getTime(),t.durationMs=Math.abs(t.startedAtMs-t.stoppedAtMs),t.totalHours=cn(t.durationMs),t.isDone=!0),t.week=Pe(Ot(t.startedAtMs,{weekStartsOn:1}),"y-MM-dd"),t.day=Fe(t.startedAtMs).toString(),t}const ut=({onClear:t,sx:s})=>e.jsx(R,{onClick:()=>t(),className:"DateTimePicker-ClrBtn",sx:{fontSize:18,...s},children:e.jsx(Ts,{fontSize:"18"})});function Ca({intervalId:t=null,stoppedAt:s=null,activeDate:n=null}){var E;const{globalState:{authUser:a}}=Y(),{enqueueSnackbar:r}=Ve(),{TextFieldClear:i,ClearVisibilityRuleSx:o}=As(),p=l.useRef(null),c=l.useCallback(()=>{B.publish("intervalFormDialogClose")},[]),{fetching:x,save:f,saving:m,formValues:d,formErrors:j,formTouched:g,onInputEvent:h,onBlurEvent:C,setField:k,saveMode:L}=Re({yupValidationSchema:fa,model:"Interval",id:t,queryFields:l.useCallback(T=>`${T}, previousInterval { id,stoppedAt }`,[]),onBeforeSave:l.useCallback(T=>{let A={...T};if(T.targetType==="task"){if(A.opportunityId=null,A.projectId=null,!A.taskId){const q="Task should not be empty";throw r(q,{variant:"error"}),new Error(q)}}else A.forProjectId=null;return A=ga(A,{startedAt:T.startedAt,stoppedAt:A.stoppedAt}),delete A.previousInterval,A.id?A:gn(A)},[]),onAfterSave:l.useCallback(T=>{St.dispatch("intervalEdited",T),c()},[c])});l.useEffect(()=>{d&&!d.userId&&k("userId",a.id)},[d,k,a]),l.useEffect(()=>{d&&!d.startedAt&&(s||k("startedAt",new Date(n).toISOString()),s&&k("startedAt",new Date(s).toISOString()))},[n,d,k,s]),l.useEffect(()=>{k("billable",!0)},[k]);const M=l.useCallback(()=>{k("billable",!(d!=null&&d.billable))},[d,k]),v=l.useCallback(T=>{new Date(T).toString()!=="Invalid Date"&&k("startedAt",new Date(T).toISOString())},[k]),O=l.useCallback(T=>{if(T===null){k("stoppedAt","");return}const A=new Date(T);A.toString()!=="Invalid Date"&&k("stoppedAt",A.toISOString())},[k]),V=l.useCallback(({target:{value:T}})=>{k("forProjectId",T),k("targetType",P.Project.resultType,!0),k("targetId",T,!0),k("taskId","",!0)},[k]),S=l.useCallback(()=>{d.previousInterval&&k("startedAt",new Date(d.previousInterval.stoppedAt))},[k,d]),y=l.useCallback(()=>{d.targetType==="opportunityModel"?k("targetType","task"):k("targetType","opportunityModel")},[d,k]),b=l.useCallback(({target:{value:T}})=>{k("opportunityId",T,!0),k("targetType",P.Opportunity.resultType,!0),k("targetId",T)},[k]),D=l.useCallback(({target:{value:T}})=>{k("taskId",T),k("targetType",P.Task.resultType,!0),k("targetId",T,!0)},[k]);if(!d||x)return e.jsx(u,{p:2,children:e.jsx(ce,{})});const _=[P.Opportunity.resultType,P.OppItem.resultType].includes(d.targetType);return e.jsxs(Vt,{modelName:"Interval",saveMode:L,saving:m,save:f,onClose:c,children:[e.jsx(Dt,{label:"Assignee",fullWidth:!0,name:"userId",variant:"outlined",value:d.userId,onChange:t?null:h,disabled:!!t}),e.jsxs(u,{mt:1,display:"flex",alignItems:"center",children:[d.previousInterval?e.jsx(u,{mr:2,children:e.jsx(w,{title:"Set to last interval time",children:e.jsx(R,{size:"small",onClick:S,disabled:!a.lastStoppedInterval&&!((E=a.latestInterval)!=null&&E.stoppedAt),children:e.jsx(Pt,{})})})}):null,e.jsxs(u,{width:"100%",sx:{position:"relative","&:hover .DateTimePicker-ClrBtn":{display:"inline-flex"}},children:[e.jsx(ut,{sx:{position:"absolute",top:3.5,right:35,zIndex:9999,display:"none"},onClear:()=>v(Date.now())}),e.jsx(Ue,{fullWidth:!0,label:"Date & time started",value:d.startedAt?new Date(d.startedAt):null,format:"dd/MM/yyyy hh:mm a",onChange:v,onBlur:C,name:"startedAt"}),e.jsx(I,{color:"error",children:g.startedAt?j.startedAt:null})]})]}),e.jsxs(u,{mt:1,sx:{position:"relative","&:hover .DateTimePicker-ClrBtn":{display:"inline-flex"}},children:[e.jsx(Ue,{fullWidth:!0,label:"Date & time finished",value:d.stoppedAt?new Date(d.stoppedAt):null,format:"dd/MM/yyyy hh:mm a",onChange:t&&!d.stoppedAt?null:O,onBlur:t||!d.stoppedAt?null:C,name:"stoppedAt",disabled:t&&!d.stoppedAt}),e.jsx(ut,{sx:{position:"absolute",top:3.5,right:35,zIndex:9999,display:"none"},onClear:()=>O(null)}),e.jsx(I,{color:"error",children:g.stoppedAt?j.stoppedAt:null})]}),_?e.jsx(u,{mt:1,children:e.jsx(nt,{variant:"outlined",fullWidth:!0,onChange:b,value:d.opportunityId,onBlur:C,targetOpportunity:!0})}):e.jsxs(e.Fragment,{children:[e.jsxs(u,{mt:1,children:[e.jsx(nt,{variant:"outlined",fullWidth:!0,onChange:V,value:d.forProjectId,onBlur:C}),e.jsx(I,{color:"error",children:g.forProjectId?j.forProjectId:null})]}),e.jsxs(u,{display:"flex",children:[e.jsxs(u,{mt:1,flexGrow:"1",children:[e.jsx(xa,{label:"Task",fullWidth:!0,value:d.taskId,name:"taskId",onChange:D,requireProjectId:!0,projectId:d.forProjectId,opportunityId:d.opportunityId,onBlur:C}),e.jsx(I,{color:"error",children:g.taskId?j.taskId:null})]}),e.jsxs(u,{alignSelf:"center",pt:1,pr:1,onClick:M,children:[e.jsx(De,{color:"primary",checked:d.billable}),e.jsx("label",{children:"Billable"})]})]})]}),_&&e.jsx(u,{mt:1,children:e.jsx(vt,{model:"OppItem",label:"Opp Item / Task",variant:"slim",icon:ts,query:d.opportunityId&&It({},"bool.must.term",{"opportunityId.keyword":d.opportunityId}),value:d.targetId,onChange:(T,A)=>{var Z;const q=(Z=A==null?void 0:A._source)==null?void 0:Z.id;k("targetType",q?P.OppItem.resultType:P.Opportunity.resultType,!0),k("targetId",q)},fullWidth:!0})}),e.jsxs(u,{mt:1,children:[e.jsx(oe,{ref:p,label:"Short comment",variant:"outlined",margin:"dense",value:d.comment??"",onChange:h,name:"comment",fullWidth:!0,onBlur:C,sx:o,InputProps:{endAdornment:e.jsx(i,{clearFn:()=>{h({target:{name:"comment",value:""}}),p.current.value=""}})},inputProps:{ref:p}}),e.jsx(I,{color:"error",children:g.comment?j.comment:null})]}),e.jsxs(u,{mt:1,children:[e.jsx(De,{id:"intervalFormTargetType",onChange:y,color:"primary",checked:_}),e.jsx("label",{htmlFor:"intervalFormTargetType",children:"Opportunity"})]})]})}async function ja({intervalId:t,projectId:s,assigneeId:n,dateAndTimeStarted:a,dateAndTimeEnded:r,taskId:i,billable:o,shortComment:p,opportunityId:c,day:x}){const f=new Date(a).getTime(),m=new Date(r).getTime(),d=new Date(a).toISOString(),j=new Date(r).toISOString(),g={projectId:s,forProjectId:s,userId:n,startedAt:d,stoppedAt:j,taskId:i,billable:o,comment:p,opportunityId:c,totalHours:fn(r,a,{roundingMethod:"ceil"}),targetType:"task",targetId:i,timezone:Tt,week:Pe(Ot(f,{weekStartsOn:1}),"y-MM-dd"),day:x,durationMs:Math.abs(f-m),startedAtMs:f,stoppedAtMs:m};t&&(g.id=t);const[h]=await ws([{__typename:"Interval",__op:t?"update":"create",...g}],{waitEs:!0});return h}const ya=({form:t,callback:s})=>{const{fields:n,options:a,modifyForm:r}=t,{assignee:i={},dateAndTimeStarted:o={},dateAndTimeEnded:p={},project:c={},task:x={},billable:f={},shortComment:m={},opportunity:d={}}=n,j=ft({api:ja}),g=Q.useCallback(async h=>{const C=new Date(h.dateAndTimeStarted).getTime();await j.request({intervalId:a.id,projectId:h.project,assigneeId:h.assignee,dateAndTimeStarted:h.dateAndTimeStarted,dateAndTimeEnded:h.dateAndTimeEnded,taskId:h.task,billable:h.billable,shortComment:h.shortComment,opportunityId:h.opportunity,day:Fe(C)}),await Ee("INTERVAL_LIST_TIMESHEET"),await St.dispatch("intervalEdited",h),s()},[a,j,s]);return t.initialized?e.jsx("div",{children:e.jsx(ss,{form:t,loading:j.loading,onClose:(h=!1)=>{t.leaveForm(()=>{},h)},onSubmit:g,prefixSubmitButton:e.jsx(ns,{style:{marginRight:"10px"}}),children:e.jsx(u,{children:e.jsxs(u,{children:[e.jsx(Ge,{...be(i,[]),model:"user",mapper:h=>{const C=h==null?void 0:h._source;return{label:C.fullname,value:C.id,id:C.id}}}),e.jsx(at,{...Qe(o)}),e.jsx(at,{...Qe(p)}),e.jsx(as,{...be(c,[]),onChange:(h,{data:C})=>{r({project:{value:h,data:{text:C.text}},task:{value:"",data:{text:""}}})}}),e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(u,{sx:{width:"calc(100% - 110px)"},children:e.jsx(Ge,{...be(x,[]),disabled:!c.value||x.disabled,query:h=>(It(h,"bool.must.term",{"projectId.keyword":c.value}),h),mapper:h=>{const C=h==null?void 0:h._source;return{label:C.title,value:C.id,id:C.id}},model:"Task"})}),e.jsx(u,{sx:{width:"110px",textAlign:"center"},children:e.jsx(rs,{...is(f)})})]}),e.jsx(os,{...ls(m)}),e.jsx(cs,{...be(d,[])})]})})})}):e.jsx("div",{})},ka={assignee:$("",{validations:{isRequired:!0},label:"Assignee",data:{placeholder:"Select assignee",type:ee.Dropdown}}),dateAndTimeStarted:$(null,{validations:{isRequired:!0,custom:[(t,s,n)=>{const{dateAndTimeEnded:a}=n,r=an(t,a.value);return{error:r,message:r?"Must be after Date and Time Ended.":""}}]},label:"Date and Time Started",data:{placeholder:"Select Started",type:ee.Datepicker}}),dateAndTimeEnded:$(null,{validations:{isRequired:!0,custom:[(t,s,n)=>{const{dateAndTimeStarted:a}=n,r=rn(t,a.value);return{error:r,message:r?"Must be after Date and Time Started.":""}}]},label:"Date and Time Ended",data:{placeholder:"Select Ended",type:ee.Datepicker}}),project:$("",{validations:{isRequired:!0},label:"Project",data:{placeholder:"Select project",type:ee.Dropdown}}),task:$("",{validations:{isRequired:!0},label:"Task",data:{placeholder:"Select task",type:ee.Dropdown}}),billable:$(!0,{validations:{isRequired:!0},label:"Billable",data:{placeholder:"Billable",type:ee.Checkbox}}),shortComment:$("",{label:"Short comment",data:{placeholder:"Type comment",type:ee.TextField}}),opportunity:$(!0,{label:"Opportunity",data:{placeholder:"Opportunity",type:ee.Dropdown}})},ba=async t=>{const{intervalId:s}=t;return await Ms({key:"getInterval",variables:{id:s}})};function va(){const{globalState:t={}}=Q.useContext(Ls),{authUser:s}=t,n=G("NEW_INTERVAL_FORM").on,[{isOpen:a,intervalId:r,stoppedAt:i,activeDate:o},p]=l.useState({isOpen:!1,intervalId:null,stoppedAt:null,activeDate:null}),c=gt({form:ka}),x=l.useCallback(()=>{p(m=>({...m,isOpen:!1}))},[]),f=ft({api:ba});return l.useEffect(()=>{const m=B.subscribe("intervalFormDialogOpen",async(g,h)=>{var C,k,L,M;if(n)if(h!=null&&h.intervalId){const v=await f.request({intervalId:h==null?void 0:h.intervalId});c.initializeForm({project:{value:v.forProjectId,data:{text:((C=v.forProject)==null?void 0:C.name)||""}},assignee:{value:v.userId,readonly:!0,data:{text:((k=v.user)==null?void 0:k.fullname)||""}},dateAndTimeStarted:{value:v.startedAt},dateAndTimeEnded:{value:v.stoppedAt},task:{value:v.taskId,data:{text:((L=v.task)==null?void 0:L.title)||""}},shortComment:{value:v.comment||""},opportunity:{value:v.opportunityId,data:{text:(M=v.opportunity)==null?void 0:M.name}},day:{value:Fe(v.startedAtMs)}},!0,{title:"Update Interval",submitButtonText:"Save Changes",id:(h==null?void 0:h.intervalId)||null})}else c.initializeForm({assignee:{value:s.id,readonly:!0,data:{text:s.fullname||"--"}}},!0,{title:"Create Interval",submitButtonText:"Create",id:null});else console.log(h),p({isOpen:!0,intervalId:(h==null?void 0:h.intervalId)||null,stoppedAt:h==null?void 0:h.stoppedAt,activeDate:h==null?void 0:h.activeDate})}),d=B.subscribe("intervalFormDialogClose",()=>{p(g=>({...g,isOpen:!1}))}),j=B.subscribe("intervalFormDialogToggle",()=>{p(g=>({...g,isOpen:!g.isOpen}))});return()=>{B.unsubscribe(m),B.unsubscribe(d),B.unsubscribe(j)}},[]),n?e.jsx(ya,{form:c,callback:()=>{c.leaveForm(()=>{},!0)}}):e.jsx(At,{open:a,onClose:x,disableBackdropClick:!0,children:e.jsx(Ca,{intervalId:r,stoppedAt:i,activeDate:o})})}const Sa=z(t=>({appBar:{backgroundColor:"#fff",color:"#000",zIndex:t.zIndex.drawer+10,boxShadow:"0px 10px 13px -6px rgba(0,0,0,0.05), 0px 20px 31px 3px rgba(0,0,0,0.04), 0px 8px 38px 7px rgba(0,0,0,0.03);","& .MuiIconButton-root":{color:t.palette.text.secondary}},flexVCenter:{display:"flex",alignItems:"center",paddingRight:"15px"},quickAddMenuContainer:{"& > button":{width:19}},toolbar:{display:"flex",justifyContent:"space-between",height:"70px"},brand:{color:"#052649",fontSize:"1.7rem",marginLeft:"10px"},dayTotalPrimary:{fontSize:"20px",fontWeight:"bold",marginRight:"3px",letterSpacing:"2px"},dayTotalSecondary:{fontSize:"16px"},userMenuBtn:{justifyContent:"flex-start"},bellIcon:{width:"20px",height:"20px"},loadingIndicator:{position:"absolute",left:0,top:0,width:"100%"},intWdgt:s=>s.isMobile?{width:"100%","& > div":{"& > div":{"& > div":{"& > a":{width:50,fontSize:10,marginRight:-100},"& > p":{paddingLeft:10,fontSize:10},"& > button":{},"& > #timer":{display:"none","& > p":{display:"none"}},"& > #task-code":{display:"none"}}}}}:{width:"100%",maxHeight:54,"& > div":{padding:10,backgroundColor:t.palette.background.paper,borderRadius:20}},backdrop:{zIndex:5}})),Ia=z({scrollPaper:{alignItems:"flex-start"},paper:{marginTop:"8px",padding:"10px",borderRadius:"28px",width:"473px"}}),Ta=z(t=>({root:{height:"40px",marginTop:"5px",borderColor:t.palette.success.light,borderWidth:"2px !important",color:t.palette.success.main,"&.MuiButton-outlined:hover":{backgroundColor:t.palette.success.light},"& svg":{marginLeft:"5px"}}}));function pt(){const t=Ta(),{currentInterval:s}=l.useContext(pe),n=Es(),a=s==null?void 0:s.taskId,[r]=ds(a,{fetchPolicy:"network-only",skip:!a}),[i]=us("task-setting"),{enqueueSnackbar:o}=Ve(),[p,{loading:c}]=ps({onCompleted:()=>{o("Task has been completed.",{variant:"info"})},onError:h=>{console.log(h),o("Failed to complete task.",{variant:"error"})}}),x=Q.useMemo(()=>Os(i==null?void 0:i.value,{}),[i==null?void 0:i.value]),f=Q.useMemo(()=>{const{completeTaskStatus:h}=x;return h},[x]),m=Q.useMemo(()=>{if(f)return[f.toLowerCase()].includes(r==null?void 0:r.status.toLowerCase())},[f,r==null?void 0:r.status]),d=Q.useCallback(async()=>{if(!(!a||(console.log({taskId:a}),!await n({options:{width:"400px"},content:C=>e.jsx(jn,{promptContext:C,task:r,status:f})})))){if(!f)return o('"Complete task status" is not set on task setting',{variant:"warning"});if(m)return o(`Task already in "${f}" status`,{variant:"warning"});await p({variables:{input:{id:a,status:f}}})}},[f,o,m,p,n,r,a]),j=Q.useMemo(()=>!a||c||m,[m,c,a]),g=Q.useMemo(()=>`Set task as "${f}"`,[f]);return e.jsx(w,{title:g,children:e.jsxs(N,{className:t.root,variant:"outlined",disabled:j,onClick:d,children:["Done",e.jsx(ms,{})]})})}function Aa(){return e.jsx(ue,{width:"20px",height:"20px",viewBox:"0 0 20 20",paths:["M8.44608 1.89661C8.5335 1.67105 8.67143 1.46137 8.85875 1.28537C9.50022 0.682668 10.4998 0.682668 11.1412 1.28537C11.329 1.46176 11.4671 1.67198 11.5545 1.8981C13.968 2.60292 15.8333 4.9507 15.8333 8.33334C15.8333 10.5205 16.2764 11.752 17.0961 12.6475C17.2993 12.8694 18.0133 13.5121 18.0934 13.5933L18.3333 13.8366V16.6784H13.2286C13.0201 17.4991 12.5062 18.2178 11.7398 18.6855C10.6715 19.3374 9.32844 19.3374 8.26016 18.6855C7.39173 18.1556 6.91152 17.5634 6.73997 16.6784H1.66666V13.8366L1.90663 13.5933C1.99337 13.5059 2.70319 12.869 2.90496 12.6495C3.72414 11.7582 4.16666 10.5283 4.16666 8.33334C4.16666 4.941 6.02945 2.59837 8.44608 1.89661ZM8.48217 16.6784C8.59991 16.8974 8.80058 17.0628 9.12834 17.2628C9.66355 17.5894 10.3364 17.5894 10.8716 17.2628C11.1195 17.1116 11.3131 16.9115 11.4473 16.6784H8.48217ZM16.6667 14.5433C16.418 14.3145 16.0422 13.9644 15.8668 13.7729C14.755 12.5583 14.1667 10.9232 14.1667 8.33334C14.1667 5.19275 12.2164 3.34366 9.99999 3.34366C7.7773 3.34366 5.83332 5.18326 5.83332 8.33334C5.83332 10.9315 5.24517 12.5662 4.13206 13.7773C3.95702 13.9677 3.58005 14.3176 3.33332 14.5437V15.0117H16.6667V14.5433Z"]})}var We={},wa=ye;Object.defineProperty(We,"__esModule",{value:!0});var zt=We.default=void 0,Ma=wa(je()),La=e;zt=We.default=(0,Ma.default)((0,La.jsx)("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12zM.41 13.41 6 19l1.41-1.41L1.83 12z"}),"DoneAll");const Ft=z(t=>({popper:{zIndex:9999},msgWrapper:{padding:20},header:{display:"flex",justifyContent:"space-between","& > span":{fontSize:"large"}},list:{width:300,"& .mb-notif-wrapper":{width:"100%"},"& .mb-notif":{padding:10,width:"100%"},"& .mb-notif-hdr":{display:"flex",justifyContent:"space-between",color:t.palette.secondary.dark},"& .mb-notif-ts":{fontSize:"smaller",color:"grey"},"& .mb-notif > div":{fontSize:"smaller"}}}));function Ea({size:t,classes:s}){const n=Ft(),[{isOpen:a,anchorEl:r,readingAll:i},o]=l.useState({isOpen:!1,anchorEl:null,readingAll:!1}),p=l.useCallback(async h=>{await ie.delay(50),o(C=>({...C,isOpen:!C.isOpen,anchorEl:h.target}))},[]),{globalState:{authUser:c}}=Y(),x=c==null?void 0:c.id,f=bt({key:"NOTIF_COUNT_Q",index:"notification",skip:!x,body:{size:0,query:{bool:{must_not:{exists:{field:"openedAt"}},must:[{term:{"toUserId.keyword":x}}]}}}}),m=l.useCallback(Bt(()=>{Ee({ids:["NOTIF_COUNT_Q","USER_NOTIFICATIONS_Q"]})},1500),[]),d=Ds();l.useEffect(()=>{if(!x)return;const h=te.graphql(se(`
          subscription ($userId: String) {
            onCreateNotification(recOwner: $userId) {
              id
            }
          }
        `,{userId:x})).subscribe({next:(...C)=>{console.log(">>NotificationMenu/index::","data",C),m()}});return()=>{h.unsubscribe()}},[m,x]);async function j(h){h.stopPropagation(),o(C=>({...C,readingAll:!0})),await d.mutate({mutation:ge`
        mutation {
          processBackground(type: "read-all-user-notif") {
            metadata
          }
        }
      `}),await ie.delay(6e3),m(),o(C=>({...C,readingAll:!1}))}const g=W(f,"result.hits.total",0);return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Notifications",children:e.jsx(R,{onClick:p,size:"large",children:e.jsx(Ct,{badgeContent:g,variant:t==="small"?"dot":"standard",color:"secondary",children:e.jsx(Aa,{className:s.bellIcon})})})}),e.jsx(Ie,{open:a,anchorEl:r,placement:"bottom",className:n.popper,children:e.jsx(Ae,{onClickAway:()=>{o(h=>({...h,isOpen:!1}))},children:e.jsxs(Te,{className:n.msgWrapper,children:[e.jsxs("div",{className:n.header,children:[e.jsxs("span",{children:["Notifications ",e.jsx(Bs,{label:g})]}),i?e.jsx(J,{height:"30px",marginTop:"-14px"}):e.jsx(w,{title:"Mark all as read",PopperProps:{style:{zIndex:9999}},children:e.jsx(N,{onClick:j,size:"small",children:e.jsx(zt,{})})})]}),e.jsx($e,{m:2,ml:0,mr:1}),e.jsx(Da,{userId:x,onNotificationClick:async h=>{const L=h.target.closest("a.MuiButton-root").getAttribute("name");o(M=>({...M,isOpen:!1})),L&&(await d.mutate({mutation:ge`
                      mutation ($id: ID!, $open: AWSDateTime) {
                        updateNotification(input: { id: $id, openedAt: $open }) {
                          id
                          openedAt
                        }
                      }
                    `,variables:{id:L,open:new Date}}),await ie.delay(1e3),Ee({ids:["NOTIF_COUNT_Q","USER_NOTIFICATIONS_Q"]}))}}),e.jsx($e,{mt:2,mb:2}),e.jsx("center",{children:e.jsx(N,{component:le,onClick:()=>{o(h=>({...h,isOpen:!1}))},to:"/notification",size:"small",children:e.jsx("strong",{children:"Show All Notifications"})})})]})})})]})}function Oa({userId:t,filter:s={}}){return X(ge`
      query USER_NOTIFICATIONS_Q(
        $filter: SearchableNotificationFilterInput
        $nextToken: String
        $limit: Int
      ) {
        list: searchNotifications(
          filter: $filter
          nextToken: $nextToken
          limit: $limit
          sort: { field: createdAt, direction: desc }
        ) {
          nextToken
          items {
            id
            subject
            message
            link
            createdAt
            openedAt
          }
        }
      }
    `,{skip:!t,variables:{limit:5,filter:{toUserId:{eq:t},openedAt:{exists:!1},...s}},fetchPolicy:"network-only",nextFetchPolicy:"cache-first"})}function Da({userId:t,onNotificationClick:s}){const n=Ft(),a=Oa({userId:t}),r=W(a,"data.list.items",[]);return e.jsx("div",{className:n.list,children:a.loading?e.jsx(J,{}):e.jsx(e.Fragment,{children:r.map(i=>i.openedAt?null:e.jsx(Ba,{notification:i,onClick:s},i.id))})})}function Ba({notification:t,onClick:s}){const n={};t.link&&(n.component=le,n.to=t.link);const a=t.createdAt&&Rs(new Date(t.createdAt),new Date,{addSuffix:!0});return e.jsx(hs,{...n,className:"mb-notif-wrapper",name:t.id,onClick:s,children:e.jsxs("div",{className:"mb-notif",children:[e.jsxs("span",{className:"mb-notif-hdr",children:[e.jsx("span",{children:t.subject}),e.jsx("span",{className:"mb-notif-ts",children:(a||"").replace("about","").replace("less than","")})]}),e.jsx("div",{children:t.message})]})})}function Ra(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23ZM12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM13 11H17V13H13V17H11V13H7V11H11V7H13V11Z"})}),t.gradient&&H(t.gradient)]})}const Na=l.lazy(async()=>ke(()=>import("./CreateRecordDialog-b1f1b159.js"),["./CreateRecordDialog-b1f1b159.js","./TransitionGroupContext-9d36972e.js","./index-f1f749bf.js","./_commonjsHelpers-042e6b4d.js","./assertThisInitialized-ad1db8e7.js","./papaparse.min-b66e70e7.js","./_arrayIncludes-2cfb33ae.js","./_baseForOwn-9b89c4b6.js","./index-bcfaa842.js","./index-96c5f47c.js","./isNativeReflectConstruct-05c29d01.js","./Button-352c3435.js","./isPlainObject-07477f89.js","./debounce-213cd46f.js","./iframe-ed7f5a3f.js","./index-4d501b15.js","./papaparse-cdbe7e6d.css"],import.meta.url)),Va=l.lazy(async()=>ke(()=>import("./QuickAddList-6558e378.js"),["./QuickAddList-6558e378.js","./TransitionGroupContext-9d36972e.js","./index-f1f749bf.js","./_commonjsHelpers-042e6b4d.js","./assertThisInitialized-ad1db8e7.js","./Play-87fed129.js","./papaparse.min-b66e70e7.js","./_arrayIncludes-2cfb33ae.js","./_baseForOwn-9b89c4b6.js","./index-bcfaa842.js","./index-96c5f47c.js","./isNativeReflectConstruct-05c29d01.js","./Button-352c3435.js","./isPlainObject-07477f89.js","./debounce-213cd46f.js","./iframe-ed7f5a3f.js","./index-4d501b15.js","./papaparse-cdbe7e6d.css","./react-router-19e5b27c.js","./tiny-invariant-dd7d57d2.js","./filter-f99df4e5.js","./LocalizationProvider-a287304f.js","./react-router-dom-60ea8218.js","./uniq-0d482d7b.js","./cloneDeep-91467704.js"],import.meta.url)),Pa=z(t=>({list:{padding:t.spacing(2),"& > div":{borderRadius:8},"& .MuiListItemIcon-root":{minWidth:45}}}));function za(){const t=G("NEW_TASK_FORM").on,[s,n]=l.useState({opened:!1,anchorEl:null,loading:!1}),a=gt({form:fs}),[{_qa:r},i]=Ns({_qa:Vs}),o=Pa(),p=X(Ps,{notifyOnNetworkStatusChange:!0,fetchPolicy:"network-only",nextFetchPolicy:"cache-first"}),c=l.useCallback(()=>{i({_qa:void 0})},[i]),x=l.useCallback(d=>{n(j=>({...j,loading:d}))},[]),f=l.useCallback(()=>{n(d=>({...d,opened:!1,anchorEl:null}))},[]),m=l.useCallback((d,j)=>{j==="Task"&&t?a.initializeForm({project:null},!0,{title:"ADD TASK",submitButtonText:"Create Task",action:"CREATE"}):i({_qa:j}),f()},[a,f,i,t]);return e.jsxs(e.Fragment,{children:[e.jsx(xs,{form:a,callback:()=>{p.refetch()}}),e.jsx(w,{title:"New Record",children:e.jsx(N,{variant:"contained",color:"primary",disabled:s.loading,onClick:async d=>{const j=d.currentTarget;await ie.delay(50),n(g=>({...g,opened:!0,anchorEl:j}))},children:e.jsxs(u,{sx:{display:"flex",alignItems:"center",py:.1},children:[e.jsx(Ra,{fontSize:"small",sx:{mr:1.5}}),e.jsx(I,{variant:"subtitle2",sx:{fontWeight:"bold",fontSize:13,letterSpacing:1.25},children:"NEW RECORD"})]})})}),e.jsx(Ie,{open:s.opened,anchorEl:s.anchorEl,placement:"bottom-start",sx:{zIndex:9999,pt:3},children:e.jsx(Ae,{onClickAway:f,children:e.jsx(Te,{sx:{width:250},className:"quick-add-menu-container",children:e.jsx(l.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(Va,{className:o.list,onClick:m})})})})}),r&&e.jsx(l.Suspense,{fallback:e.jsx(Fa,{onMountChange:x}),children:e.jsx(Na,{onClose:c,tabValue:r})})]})}function Fa({onMountChange:t}){return l.useEffect(()=>(t(!0),()=>{t(!1)}),[t]),e.jsx(l.Fragment,{})}var _e={},Ha=ye;Object.defineProperty(_e,"__esModule",{value:!0});var Ht=_e.default=void 0,Za=Ha(je()),Ka=e;Ht=_e.default=(0,Za.default)((0,Ka.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline");var qe={},Wa=ye;Object.defineProperty(qe,"__esModule",{value:!0});var Zt=qe.default=void 0,_a=Wa(je()),qa=e;Zt=qe.default=(0,_a.default)((0,qa.jsx)("path",{d:"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12z"}),"Backspace");function Ua({onSubmit:t,loading:s}){const[n,a]=l.useState(),r=p=>{a(p.target.value)},i=p=>{p.preventDefault(),n&&t(n)},o=()=>{a(""),t("")};return e.jsxs("form",{style:{display:"flex",alignItems:"center"},onSubmit:i,children:[e.jsx(oe,{variant:"outlined",size:"small",value:n,onChange:r,style:{flex:1},disabled:s,InputProps:{endAdornment:n&&e.jsx(zs,{position:"end",children:e.jsx(R,{size:"small",onClick:o,children:e.jsx(Zt,{fontSize:"small"})})})}}),e.jsx(R,{color:"primary",type:"submit",disabled:s,size:"large",children:e.jsx(Fs,{})})]})}const Ga="https://www.notion.so/moretonblue/d21b9e4921684f1a853620d177d9ccdb?v=46ba3b32f16e482097ad2f36eaa8e486",Qa="https://steamuserimages-a.akamaihd.net/ugc/90478827543126518/9D9560F89BB9152F2B65CF5BFB9406BEAEDF603E/",Ya=z({list:{maxHeight:300,overflowY:"auto","& > .MuiListItem-button":{display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",textOverflow:"ellipsis",color:"#4987f9"},"& .MuiListItemIcon-root":{minWidth:"40px",color:"#FA126C"}},empty:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}});function Ja({results:t=[]}){const s=Ya();return e.jsxs(wt,{className:s.list,children:[t.length===0&&e.jsxs(u,{className:s.empty,children:[e.jsx("img",{width:100,height:100,src:Qa}),e.jsx(I,{children:"No helpful links."}),e.jsxs(Mt,{href:Ga,target:"_blank",rel:"noreferrer noopener",style:{fontSize:11,marginTop:-4},color:"secondary",children:[e.jsx(et,{style:{fontSize:9}}),"Take me to the knowledgebase"]})]}),t==null?void 0:t.map((n,a)=>e.jsxs(Lt,{href:n.link,target:"_blank",rel:"noreferrer noopener",component:"a",button:!0,children:[e.jsx(jt,{children:e.jsx(et,{fontSize:"small"})}),e.jsx(Et,{primary:e.jsx(w,{title:n.label,enterDelay:1e3,children:e.jsx(I,{style:{overflow:"hidden",textOverflow:"ellipsis"},children:n.label})})})]},a))]})}function Xa(){const t=we(),[s,n]=l.useState([]),[a,r]=l.useState(!1),[i,{data:o,loading:p}]=Hs(me`
      query ($body: AWSJSON) {
        knowledgeBaseQuery(type: "notion-search", body: $body)
      }
    `);return l.useEffect(()=>{a||i({variables:{body:JSON.stringify({searchQuery:"",embraceUrl:window.location.href})}})},[i,a,t]),l.useEffect(()=>{const x=JSON.parse((o==null?void 0:o.knowledgeBaseQuery)||"{}");if(x){const f=x==null?void 0:x.blocks;if(f&&f.length>0){const m=[];f.map(d=>{const j=W(d,"value.properties.title[0][0]",""),g=`https://www.notion.so/${W(d,"value.id").replace(/-/g,"")}`;m.push({label:j,link:g})}),n(m)}else n([])}},[o]),{search:x=>{x?(r(!0),i({variables:{body:JSON.stringify({searchQuery:x,embraceUrl:""})}})):r(!1)},results:s,loading:p}}const $a=z({root:{padding:10,display:"flex",flexDirection:"column",width:400}});function er(t){const s=$a(),{search:n,results:a,loading:r}=Xa();return e.jsx(Zs,{anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...t,children:e.jsxs(u,{className:s.root,children:[e.jsx(Ua,{onSubmit:n,loading:r}),!r&&e.jsx(I,{variant:"overline",style:{fontSize:10},children:`${a.length} article${a.length!==1?"s":""}`}),r?e.jsx(J,{}):e.jsx(Ja,{results:a})]})})}function tr(){const[t,s]=l.useState(null),n=a=>{s(r=>r?null:a.currentTarget)};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Search knowledgebase",children:e.jsx(R,{onClick:n,size:"large",children:e.jsx(Ht,{style:{fontSize:28}})})}),!!t&&e.jsx(er,{open:!!t,anchorEl:t,onClose:()=>s(null)})]})}const sr=z(t=>({results:({compact:s})=>({maxHeight:s?"450px":"inherit",overflowY:"auto","& .tui-editor-contents p":{color:t.palette.text.secondary},"& .tui-editor-contents em":{color:"white",backgroundColor:t.palette.info.light,padding:"0 3px",fontStyle:"normal"},"& > div":{backgroundColor:t.palette.background.paper,padding:"10px",marginTop:"10px",display:s?"block":"flex",justifyContent:"space-between",borderBottom:s?"solid 1px #eaeaea":"inherit"},"& > div:hover":{backgroundColor:"#eaf5ff"},"& > div > div.lbl":{width:"250px"},"& > div > div.hl":{flex:1,marginLeft:s?0:"10px",marginTop:s?"10px":0}})}));function nr({results:t,compact:s}){const n=sr({compact:s});return e.jsx("div",{className:n.results,children:t.map(a=>e.jsx(ar,{result:a},a._id))})}function ar({result:t}){console.log(">>TextSearch/ResultList::","result",t);const s=t._source,n=[];for(const a in t.highlight||{})a.endsWith(".keyword")||n.push(e.jsx(Ks,{text:Ws(a),children:e.jsx(_s.Viewer,{usageStatistics:!1,initialValue:t.highlight[a].join(" ... ")})}));return s?e.jsxs("div",{children:[e.jsx("div",{className:"lbl",children:e.jsx(ht,{modelName:s.__typename,modelData:s})}),e.jsx("div",{className:"hl",children:n})]}):null}async function rr(t){const{search:s}=t,n=[],a=qs();for(const x in{})a.MODELS[x].labelComponent&&n.push(x.toLowerCase());const r=n.join(","),i=x=>`${x}-*`,o=["project","company"].map(x=>({[i(x)]:2})),p=await Us({index:r,body:{size:10,query:{query_string:{default_field:"*.keyword",query:`*${s}*`}},highlight:{fields:{"*.keyword":{}}},indices_boost:[...o,{"*":1}]}});return W(p,"hits.hits",[])}function ir(t){const{compact:s}=t,n=l.useRef(null),[a,r]=l.useState({search:""}),{search:i}=a,o=l.useCallback(Bt(d=>{r(j=>({...j,search:d}))},500),[]);l.useLayoutEffect(()=>{ie.delay(500).then(()=>{n.current&&n.current.focus()})},[]);const p=Gs({queryKey:["GLOBAL_SEARCH_Q",i],queryFn:()=>i?rr({search:i}):[]}),c=p.data,x=["Project","Company","Contacts","Opportunity","Activity","Task"],f=Qs(c,d=>{var j,g;return console.log({type:(j=d==null?void 0:d._source)==null?void 0:j.__typename}),x.indexOf((g=d==null?void 0:d._source)==null?void 0:g.__typename)}),m=d=>{o(d.target.value)};return e.jsxs("div",{children:[e.jsx(u,{sx:{display:"flex",justifyContent:"start",flexFlow:"wrap"},children:e.jsx(Ys,{flex:1,children:e.jsx(Js,{placeholder:"Search...",textFieldProps:{label:"Search",inputRef:n},onChange:m})})}),p.isLoading?e.jsx(J,{}):e.jsx(l.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(nr,{results:f,compact:s})})]})}const or=z(()=>({popper:{zIndex:9999},menu:{width:450,padding:"10px"}}));function lr(){const[t,s]=l.useState({opened:!1,anchorEl:null}),n=or(),{key:a}=we();return l.useEffect(()=>{console.log(">>GlobalSearchMenu/index::","locationKey",a),s(r=>({...r,opened:!1,anchorEl:null}))},[a]),e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Search...",children:e.jsx(R,{size:"medium",onClick:async r=>{const i=r.currentTarget;await ie.delay(50),s(o=>({...o,opened:!0,anchorEl:i}))},children:t.loading?e.jsx(ce,{size:24}):e.jsx(yn,{})})}),e.jsx(Ie,{open:t.opened,anchorEl:t.anchorEl,placement:"bottom",className:n.popper,children:e.jsx(Ae,{onClickAway:()=>{s(r=>({...r,opened:!1,anchorEl:null}))},children:e.jsx(Te,{className:n.menu,children:e.jsx(l.Suspense,{fallback:e.jsx(J,{}),children:e.jsx(ir,{compact:!0})})})})})]})}const mt="mb-release-last-check-date",cr=z({root:{"& span.MuiBadge-badge":{cursor:"pointer",right:"-7px",top:"-16px"}}});function Kt(t){var p,c;const[s,n]=l.useState({lastCheckDate:Number(localStorage.getItem(mt)||0)}),a=cr(),r=X(me`
    {
      releaseNotesQuery(type: "release")
    }
  `),i=JSON.parse(((p=r.data)==null?void 0:p.releaseNotesQuery)||"null");let o=!0;return i&&(o=s.lastCheckDate>=((c=i==null?void 0:i.block)==null?void 0:c.last_edited_time)),e.jsx(Ct,{className:a.root,onClick:()=>{window.open(i.url,"_blank");const x=Math.floor(Date.now()/1e4)*1e4;localStorage.setItem(mt,`${x}`),n(f=>({...f,lastCheckDate:x}))},badgeContent:o?null:e.jsx(w,{title:"View release notes",placement:"right",children:e.jsx("span",{children:"!"})}),color:"secondary",children:t.children})}function dr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsxs("g",{fill:s?"url(#linear)":"inherit",children:[e.jsx("path",{d:"M4.875 7.49999C4.35582 7.49999 3.84831 7.34604 3.41663 7.0576C2.98495 6.76916 2.6485 6.3592 2.44982 5.87954C2.25114 5.39988 2.19915 4.87209 2.30044 4.36289C2.40173 3.85369 2.65173 3.38596 3.01885 3.01885C3.38596 2.65173 3.85369 2.40173 4.36289 2.30044C4.87209 2.19915 5.39988 2.25114 5.87954 2.44982C6.3592 2.6485 6.76916 2.98495 7.0576 3.41663C7.34604 3.84831 7.49999 4.35582 7.49999 4.875C7.49925 5.57096 7.22245 6.23821 6.73033 6.73033C6.23821 7.22245 5.57096 7.49925 4.875 7.49999Z"}),e.jsx("path",{d:"M12 7.49999C11.4808 7.49999 10.9733 7.34604 10.5416 7.0576C10.11 6.76916 9.7735 6.3592 9.57482 5.87954C9.37614 5.39988 9.32415 4.87209 9.42544 4.36289C9.52673 3.85369 9.77673 3.38596 10.1438 3.01885C10.511 2.65173 10.9787 2.40173 11.4879 2.30044C11.9971 2.19915 12.5249 2.25114 13.0045 2.44982C13.4842 2.6485 13.8942 2.98495 14.1826 3.41663C14.471 3.84831 14.625 4.35582 14.625 4.875C14.6243 5.57096 14.3475 6.23821 13.8553 6.73033C13.3632 7.22245 12.696 7.49925 12 7.49999Z"}),e.jsx("path",{d:"M19.125 7.49999C18.6058 7.49999 18.0983 7.34604 17.6666 7.0576C17.2349 6.76916 16.8985 6.3592 16.6998 5.87954C16.5011 5.39988 16.4492 4.87209 16.5504 4.36289C16.6517 3.85369 16.9017 3.38596 17.2688 3.01885C17.636 2.65173 18.1037 2.40173 18.6129 2.30044C19.1221 2.19915 19.6499 2.25114 20.1295 2.44982C20.6092 2.6485 21.0192 2.98495 21.3076 3.41663C21.596 3.84831 21.75 4.35582 21.75 4.875C21.7492 5.57096 21.4724 6.23821 20.9803 6.73033C20.4882 7.22245 19.821 7.49925 19.125 7.49999Z"}),e.jsx("path",{d:"M4.875 14.625C4.35582 14.625 3.84831 14.471 3.41663 14.1826C2.98495 13.8942 2.6485 13.4842 2.44982 13.0045C2.25114 12.5249 2.19915 11.9971 2.30044 11.4879C2.40173 10.9787 2.65173 10.511 3.01885 10.1438C3.38596 9.77673 3.85369 9.52673 4.36289 9.42544C4.87209 9.32415 5.39988 9.37614 5.87954 9.57482C6.3592 9.7735 6.76916 10.11 7.0576 10.5416C7.34604 10.9733 7.49999 11.4808 7.49999 12C7.49925 12.696 7.22245 13.3632 6.73033 13.8553C6.23821 14.3475 5.57096 14.6243 4.875 14.625Z"}),e.jsx("path",{d:"M12 14.625C11.4808 14.625 10.9733 14.471 10.5416 14.1826C10.11 13.8942 9.7735 13.4842 9.57482 13.0045C9.37614 12.5249 9.32415 11.9971 9.42544 11.4879C9.52673 10.9787 9.77673 10.511 10.1438 10.1438C10.511 9.77673 10.9787 9.52673 11.4879 9.42544C11.9971 9.32415 12.5249 9.37614 13.0045 9.57482C13.4842 9.7735 13.8942 10.11 14.1826 10.5416C14.471 10.9733 14.625 11.4808 14.625 12C14.6243 12.696 14.3475 13.3632 13.8553 13.8553C13.3632 14.3475 12.696 14.6243 12 14.625Z"}),e.jsx("path",{d:"M19.125 14.625C18.6058 14.625 18.0983 14.471 17.6666 14.1826C17.2349 13.8942 16.8985 13.4842 16.6998 13.0045C16.5011 12.5249 16.4492 11.9971 16.5504 11.4879C16.6517 10.9787 16.9017 10.511 17.2688 10.1438C17.636 9.77673 18.1037 9.52673 18.6129 9.42544C19.1221 9.32415 19.6499 9.37614 20.1295 9.57482C20.6092 9.7735 21.0192 10.11 21.3076 10.5416C21.596 10.9733 21.75 11.4808 21.75 12C21.7492 12.696 21.4724 13.3632 20.9803 13.8553C20.4882 14.3475 19.821 14.6243 19.125 14.625Z"}),e.jsx("path",{d:"M4.875 21.75C4.35582 21.75 3.84831 21.596 3.41663 21.3076C2.98495 21.0192 2.6485 20.6092 2.44982 20.1295C2.25114 19.6499 2.19915 19.1221 2.30044 18.6129C2.40173 18.1037 2.65173 17.636 3.01885 17.2688C3.38596 16.9017 3.85369 16.6517 4.36289 16.5504C4.87209 16.4492 5.39988 16.5011 5.87954 16.6998C6.3592 16.8985 6.76916 17.2349 7.0576 17.6666C7.34604 18.0983 7.49999 18.6058 7.49999 19.125C7.49925 19.821 7.22245 20.4882 6.73033 20.9803C6.23821 21.4724 5.57096 21.7492 4.875 21.75Z"}),e.jsx("path",{d:"M12 21.75C11.4808 21.75 10.9733 21.596 10.5416 21.3076C10.11 21.0192 9.7735 20.6092 9.57482 20.1295C9.37614 19.6499 9.32415 19.1221 9.42544 18.6129C9.52673 18.1037 9.77673 17.636 10.1438 17.2688C10.511 16.9017 10.9787 16.6517 11.4879 16.5504C11.9971 16.4492 12.5249 16.5011 13.0045 16.6998C13.4842 16.8985 13.8942 17.2349 14.1826 17.6666C14.471 18.0983 14.625 18.6058 14.625 19.125C14.6243 19.821 14.3475 20.4882 13.8553 20.9803C13.3632 21.4724 12.696 21.7492 12 21.75Z"}),e.jsx("path",{d:"M19.125 21.75C18.6058 21.75 18.0983 21.596 17.6666 21.3076C17.2349 21.0192 16.8985 20.6092 16.6998 20.1295C16.5011 19.6499 16.4492 19.1221 16.5504 18.6129C16.6517 18.1037 16.9017 17.636 17.2688 17.2688C17.636 16.9017 18.1037 16.6517 18.6129 16.5504C19.1221 16.4492 19.6499 16.5011 20.1295 16.6998C20.6092 16.8985 21.0192 17.2349 21.3076 17.6666C21.596 18.0983 21.75 18.6058 21.75 19.125C21.7492 19.821 21.4724 20.4882 20.9803 20.9803C20.4882 21.4724 19.821 21.7492 19.125 21.75Z"})]}),t.gradient&&H(t.gradient)]})}function ur(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M15 13H20C21.1046 13 22 13.8954 22 15V20C22 21.1046 21.1046 22 20 22H15C13.8954 22 13 21.1046 13 20V15C13 13.8954 13.8954 13 15 13ZM15 15V20H20V15H15ZM11 4V20C11 21.1046 10.1046 22 9 22H4C2.89543 22 2 21.1046 2 20V4C2 2.89543 2.89543 2 4 2H9C10.1046 2 11 2.89543 11 4ZM9 4H4V20H9V4ZM15 2H20C21.1046 2 22 2.89543 22 4V9C22 10.1046 21.1046 11 20 11H15C13.8954 11 13 10.1046 13 9V4C13 2.89543 13.8954 2 15 2ZM15 4V9H20V4H15Z"})}),t.gradient&&H(t.gradient)]})}function pr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M13.07 10.41A5 5 0 0 0 13.07 4.59A3.39 3.39 0 0 1 15 4A3.5 3.5 0 0 1 15 11A3.39 3.39 0 0 1 13.07 10.41M5.5 7.5A3.5 3.5 0 1 1 9 11A3.5 3.5 0 0 1 5.5 7.5M7.5 7.5A1.5 1.5 0 1 0 9 6A1.5 1.5 0 0 0 7.5 7.5M16 17V19H2V17S2 13 9 13 16 17 16 17M14 17C13.86 16.22 12.67 15 9 15S4.07 16.31 4 17M15.95 13A5.32 5.32 0 0 1 18 17V19H22V17S22 13.37 15.94 13Z"})}),t.gradient&&H(t.gradient)]})}function mr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M11 22H9C7.89543 22 7 21.1046 7 20H3V14.5L7 11.5V8C7 4.84392 8.91356 1 12 1C15.0864 1 17 4.84392 17 8V11.5L21 14.5V20H17C17 21.1046 16.1046 22 15 22H13V23H11V22ZM13 20H15V10V8C15 5.80724 13.6025 3 12 3C10.3975 3 9 5.80724 9 8V10V20H11V14H13V20ZM7 14L5 15.5V18H7V14ZM17 14V18H19V15.5L17 14ZM12 11C10.8954 11 10 10.1046 10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9C14 10.1046 13.1046 11 12 11Z"})}),t.gradient&&H(t.gradient)]})}function hr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M5.11409 6H8V8H2V1.99121H4V4.25645C6.23708 1.91056 8.78663 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23C5.92487 23 1 18.0751 1 12H3C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C9.15921 3 7.04466 3.79137 5.11409 6ZM13 11H17V13H11V6H13V11Z"})}),t.gradient&&H(t.gradient)]})}function xr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M23 19C23 20.1046 22.1046 21 21 21H9C7.89543 21 7 20.1046 7 19V5C7 3.89543 7.89543 3 9 3H21C22.1046 3 23 3.89543 23 5V19ZM6 20C4.89543 20 4 19.1046 4 18V6C4 4.89543 4.89543 4 6 4V20ZM3 19C1.89543 19 1 18.1046 1 17V7C1 5.89543 1.89543 5 3 5V19ZM21 19V5H9V19H21ZM13 9L17 12L13 15V9Z"})}),t.gradient&&H(t.gradient)]})}function fr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 18.0751 18.0751 23 12 23ZM12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21ZM7.5817 17.9386L8.42552 13.0187L4.85104 9.53448L9.79085 8.81668L12 4.34045L14.2092 8.81668L19.149 9.53448L15.5745 13.0187L16.4183 17.9386L12 15.6157L7.5817 17.9386ZM12 13.3562L13.762 14.2826L13.4255 12.3205L14.851 10.931L12.881 10.6447L12 8.85956L11.119 10.6447L9.14896 10.931L10.5745 12.3205L10.238 14.2826L12 13.3562Z"})}),t.gradient&&H(t.gradient)]})}function gr(t){return e.jsxs(F,{...t,viewBox:"0 0 15 15",children:[e.jsx("g",{fill:t.gradient?"url(#linear)":"inherit",children:e.jsx("path",{d:"M 14.996094 3.699219 C 14.980469 3.539062 14.878906 3.394531 14.730469 3.324219 L 7.699219 0.0429688 C 7.574219 -0.015625 7.425781 -0.015625 7.300781 0.0429688 L 0.269531 3.324219 C 0.121094 3.394531 0.0195312 3.539062 0.00390625 3.699219 C 0.00390625 3.703125 0 3.746094 0 3.75 L 0 11.71875 C 0 11.910156 0.117188 12.082031 0.292969 12.152344 L 7.324219 14.964844 C 7.382812 14.988281 7.441406 15 7.5 15 C 7.558594 15 7.617188 14.988281 7.675781 14.964844 L 14.707031 12.152344 C 14.882812 12.082031 15 11.910156 15 11.71875 L 15 3.75 C 15 3.746094 14.996094 3.703125 14.996094 3.699219 Z M 7.5 0.984375 L 13.351562 3.71875 L 11.097656 4.617188 L 5.136719 2.089844 Z M 3.992188 2.621094 L 9.863281 5.113281 L 7.5 6.058594 L 1.648438 3.71875 Z M 0.9375 4.441406 L 7.03125 6.878906 L 7.03125 13.839844 L 0.9375 11.402344 Z M 7.96875 13.839844 L 7.96875 6.878906 L 14.0625 4.441406 L 14.0625 11.402344 Z M 7.96875 13.839844 "})}),t.gradient&&H(t.gradient)]})}function Cr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M9 14H21V11H9V14ZM7 14V11H3V14H7ZM9 6V9H21V6H9ZM7 6H3V9H7V6ZM9 19H21V16H9V19ZM7 19V16H3V19H7ZM3 4H21C22.1046 4 23 4.89543 23 6V19C23 20.1046 22.1046 21 21 21H3C1.89543 21 1 20.1046 1 19V6C1 4.89543 1.89543 4 3 4Z"})}),t.gradient&&H(t.gradient)]})}function jr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M20.8733 18.6798L18.6562 20.897L15.8183 20.1065L15.0067 20.4412L13.5498 22.999H10.4153L8.96644 20.4325L8.15567 20.0925L5.31809 20.8733L3.10197 18.6572L3.89252 15.8193L3.55774 15.0076L1 13.5496V10.4151L3.56758 8.96634L3.90748 8.15567L3.1267 5.31809L5.34198 3.10281L8.17985 3.89446L8.99072 3.56004L10.4454 1H13.5808L15.0296 3.56758L15.8403 3.90748L18.6774 3.12683L20.8961 5.34235L20.1055 8.18067L20.44 8.99173L23 10.4464V13.5818L20.4327 15.0305L20.0925 15.843L20.8733 18.6798ZM17.9809 15.7078L18.8527 13.6256L21 12.4139V11.6103L18.8534 10.3906L17.9941 8.30696L18.6558 5.93166L18.087 5.36362L15.7044 6.0192L13.6245 5.1471L12.4129 3H11.6093L10.3895 5.14655L8.30576 6.00595L5.93001 5.34321L5.36375 5.90947L6.0192 8.29155L5.1471 10.3715L3 11.583V12.3876L5.14482 13.6101L6.00385 15.693L5.34203 18.0688L5.90947 18.6362L8.29155 17.9808L10.3714 18.8529L11.5829 20.999H12.3873L13.609 18.8542L15.692 17.9951L18.0678 18.657L18.6362 18.0886L17.9809 15.7078ZM12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12C16 14.2091 14.2091 16 12 16ZM12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14Z"})}),t.gradient&&H(t.gradient)]})}function yr(t){const s=t.gradient&&!t.gradient.disabled;return e.jsxs(F,{...t,children:[e.jsx("g",{fill:s?"url(#linear)":"inherit",children:e.jsx("path",{d:"M16.3199 14.9056L21.7071 20.2929L20.2929 21.7071L14.9056 16.3199C13.551 17.3729 11.8487 18 10 18C5.58172 18 2 14.4183 2 10C2 5.58172 5.58172 2 10 2C14.4183 2 18 5.58172 18 10C18 11.8487 17.3729 13.551 16.3199 14.9056ZM10 16C13.3137 16 16 13.3137 16 10C16 6.68629 13.3137 4 10 4C6.68629 4 4 6.68629 4 10C4 13.3137 6.68629 16 10 16Z"})}),t.gradient&&H(t.gradient)]})}function kr({to:t,icon:s,label:n,disabled:a},r){const i=ze(),o=s;return e.jsx(w,{title:n.value,sx:{zIndex:"tooltip"},children:e.jsx(N,{ref:r,component:le,to:t,variant:"text",sx:{p:1,flex:"33%",flexGrow:0,display:"block",height:"72px",borderRadius:"6px","& p":{whiteSpace:"nowrap",color:i.palette.primary.main},"&.Mui-disabled":{}},disabled:a,children:e.jsxs(u,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[e.jsx(o,{gradient:!0,sx:{width:"25px",height:"25px"}}),e.jsx(u,{mt:1,children:e.jsx(I,{sx:{...n.sx},children:n.value})})]})})})}const br=l.forwardRef(kr),vr={container:{display:"flex",justifyContent:"center",alignItems:"center"},popper:{zIndex:"1300"}},Sr=z(vr);function Wt({Button:t,children:s,placement:n="bottom-end"}){const{pathname:a}=we(),[r,i]=l.useState(!1),o=Sr(),p=l.useRef(),c=l.useCallback(async()=>{await ie.delay(50),i(f=>!f)},[]),x=l.useCallback(()=>{i(!1)},[]);return l.useEffect(()=>{x()},[a]),e.jsxs(e.Fragment,{children:[e.jsx(u,{children:e.jsx(u,{className:o.container,ref:p,children:t(c)})}),e.jsx(Ie,{open:r,anchorEl:p.current,placement:n,className:o.popper,children:e.jsx(Ae,{onClickAway:x,children:e.jsx(Te,{children:s})})})]})}const Ir=l.lazy(()=>ke(()=>import("./DevMenuItems-6440b5f2.js"),["./DevMenuItems-6440b5f2.js","./TransitionGroupContext-9d36972e.js","./index-f1f749bf.js","./_commonjsHelpers-042e6b4d.js","./assertThisInitialized-ad1db8e7.js","./Play-87fed129.js","./papaparse.min-b66e70e7.js","./_arrayIncludes-2cfb33ae.js","./_baseForOwn-9b89c4b6.js","./index-bcfaa842.js","./index-96c5f47c.js","./isNativeReflectConstruct-05c29d01.js","./Button-352c3435.js","./isPlainObject-07477f89.js","./debounce-213cd46f.js","./iframe-ed7f5a3f.js","./index-4d501b15.js","./papaparse-cdbe7e6d.css","./react-router-19e5b27c.js","./tiny-invariant-dd7d57d2.js","./filter-f99df4e5.js","./LocalizationProvider-a287304f.js","./react-router-dom-60ea8218.js","./uniq-0d482d7b.js","./cloneDeep-91467704.js","./hotkeys-a6c2398e.js","./Stop-d43309a7.js","./Error-a5d563f0.js","./ProjectSelect-6c06b3ef.js","./Save-1bca3c1a.js","./index-5757e0d6.js","./TaskStatusPrompt-5fa87980.js","./SearchIcon-482ff285.js","./Cup-50456763.js","./auth-5b6b0f80.js"],import.meta.url)),Tr=[{to:"/",label:{value:"Dashboard"},icon:ur},{to:"/sales",label:{value:"Sales"},icon:Ye},{to:"/crm",label:{value:"CRM"},icon:kn},{to:"/crm/contacts",label:{value:"Contacts"},icon:pr},{to:"/project",label:{value:"Projects"},icon:mr},{to:"/timesheets",label:{value:"Time Sheets"},icon:hr},{to:"/member/list/active",label:{value:"Team Members",sx:{fontSize:14}},icon:bn},{to:"/task",label:{value:"Tasks"},icon:xr},{to:"/my-work",label:{value:"My Work"},icon:fr},{to:"/scheduler",label:{value:"Scheduler"},icon:gs},{to:"/inventory",label:{value:"Inventory"},icon:gr},{to:"/expense",label:{value:"Expenses"},icon:Ye},{to:"/reports",label:{value:"Reports"},icon:Cs},{to:"/record-audit-logs",label:{value:"Logs"},icon:Cr},{to:"/settings/setup",label:{value:"Settings"},icon:jr,disabled:!Rt.isAdmin()},{to:"/search",label:{value:"Search"},icon:yr}];function Ar(){const t=ze(),s=l.useCallback(n=>e.jsx(w,{title:"Module Menu",children:e.jsx(R,{sx:{color:`${t.palette.primary.dark}`},onClick:n,size:"large",children:e.jsx(dr,{})})}),[t.palette.primary.dark]);return console.log(">>ModuleMenu/index::","auth.isAdmin()",Rt.isAdmin()),e.jsx(Wt,{Button:s,placement:"bottom",children:e.jsx(u,{sx:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",width:"420px",padding:"16px",zIndex:"modal"},children:e.jsxs(l.Suspense,{fallback:e.jsx(u,{width:"100%",sx:{zIndex:"modal"},children:e.jsx(J,{})}),children:[e.jsx(Ce,{name:"Core.AppContainer.ModuleMenu.List",slotProps:{items:Tr},children:n=>e.jsx(e.Fragment,{children:n.items.map(({to:a,label:r,disabled:i,icon:o},p)=>{const c=`MENU_MODULE_${r.value.replace(/ /g,"_")}`.toUpperCase();return e.jsx(re,{flagKey:c,children:e.jsx(br,{to:a,label:r,disabled:i,icon:o})},p)})})}),import.meta.VITE_DEBUG==="true"&&e.jsx(Ir,{})]})})})}function wr(t){return e.jsx(ue,{...t,width:"36",height:"36",viewBox:"7 7 22 22",paths:["M10.875 13.5C10.3558 13.5 9.84831 13.346 9.41663 13.0576C8.98495 12.7692 8.6485 12.3592 8.44982 11.8795C8.25114 11.3999 8.19915 10.8721 8.30044 10.3629C8.40173 9.85369 8.65173 9.38596 9.01885 9.01885C9.38596 8.65173 9.85369 8.40173 10.3629 8.30044C10.8721 8.19915 11.3999 8.25114 11.8795 8.44982C12.3592 8.6485 12.7692 8.98495 13.0576 9.41663C13.346 9.84831 13.5 10.3558 13.5 10.875C13.4992 11.571 13.2224 12.2382 12.7303 12.7303C12.2382 13.2224 11.571 13.4992 10.875 13.5Z","M18 13.5C17.4808 13.5 16.9733 13.346 16.5416 13.0576C16.11 12.7692 15.7735 12.3592 15.5748 11.8795C15.3761 11.3999 15.3242 10.8721 15.4254 10.3629C15.5267 9.85369 15.7767 9.38596 16.1438 9.01885C16.511 8.65173 16.9787 8.40173 17.4879 8.30044C17.9971 8.19915 18.5249 8.25114 19.0045 8.44982C19.4842 8.6485 19.8942 8.98495 20.1826 9.41663C20.471 9.84831 20.625 10.3558 20.625 10.875C20.6243 11.571 20.3475 12.2382 19.8553 12.7303C19.3632 13.2224 18.696 13.4992 18 13.5Z","M25.125 13.5C24.6058 13.5 24.0983 13.346 23.6666 13.0576C23.2349 12.7692 22.8985 12.3592 22.6998 11.8795C22.5011 11.3999 22.4492 10.8721 22.5504 10.3629C22.6517 9.85369 22.9017 9.38596 23.2688 9.01885C23.636 8.65173 24.1037 8.40173 24.6129 8.30044C25.1221 8.19915 25.6499 8.25114 26.1295 8.44982C26.6092 8.6485 27.0192 8.98495 27.3076 9.41663C27.596 9.84831 27.75 10.3558 27.75 10.875C27.7492 11.571 27.4724 12.2382 26.9803 12.7303C26.4882 13.2224 25.821 13.4992 25.125 13.5Z","M10.875 20.625C10.3558 20.625 9.84831 20.471 9.41663 20.1826C8.98495 19.8942 8.6485 19.4842 8.44982 19.0045C8.25114 18.5249 8.19915 17.9971 8.30044 17.4879C8.40173 16.9787 8.65173 16.511 9.01885 16.1438C9.38596 15.7767 9.85369 15.5267 10.3629 15.4254C10.8721 15.3242 11.3999 15.3761 11.8795 15.5748C12.3592 15.7735 12.7692 16.11 13.0576 16.5416C13.346 16.9733 13.5 17.4808 13.5 18C13.4992 18.696 13.2224 19.3632 12.7303 19.8553C12.2382 20.3475 11.571 20.6243 10.875 20.625Z","M18 20.625C17.4808 20.625 16.9733 20.471 16.5416 20.1826C16.11 19.8942 15.7735 19.4842 15.5748 19.0045C15.3761 18.5249 15.3242 17.9971 15.4254 17.4879C15.5267 16.9787 15.7767 16.511 16.1438 16.1438C16.511 15.7767 16.9787 15.5267 17.4879 15.4254C17.9971 15.3242 18.5249 15.3761 19.0045 15.5748C19.4842 15.7735 19.8942 16.11 20.1826 16.5416C20.471 16.9733 20.625 17.4808 20.625 18C20.6243 18.696 20.3475 19.3632 19.8553 19.8553C19.3632 20.3475 18.696 20.6243 18 20.625Z","M25.125 20.625C24.6058 20.625 24.0983 20.471 23.6666 20.1826C23.2349 19.8942 22.8985 19.4842 22.6998 19.0045C22.5011 18.5249 22.4492 17.9971 22.5504 17.4879C22.6517 16.9787 22.9017 16.511 23.2688 16.1438C23.636 15.7767 24.1037 15.5267 24.6129 15.4254C25.1221 15.3242 25.6499 15.3761 26.1295 15.5748C26.6092 15.7735 27.0192 16.11 27.3076 16.5416C27.596 16.9733 27.75 17.4808 27.75 18C27.7492 18.696 27.4724 19.3632 26.9803 19.8553C26.4882 20.3475 25.821 20.6243 25.125 20.625Z","M10.875 27.75C10.3558 27.75 9.84831 27.596 9.41663 27.3076C8.98495 27.0192 8.6485 26.6092 8.44982 26.1295C8.25114 25.6499 8.19915 25.1221 8.30044 24.6129C8.40173 24.1037 8.65173 23.636 9.01885 23.2688C9.38596 22.9017 9.85369 22.6517 10.3629 22.5504C10.8721 22.4492 11.3999 22.5011 11.8795 22.6998C12.3592 22.8985 12.7692 23.2349 13.0576 23.6666C13.346 24.0983 13.5 24.6058 13.5 25.125C13.4992 25.821 13.2224 26.4882 12.7303 26.9803C12.2382 27.4724 11.571 27.7492 10.875 27.75Z","M18 27.75C17.4808 27.75 16.9733 27.596 16.5416 27.3076C16.11 27.0192 15.7735 26.6092 15.5748 26.1295C15.3761 25.6499 15.3242 25.1221 15.4254 24.6129C15.5267 24.1037 15.7767 23.636 16.1438 23.2688C16.511 22.9017 16.9787 22.6517 17.4879 22.5504C17.9971 22.4492 18.5249 22.5011 19.0045 22.6998C19.4842 22.8985 19.8942 23.2349 20.1826 23.6666C20.471 24.0983 20.625 24.6058 20.625 25.125C20.6243 25.821 20.3475 26.4882 19.8553 26.9803C19.3632 27.4724 18.696 27.7492 18 27.75Z","M25.125 27.75C24.6058 27.75 24.0983 27.596 23.6666 27.3076C23.2349 27.0192 22.8985 26.6092 22.6998 26.1295C22.5011 25.6499 22.4492 25.1221 22.5504 24.6129C22.6517 24.1037 22.9017 23.636 23.2688 23.2688C23.636 22.9017 24.1037 22.6517 24.6129 22.5504C25.1221 22.4492 25.6499 22.5011 26.1295 22.6998C26.6092 22.8985 27.0192 23.2349 27.3076 23.6666C27.596 24.0983 27.75 24.6058 27.75 25.125C27.7492 25.821 27.4724 26.4882 26.9803 26.9803C26.4882 27.4724 25.821 27.7492 25.125 27.75Z"]})}function Mr(t){return e.jsxs(F,{...t,viewBox:"0 0 20 20",children:[e.jsx("g",{fill:t.gradient?"url(#linear)":"inherit",fillRule:"evenodd",clipRule:"evenodd",children:e.jsx("path",{d:"M3 2C2.73478 2 2.48043 2.10536 2.29289 2.29289C2.10536 2.48043 2 2.73478 2 3V17C2 17.2652 2.10536 17.5196 2.29289 17.7071C2.48043 17.8946 2.73478 18 3 18H6V2H3ZM7 0H3C2.20435 0 1.44129 0.316071 0.87868 0.87868C0.316071 1.44129 0 2.20435 0 3V17C0 17.7956 0.316071 18.5587 0.87868 19.1213C1.44129 19.6839 2.20435 20 3 20H17C17.7956 20 18.5587 19.6839 19.1213 19.1213C19.6839 18.5587 20 17.7956 20 17V3C20 2.20435 19.6839 1.44129 19.1213 0.87868C18.5587 0.316071 17.7956 0 17 0H7ZM8 2V18H17C17.2652 18 17.5196 17.8946 17.7071 17.7071C17.8946 17.5196 18 17.2652 18 17V3C18 2.73478 17.8946 2.48043 17.7071 2.29289C17.5196 2.10536 17.2652 2 17 2H8ZM14.707 12.707C14.8945 12.5195 14.9998 12.2652 14.9998 12C14.9998 11.7348 14.8945 11.4805 14.707 11.293L13.414 10L14.707 8.707C14.8892 8.5184 14.99 8.2658 14.9877 8.0036C14.9854 7.7414 14.8802 7.49059 14.6948 7.30518C14.5094 7.11977 14.2586 7.0146 13.9964 7.01233C13.7342 7.01005 13.4816 7.11084 13.293 7.293L11.293 9.293C11.1055 9.48053 11.0002 9.73484 11.0002 10C11.0002 10.2652 11.1055 10.5195 11.293 10.707L13.293 12.707C13.4805 12.8945 13.7348 12.9998 14 12.9998C14.2652 12.9998 14.5195 12.8945 14.707 12.707V12.707Z"})}),t.gradient&&H(t.gradient)]})}function Lr({open:t=!1,setOpen:s,logoSrc:n,logoSrcs:a,logoSizes:r,isMobile:i=!1,iconsOnlyOnClose:o}){const p=ze(),{pathname:c}=we(),[x,f]=Q.useState(),m=p.palette.icon.main==="gradient"?p.palette.text.primary:p.palette.icon.main,d=t&&o,j=!t&&o,g=d?"280px":j?"auto":0;return e.jsx(Ce,{name:"Core.AppContainer.SidebarMenu",slotProps:{items:[]},children:h=>e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Sidebar Module Menu",children:e.jsx(R,{sx:{color:"primary.dark"},onClick:()=>s(!t),size:"large",children:e.jsx(wr,{})})}),e.jsxs(Xs,{sx:{width:o?g:t?"280px":0,flexShrink:0,"& .MuiDrawer-paper":{width:o?g:t?"280px":0,boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"space-between"}},variant:"persistent",anchor:"left",open:o?!0:t,children:[e.jsxs(u,{children:[e.jsxs(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:"16px",minHeight:"70px"},children:[e.jsx(Mt,{component:le,to:"/",sx:{display:"flex"},children:e.jsx("img",{style:{marginRight:i?2:void 0},width:i||j?r.mobile.w:r.desktop.w,height:i||j?r.mobile.h:r.desktop.h,src:t?n:a.mobile,alt:"go to dashboard"})}),e.jsx(u,{sx:{transform:"translateX(-4px)"},children:e.jsx(Kt,{children:e.jsx("a",{href:"/",style:{textDecoration:"none"}})})})]}),e.jsx(Ce,{name:"Core.AppContainer.SidebarMenu.List",slotProps:{items:h.items,renderItem:({to:C,label:k,icon:L},M)=>{const v=`SIDEBAR_MENU_ITEM_${k.value.replace(/ /g,"_")}`.toUpperCase(),O=x===M||c===C;return e.jsx(re,{flagKey:v,children:e.jsx(w,{title:k.value,placement:"right",children:e.jsx(Lt,{disablePadding:!0,children:e.jsxs(js,{component:le,to:C,onClick:()=>{s(!1),f(M)},sx:{justifyContent:"center",paddingLeft:"8px",paddingRight:"8px",position:"relative"},children:[e.jsx(u,{sx:{position:"absolute",height:"20px",width:"6px",backgroundColor:p.palette.primary.main,left:"-3px",top:"calc(50% - 20px/2)",borderRadius:"3px",opacity:O?1:0}}),e.jsx(jt,{sx:V=>({color:O?"#fff":m,marginRight:j?0:"8px",backgroundColor:O?V.palette.primary.main:null,height:"40px",width:"40px",borderRadius:"100%",display:"flex",alignItems:"center",justifyContent:"center",minWidth:0}),children:e.jsx(L,{})}),e.jsx(Et,{primary:k.value,sx:V=>({display:j?"none":t?"block":void 0,color:O?V.palette.primary.main:null})})]})},M)})},M)}},children:C=>e.jsx(wt,{children:C.items.map(C.renderItem)})})]}),e.jsx(u,{sx:{display:"flex",justifyContent:"center",mt:"20px"},children:e.jsx(R,{onClick:()=>s(!t),children:e.jsx(Mr,{})})})]})]})})}Be.setScope("embrace");function Er(t){console.log(">>Topbar/index::","props",t);const s=G("HIDE_INTERVAL_WIDGET").on,n=G("TOPBAR_CURRENT_TIME_RECORD").on,a=G("TOPBAR_INTERVAL_WIDGET").on,r=G("WEEKLY_TIMESHEET").value,{iconsOnlyOnClose:i}=G("SIDEBAR_MENU").value,o=G("LOGO_SRC").value,p=l.useRef(),c=l.useRef(),[x,f]=l.useState(0),[m,d]=l.useState({popup:null,container:null}),j=Ia(),{globalState:{authUser:g,appLoading:h,isMobile:C,sidebarMenuOpen:k,setSidebarMenuOpen:L},logOut:M}=Y(),[v,O]=Q.useState(!1),V=Cn.isStaffRole(g),S=Sa({popupState:m,isMobile:C,isSimpleListView:v}),y=l.useCallback(()=>{d(E=>({...E,popup:E.popup==="searchTasks"?null:"searchTasks",container:p.current}))},[]);Se({trigger:"searchTasks",callback:y});const b=l.useCallback(()=>{d(E=>({...E,popup:E.popup==="intervalComment"?null:"intervalComment",container:c.current}))},[]);Se({trigger:"intervalComment",callback:b}),l.useEffect(()=>{const E=dn();async function T(){var de;const Z=`day::${E}::${g.id}::${Pe(pn(),"y-MM-dd")}`,ne=await te.graphql(se(`
        {
          getIntervalReport (id: "${Z}") {
            value
          }
        }
      `));f(((de=ne.data.getIntervalReport)==null?void 0:de.value)||0)}T();const A=B.subscribe("intervalStopped",()=>{setTimeout(T,2e3)}),q=B.subscribe("intervalEdited",()=>{setTimeout(T,2e3)});return()=>{B.unsubscribe(A),B.unsubscribe(q)}},[g.id]);const D=l.useCallback(E=>e.jsxs(N,{onClick:E,children:[e.jsx(on,{s3Key:g.profilePhoto,variant:"rounded"}),!C&&e.jsxs(e.Fragment,{children:[e.jsx(u,{mr:2,ml:2,className:"topbar-user-avatar-button",children:e.jsxs(I,{children:["Hi, ",g.firstName," ",g.surname,"!"]})}),e.jsx(vn,{})]})]}),[g.profilePhoto,g.firstName,g.surname,C]),_=()=>C?o.mobile:o.desktop;return e.jsxs(e.Fragment,{children:[e.jsxs($s,{position:"fixed",className:S.appBar,children:[h?e.jsx(yt,{classes:{root:S.loadingIndicator}}):null,e.jsxs(Je,{className:S.toolbar,children:[!k&&!i&&e.jsxs(u,{className:S.flexVCenter,children:[e.jsx("a",{href:"/",style:{display:"flex"},children:e.jsx("img",{style:{marginRight:C?2:void 0},width:C?o.sizes.mobile.w:o.sizes.desktop.w,height:C?o.sizes.mobile.h:o.sizes.desktop.h,src:_(),alt:"go to dashboard"})}),e.jsx(Kt,{children:e.jsx("a",{href:"/",style:{textDecoration:"none"}})})]}),e.jsx(u,{sx:{maxWidth:"900px",width:"100%",display:"flex",alignItems:"center",zIndex:10},children:!s&&e.jsx(Ce,{name:"Core.AppContainer.Topbar.IntervalWidget",slotProps:{hourUnit:"h"},children:E=>e.jsxs(e.Fragment,{children:[n&&e.jsx(e.Fragment,{children:!C&&e.jsxs(u,{mr:C?0:9,display:"flex",justifyContent:C?"center":"flex-start",onClick:C?y:void 0,alignItems:"baseline",children:[e.jsx(I,{className:S.dayTotalPrimary,children:un(x)}),e.jsx(I,{className:S.dayTotalSecondary,children:E.hourUnit})]})}),e.jsx("div",{className:S.intWdgt,children:e.jsxs("div",{children:[a&&!r&&e.jsx(Wn,{toggleSearchTasks:y,toggleIntervalComment:b}),m.popup==="searchTasks"&&e.jsx(ct,{open:m.popup==="searchTasks",afterSubmit:y,isSimpleListView:v,onChecked:()=>O(!v)}),m.popup==="intervalComment"&&e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(pt,{}),e.jsx(u,{ml:1,flex:"1",children:e.jsx(dt,{open:m.popup==="intervalComment",afterSubmit:b})})]})]})})]})})}),e.jsxs(u,{sx:{display:"flex",alignItems:"center"},children:[!V&&e.jsxs(e.Fragment,{children:[e.jsx(re,{flagKey:"BTN_NEW_RECORD",children:!C&&e.jsx(u,{mr:C?-1:2,children:e.jsx(za,{})})}),e.jsx(re,{flagKey:"BTN_GLOBAL_SEARCH",children:!C&&e.jsx(lr,{})}),e.jsx(re,{flagKey:"BTN_KNOWLEDGEBASE_SEARCH",children:!C&&e.jsx(tr,{})}),e.jsx(re,{flagKey:"MODULE_MENU",children:e.jsx(u,{mr:C?-1:void 0,children:e.jsx(Ar,{})})}),e.jsx(re,{flagKey:"SIDEBAR_MENU",children:e.jsx(u,{mr:C?-1:void 0,sx:{width:"48px"},children:e.jsx(Lr,{logoSrc:_(),logoSrcs:o,logoSizes:o.sizes,open:k,setOpen:L,isMobile:C,iconsOnlyOnClose:i})})}),!C&&e.jsx(u,{mr:C?-1:2,children:e.jsx(Ea,{classes:S,size:C?"small":void 0})})]}),e.jsx(Wt,{Button:D,placement:"bottom",children:e.jsxs(u,{p:2,display:"flex",flexDirection:"column",children:[e.jsx(ys,{to:`/member/${g==null?void 0:g.id}/intervals`,children:e.jsxs(N,{className:S.userMenuBtn,children:[e.jsx(In,{gradient:{disabled:G("DISABLE_ICON_GRADIENT").on}}),e.jsx(u,{ml:2,className:"topbar-user-avatar-dropdown-text",children:"My Account"})]})}),e.jsxs(N,{className:S.userMenuBtn,onClick:()=>M(),children:[e.jsx(Tn,{gradient:{disabled:G("DISABLE_ICON_GRADIENT").on}}),e.jsx(u,{ml:2,className:"topbar-user-avatar-dropdown-text",children:"Sign Out"})]}),e.jsx(en,{sx:{mt:2,mb:2}}),e.jsxs(N,{className:S.userMenuBtn,onClick:()=>{alert(tt())},children:[e.jsx(Sn,{gradient:{disabled:G("DISABLE_ICON_GRADIENT").on}}),e.jsxs(u,{ml:2,className:"topbar-user-avatar-dropdown-text",children:["App Version (",tt(),")"]})]})]})})]}),e.jsx(tn,{className:S.backdrop,open:!!m.popup,onClick:E=>{switch(m.popup){case"searchTasks":y(E);break;case"intervalComment":b(E);break;default:return}}})]})]}),e.jsx(Je,{className:S.toolbar}),C&&e.jsxs(e.Fragment,{children:[e.jsxs(Ne,{open:m.popup==="searchTasks",classes:j,keepMounted:!0,onClose:y,children:[e.jsx(u,{ref:p}),e.jsx(ct,{open:m.popup==="searchTasks",afterSubmit:y})]}),e.jsxs(At,{open:m.popup==="intervalComment",classes:j,keepMounted:!0,onClose:b,children:[e.jsx(u,{ref:c}),e.jsxs(u,{display:"flex",alignItems:"center",children:[e.jsx(pt,{}),e.jsx(u,{ml:1,flex:"1",children:e.jsx(dt,{open:m.popup==="intervalComment",afterSubmit:b})})]})]})]}),e.jsx(va,{})]})}const n1=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"}));export{Sn as D,br as M,Ze as S,$n as T,n1 as i};
