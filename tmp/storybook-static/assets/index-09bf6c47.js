import{j as t}from"./TransitionGroupContext-9d36972e.js";import{R as a}from"./index-f1f749bf.js";import{B as d,T as g,am as m,an as f,m as v,a6 as o}from"./papaparse.min-b66e70e7.js";import{b as x}from"./index-bcfaa842.js";import{B as k}from"./Button-352c3435.js";import"./assertThisInitialized-ad1db8e7.js";import"./_commonjsHelpers-042e6b4d.js";import"./_arrayIncludes-2cfb33ae.js";import"./_baseForOwn-9b89c4b6.js";import"./index-96c5f47c.js";import"./isPlainObject-07477f89.js";import"./debounce-213cd46f.js";import"./iframe-ed7f5a3f.js";import"../sb-preview/runtime.js";import"./index-4d501b15.js";import"./isNativeReflectConstruct-05c29d01.js";const j=v({root:{display:"grid",rowGap:"10px"},title:{textDecoration:"underline"},saveButton:{justifySelf:"end",width:250}});function A(){const s=j(),r=a.useRef(),i=a.useRef(),[p,l]=a.useState(!1),[w,h]=a.useState(!0),{enqueueSnackbar:c}=x(),y=async()=>{l(!0);const u=r.current.getInstance().getMarkdown(),e=i.current.getInstance().getMarkdown();try{await o.put("quotation-addtl-pages/start.md",u),await o.put("quotation-addtl-pages/end.md",e),console.log("Successfully saved files"),c("Successfully saved files",{variant:"success"})}catch(n){console.error("Something went wrong saving the files.",n),c("Something went wrong saving the files. Please try again.",{variant:"error"})}finally{l(!1)}};return a.useEffect(()=>{(async()=>{try{const e=await o.get("quotation-addtl-pages/start.md",{download:!0}),n=await o.get("quotation-addtl-pages/end.md",{download:!0}),S=await e.Body.text(),M=await n.Body.text();r.current.getInstance().setMarkdown(S),i.current.getInstance().setMarkdown(M)}catch(e){console.error("Failed to fetch existing files.",e)}finally{h(!1)}})()},[]),t.jsxs(d,{className:s.root,mr:3,children:[t.jsxs(d,{children:[t.jsx(g,{variant:"subtitle1",className:s.title,children:"Will be added to the start of quotations"}),t.jsx(m,{children:t.jsx(f.Editor,{usageStatistics:!1,previewStyle:"vertical",initialEditType:"wysiwyg",hideModeSwitch:!0,useCommandShortcut:!0,ref:r})})]}),t.jsxs(d,{children:[t.jsx(g,{variant:"subtitle1",className:s.title,children:"Will be added at the end of quotations"}),t.jsx(m,{children:t.jsx(f.Editor,{usageStatistics:!1,previewStyle:"vertical",initialEditType:"wysiwyg",hideModeSwitch:!0,useCommandShortcut:!0,ref:i})})]}),t.jsx(k,{size:"large",variant:"contained",color:"primary",disabled:p||w,className:s.saveButton,onClick:y,children:"Save"})]})}export{A as default};
