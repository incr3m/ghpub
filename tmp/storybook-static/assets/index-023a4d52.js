import{j as r}from"./TransitionGroupContext-9d36972e.js";import{R as n}from"./index-f1f749bf.js";import{c as j}from"./Play-87fed129.js";import{d as g,p as b,T as v,V as C,i as k,W as B,P as z,B as p,m as L,L as y,h as d}from"./papaparse.min-b66e70e7.js";import{u as F}from"./useIncludeFieldNames-35a180a9.js";import{d as N}from"./Link-c687dc07.js";import{B as f}from"./Button-352c3435.js";import"./assertThisInitialized-ad1db8e7.js";import"./_commonjsHelpers-042e6b4d.js";import"./react-router-19e5b27c.js";import"./index-4d501b15.js";import"./tiny-invariant-dd7d57d2.js";import"./index-bcfaa842.js";import"./index-96c5f47c.js";import"./isNativeReflectConstruct-05c29d01.js";import"./iframe-ed7f5a3f.js";import"../sb-preview/runtime.js";import"./filter-f99df4e5.js";import"./LocalizationProvider-a287304f.js";import"./_baseForOwn-9b89c4b6.js";import"./react-router-dom-60ea8218.js";import"./debounce-213cd46f.js";import"./uniq-0d482d7b.js";import"./_arrayIncludes-2cfb33ae.js";import"./cloneDeep-91467704.js";import"./isPlainObject-07477f89.js";const x="urls",E=L(s=>({root:{"& .MuiChip-root":{cursor:"pointer",marginLeft:s.spacing(1),padding:"0 5px"}},addBtn:{marginLeft:s.spacing(1)}}));function sr(){const s=n.useRef(null),[l,i]=n.useState({urls:null}),{state:{readOnly:m}}=n.useContext(g),{values:a={},setFieldValue:u}=b();F([x]);const o=E();return n.useEffect(()=>{a.urls&&i(t=>t.urls!==null?t:{...t,urls:JSON.parse(a.urls)})},[a.urls]),n.useEffect(()=>{l.urls&&u(x,JSON.stringify(l.urls))},[u,l.urls]),r.jsxs("div",{className:o.root,children:[r.jsx(v,{variant:"caption",children:"Links:"}),(l.urls||[]).map(t=>{const e={};return m?(e.component="a",e.href=t.url,e.target="_blank"):e.onDelete=()=>{i(c=>({...c,urls:c.urls.filter(h=>h.label!==t.label)}))},r.jsx(C,{icon:r.jsx(N,{}),variant:"outlined",size:"small",label:t.label,...e},t.label)}),!m&&r.jsx(k,{color:"default",size:"small",className:o.addBtn,onClick:t=>s.current.open(t.currentTarget),children:r.jsx(j,{})}),r.jsx(B,{variant:"popover",ref:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:r.jsx(z,{children:r.jsx(p,{minWidth:"200px",p:1,children:r.jsx(O,{onSubmit:t=>{i(e=>({...e,urls:[...e.urls||[],t]})),s.current.close()},onClose:()=>{s.current.close()}})})})})]})}function O({label:s,url:l,onSubmit:i,onClose:m}){const[a,u]=n.useState({url:l,label:s});return r.jsxs(y,{text:"Add Link",children:[r.jsx(d,{label:"Label",variant:"outlined",size:"small",fullWidth:!0,onChange:o=>{const t=o.target.value;u(e=>({...e,label:t}))}}),r.jsx(p,{mb:1}),r.jsx(d,{label:"Url",variant:"outlined",size:"small",fullWidth:!0,onChange:o=>{const t=o.target.value;u(e=>({...e,url:t}))}}),r.jsxs(p,{mt:1,children:[r.jsx(f,{size:"small",variant:"contained",color:"primary",onClick:()=>{i&&i(a)},children:"Submit"}),r.jsx(f,{size:"small",onClick:m,children:"Cancel"})]})]})}export{sr as default};
