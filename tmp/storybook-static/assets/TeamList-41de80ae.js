import{j as t}from"./TransitionGroupContext-9d36972e.js";import{R as p}from"./index-f1f749bf.js";import{P as x}from"./index-79afbab1.js";import{B as j,u as y,l as u,o as T,$ as h,a0 as k,N as C,Q,O as v}from"./papaparse.min-b66e70e7.js";import{u as L}from"./ProjectLink-987015ba.js";import{g as l}from"./_baseForOwn-9b89c4b6.js";import{R}from"./Play-87fed129.js";import"./assertThisInitialized-ad1db8e7.js";import"./_commonjsHelpers-042e6b4d.js";import"./_arrayIncludes-2cfb33ae.js";import"./index-bcfaa842.js";import"./index-96c5f47c.js";import"./isNativeReflectConstruct-05c29d01.js";import"./Button-352c3435.js";import"./isPlainObject-07477f89.js";import"./debounce-213cd46f.js";import"./iframe-ed7f5a3f.js";import"../sb-preview/runtime.js";import"./index-4d501b15.js";import"./pick-dba65392.js";import"./react-router-19e5b27c.js";import"./tiny-invariant-dd7d57d2.js";import"./filter-f99df4e5.js";import"./LocalizationProvider-a287304f.js";import"./index-61adb48a.js";import"./useGetProjectSummaryFields-0ab32aca.js";import"./SelectEsModelInput-d580a9f7.js";import"./Link-c687dc07.js";import"./react-router-dom-60ea8218.js";import"./useIncludeFieldNames-35a180a9.js";import"./Save-b67fa0ac.js";import"./index-147ad7aa.js";import"./Add-be7f5660.js";import"./uniq-0d482d7b.js";import"./cloneDeep-91467704.js";function S(){const[c,d]=p.useState({teamMembersCount:{}}),{data:m,loading:g}=y(u`
    {
      settingsTeam: getSetting(id: "kwMemberTeamType") {
        id
        value
      }
    }
  `),r=p.useMemo(()=>{const e=JSON.parse(l(m,"settingsTeam.value","{}"));if(e.items)return e.items.filter(s=>!s.archived)},[m]);console.log(">>member/TeamList::","teams",r);const i=T();return h(async e=>{var n;if((r==null?void 0:r.length)<1)return;const s=k({teamsQ:{index:"user",body:{size:0,query:{bool:{must:[{term:{"status.keyword":"Active"}}]}},aggs:{teams:{terms:{field:"teamList.keyword",size:999}}}}}}),f=await i.query({query:u`{${s}}
      `}),b=JSON.parse(((n=f.data)==null?void 0:n.teamsQ)||"{}"),a={};for(const o of l(b,"aggregations.teams.buckets",[]))a[o.key]=o.doc_count;e&&d(o=>({...o,teamMembersCount:a}))},[r,i]),t.jsx("div",{children:t.jsxs(C,{loading:g,data:r,children:[t.jsx(Q,{dataId:"text",label:"Name",render:e=>t.jsx(R,{to:`/member/list/active?team=${e}`,children:e})}),t.jsx(v,{dataId:"members",render:(e,s)=>t.jsx("strong",{children:c.teamMembersCount[s.text]})})]})})}function ut(){return L({paths:[{label:"",link:"/"},{label:"Groups",link:"/member/group"}]}),t.jsx(t.Fragment,{children:t.jsxs(j,{children:[t.jsx(x,{mt:3,mb:3,children:"GROUPS"}),t.jsx(S,{})]})})}export{S as TeamList,ut as default};
