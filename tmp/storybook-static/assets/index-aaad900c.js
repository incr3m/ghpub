import{_ as O}from"./iframe-ed7f5a3f.js";import{j as e}from"./TransitionGroupContext-9d36972e.js";import{R as r}from"./index-f1f749bf.js";import{S as B}from"./index-611aed03.js";import{u as D}from"./ProjectLink-987015ba.js";import{d as f}from"./ExpandMore-79a3c159.js";import{au as w,av as I,u as L,g as $,B as n,bQ as M,N as _,Q as p,R as z,m as E,p as F,af as q,L as b,a8 as N,O as Q,X,i as H,W as U,ag as V,a9 as G,G as J,h as Y,bN as Z,aV as K,T as k,a3 as ee}from"./papaparse.min-b66e70e7.js";import{X as te}from"./Play-87fed129.js";import{T as oe}from"./Trash-822e65ce.js";import{u as ie}from"./useFetchMore-be228481.js";import{g as ne}from"./_baseForOwn-9b89c4b6.js";import{B as x}from"./Button-352c3435.js";import{A as y,h as S,i as C}from"./VewJobDetails.story-c6ae2e88.js";import"../sb-preview/runtime.js";import"./assertThisInitialized-ad1db8e7.js";import"./_commonjsHelpers-042e6b4d.js";import"./pick-dba65392.js";import"./index-bcfaa842.js";import"./index-96c5f47c.js";import"./isNativeReflectConstruct-05c29d01.js";import"./react-router-19e5b27c.js";import"./index-4d501b15.js";import"./tiny-invariant-dd7d57d2.js";import"./filter-f99df4e5.js";import"./LocalizationProvider-a287304f.js";import"./index-61adb48a.js";import"./useGetProjectSummaryFields-0ab32aca.js";import"./SelectEsModelInput-d580a9f7.js";import"./Link-c687dc07.js";import"./react-router-dom-60ea8218.js";import"./_arrayIncludes-2cfb33ae.js";import"./useIncludeFieldNames-35a180a9.js";import"./Save-b67fa0ac.js";import"./index-147ad7aa.js";import"./Add-be7f5660.js";import"./uniq-0d482d7b.js";import"./isPlainObject-07477f89.js";import"./debounce-213cd46f.js";import"./cloneDeep-91467704.js";import"./index-72884e22.js";import"./index-356e4a49.js";import"./stories-1f769a10.js";import"./index-63a3e378.js";import"./index.esm-bf21a293.js";import"./index-ce960f89.js";import"./index-f70ce446.js";import"./zod-575fe4a8.js";import"./userGroups-edff3f7b.js";import"./SyncEagleDevTool-4c34bdb8.js";import"./searchUsers-04324aeb.js";import"./find-8750f979.js";import"./index-18188c67.js";import"./useTagSearch-f4fcfbe9.js";import"./Skeleton-cd6f071e.js";import"./uniqBy-baac1626.js";import"./RemoveCircle-617bdac2.js";import"./index-b769406f.js";import"./DragIndicator-582939ba.js";import"./TableRow-00aadd87.js";import"./TableHead-dd1583ce.js";import"./capitalize-c31f38e2.js";import"./isString-2f2f79c0.js";import"./Person-5be09a1e.js";import"./times-069ea398.js";import"./_castFunction-353dfc26.js";import"./TaskForm-863cdb73.js";import"./RepeatFields-8275ed19.js";import"./useBeforeSave-e049f6dd.js";import"./Alert-fd9a067a.js";import"./TaskAssignees-858ea3c9.js";import"./useTaskAssignees-9f1fd5d3.js";import"./github-91d085b0.js";import"./SortUpIcon-3aecf5f0.js";import"./OpportunityLink-b32d0c35.js";import"./index-9d3afdfc.js";import"./index-79afbab1.js";import"./Check-78df5e8e.js";import"./bundle-053bdffd.js";import"./MilestoneIcon-61fb6e69.js";import"./index-5d349c56.js";import"./EstimateEditorPopover-b8debf9a.js";import"./AssigneeEditorPopover-2b4e6473.js";import"./ToggleButtonGroup-93d9af56.js";import"./index-71ed01a9.js";import"./index-4d31058a.js";import"./Undo-33c7aa7a.js";import"./camelCase-4e7e8b23.js";import"./AuditLogsNoBreadCrumbs-8da9c0ce.js";import"./ExpenseView-2f5d1473.js";import"./MenuOptions-0bc3bb51.js";import"./MultipleSelectFieldInput-d0cee4a2.js";import"./LocationBeFormBody-c033b2b3.js";import"./reduce-4f6f1985.js";var g={},re=I;Object.defineProperty(g,"__esModule",{value:!0});var P=g.default=void 0,se=re(w()),T=e;P=g.default=(0,se.default)([(0,T.jsx)("circle",{cx:"12",cy:"12",r:"2"},"0"),(0,T.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-3.25 9c0 .22-.03.42-.06.63l.84.73c.18.16.22.42.1.63l-.59 1.02c-.12.21-.37.3-.59.22l-1.06-.36c-.32.27-.68.48-1.08.63l-.22 1.09c-.05.23-.25.4-.49.4h-1.18c-.24 0-.44-.17-.49-.4l-.22-1.09c-.4-.15-.76-.36-1.08-.63l-1.06.36c-.23.08-.47-.02-.59-.22l-.59-1.02c-.12-.21-.08-.47.1-.63l.84-.73c-.05-.21-.08-.41-.08-.63s.03-.42.06-.63l-.84-.73c-.18-.16-.22-.42-.1-.63l.59-1.02c.12-.21.37-.3.59-.22l1.06.36c.32-.27.68-.48 1.08-.63l.22-1.09c.06-.24.26-.41.5-.41h1.18c.24 0 .44.17.49.4l.22 1.09c.4.15.76.36 1.08.63l1.06-.36c.23-.08.47.02.59.22l.59 1.02c.12.21.08.47-.1.63l-.84.73c.04.22.07.42.07.64"},"1")],"SettingsApplicationsRounded");var v={},le=I;Object.defineProperty(v,"__esModule",{value:!0});var W=v.default=void 0,ae=le(w()),ce=e;W=v.default=(0,ae.default)((0,ce.jsx)("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5m-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4zm-3-4h8v2H8z"}),"LinkOutlined");const pe=E({endpointCell:{maxWidth:"300px",overflowX:"hidden",textOverflow:"ellipsis"}});function de(){const[s,l]=r.useState({evtType:"OUT"}),i=pe(),o=L($`
      query($nextToken: String) {
        list: webhookEventByTypeDate(type:"${s.evtType}", nextToken: $nextToken) {
          nextToken
          items {
            id
            type
            event
            status
            endpoint
            createdAt
          }
        }
      }
    `,{fetchPolicy:"network-only",nextFetchPolicy:"cache-first"});console.log(">>IntegrationSetting/WebhookEventLogs::","whQ",o);const d=ne(o,"data.list.items",[]),m=ie({...o,listPath:"list",maxLength:10});return e.jsxs("div",{children:[e.jsxs(n,{height:"20px",justifyContent:"space-between",display:"flex",children:[e.jsx("div",{}),e.jsx(n,{display:"inline-block",marginTop:"-20px",children:e.jsx(M,{value:s.evtType,options:[{label:"All Incoming",value:"IN"},{label:"All Outgoing",value:"OUT"}],onChange:(a,h)=>{l(j=>({...j,evtType:h}))}})})]}),e.jsxs(_,{data:d,loading:o.loading,children:[e.jsx(p,{dataId:"type",width:"200px",label:"Type"}),e.jsx(p,{dataId:"event",width:"200px",label:"Event"}),e.jsx(p,{dataId:"endpoint",label:"Endpoint",render:a=>e.jsx(n,{title:a,className:i.endpointCell,children:a})}),e.jsx(p,{dataId:"status",label:"Status",width:"150px"})]}),!o.loading&&e.jsx(z,{onClick:m.more})]})}function me(){const s=r.useRef({}),l=r.useRef(null),[i,o]=r.useState({entity:null,url:null,openEvents:!1}),{values:d,setFieldValue:m}=F(),a=d==null?void 0:d.webhooks;s.current.webhooks=a;const h=r.useMemo(()=>Object.keys(q().MODELS).map(t=>({text:t,value:t})),[]),j=r.useCallback(t=>{const u=t.currentTarget.value;o(c=>({...c,entity:u}))},[]),R=r.useCallback(t=>{const u=t.currentTarget.value;o(c=>({...c,url:u}))},[]),A=r.useCallback(()=>{if(i.entity&&i.url){const t=s.current.webhooks||{};m("webhooks",{...t,[i.entity]:{url:i.url}})}l.current.close()},[i,m]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{text:e.jsxs(n,{display:"flex",justifyContent:"space-between",children:[e.jsx("span",{children:"Webhooks"}),e.jsx(x,{variant:"outlined",size:"small",onClick:()=>{o(t=>({...t,openEvents:!0}))},children:"Show All Events"}),e.jsx(N,{open:i.openEvents,onClose:()=>{o(t=>({...t,openEvents:!1}))},maxWidth:"xl",scroll:"body",children:e.jsx(b,{mt:2,text:"Webhook Events",p:2,children:e.jsx(de,{})})})]}),contentBox:{mt:2},children:[e.jsxs(_,{data:Object.keys(a||{}).map(t=>({id:t,key:t,...a[t]})),children:[e.jsx(p,{dataId:"id",width:"200px",label:"Entity"}),e.jsx(p,{dataId:"url",label:"Endpoint"}),e.jsx(Q,{dataId:"key",label:"action",width:"80px",render:t=>e.jsx(n,{display:"flex",justifyContent:"center",children:e.jsx(X,{title:"Delete",children:e.jsx(H,{size:"small",onClick:u=>{u.stopPropagation();const c={...a};delete c[t],m("webhooks",c)},children:e.jsx(oe,{})})})})})]}),e.jsx(n,{mb:1}),e.jsxs(x,{variant:"outlined",size:"small",onClick:()=>{l.current.open()},children:["Add Webhook âž•"," "]})]}),e.jsxs(U,{variant:"dialog",ref:l,dialogProps:{maxWidth:"xs",fullWidth:!0},children:[e.jsx(V,{children:"Create Webhook"}),e.jsx(G,{children:e.jsxs(n,{children:[e.jsx(J,{fullWidth:!0,label:"Entity",value:i.entity,onChange:j,options:h}),e.jsx(Y,{label:"URL",value:i.url||"",onChange:R,margin:"dense",variant:"outlined",fullWidth:!0,InputProps:{startAdornment:e.jsx(Z,{children:e.jsx(n,{mr:1,color:"lightgrey",children:e.jsx(W,{})})})}})]})}),e.jsxs(K,{children:[e.jsx(x,{variant:"outlined",size:"small",onClick:()=>{l.current.close()},children:"Cancel"}),e.jsx(x,{variant:"contained",color:"primary",onClick:A,children:"Save"})]})]})]})}const ue=r.lazy(()=>O(()=>import("./XeroSetting-c89cfcb7.js"),["./XeroSetting-c89cfcb7.js","./TransitionGroupContext-9d36972e.js","./index-f1f749bf.js","./_commonjsHelpers-042e6b4d.js","./assertThisInitialized-ad1db8e7.js","./Play-87fed129.js","./papaparse.min-b66e70e7.js","./_arrayIncludes-2cfb33ae.js","./_baseForOwn-9b89c4b6.js","./index-bcfaa842.js","./index-96c5f47c.js","./isNativeReflectConstruct-05c29d01.js","./Button-352c3435.js","./isPlainObject-07477f89.js","./debounce-213cd46f.js","./iframe-ed7f5a3f.js","./index-4d501b15.js","./papaparse-cdbe7e6d.css","./react-router-19e5b27c.js","./tiny-invariant-dd7d57d2.js","./filter-f99df4e5.js","./LocalizationProvider-a287304f.js","./react-router-dom-60ea8218.js","./uniq-0d482d7b.js","./cloneDeep-91467704.js","./index-611aed03.js","./index-8edd7abf.js"],import.meta.url)),xe=E({details:{display:"unset",padding:0}});function eo(){const[s,l]=r.useState({selectedPanel:"general"});D({paths:[{label:"",link:"/"},{label:"Setting",link:"/setting"},{label:"Integrations",link:"/settings/integration"}]});const i=xe();return e.jsxs(n,{maxWidth:"100%",children:[e.jsxs(y,{expanded:s.selectedPanel==="general",onClick:()=>{l(o=>({...o,selectedPanel:"general"}))},children:[e.jsxs(S,{expandIcon:e.jsx(f,{}),children:[e.jsx(n,{component:P,mr:1}),e.jsx(k,{children:"General"})]}),e.jsx(C,{className:i.details,children:e.jsx(B,{code:"integration-setting",name:"General",module:"core",withHeader:!1,Container:n,children:e.jsx(me,{})})})]}),e.jsxs(y,{expanded:s.selectedPanel==="xero",onClick:()=>{l(o=>({...o,selectedPanel:"xero"}))},children:[e.jsxs(S,{expandIcon:e.jsx(f,{}),children:[e.jsx(n,{component:te,mr:1}),e.jsx(k,{children:"Xero"})]}),e.jsx(C,{className:i.details,children:e.jsx("div",{children:e.jsx(r.Suspense,{fallback:e.jsx(ee,{}),children:s.selectedPanel==="xero"?e.jsx(ue,{}):e.jsx("div",{})})})})]})]})}export{eo as default};
