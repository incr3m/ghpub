import{j as t}from"./TransitionGroupContext-9d36972e.js";import{d as C}from"./Replay-bbc3c678.js";import{d as S}from"./ExpenseView-2f5d1473.js";import{u as L}from"./ProjectLink-987015ba.js";import{R as a}from"./index-f1f749bf.js";import{a6 as s,B as u,T as p,P as N,C as k,m as U}from"./papaparse.min-b66e70e7.js";import{B as j}from"./Button-352c3435.js";import"./assertThisInitialized-ad1db8e7.js";import"./_commonjsHelpers-042e6b4d.js";import"./_arrayIncludes-2cfb33ae.js";import"./_baseForOwn-9b89c4b6.js";import"./SortUpIcon-3aecf5f0.js";import"./index-bcfaa842.js";import"./index-96c5f47c.js";import"./isNativeReflectConstruct-05c29d01.js";import"./TableRow-00aadd87.js";import"./filter-f99df4e5.js";import"./LocalizationProvider-a287304f.js";import"./Play-87fed129.js";import"./react-router-19e5b27c.js";import"./index-4d501b15.js";import"./tiny-invariant-dd7d57d2.js";import"./iframe-ed7f5a3f.js";import"../sb-preview/runtime.js";import"./react-router-dom-60ea8218.js";import"./debounce-213cd46f.js";import"./uniq-0d482d7b.js";import"./cloneDeep-91467704.js";import"./TableHead-dd1583ce.js";import"./Save-b67fa0ac.js";import"./MenuOptions-0bc3bb51.js";import"./index-79afbab1.js";import"./pick-dba65392.js";import"./index-61adb48a.js";import"./useGetProjectSummaryFields-0ab32aca.js";import"./SelectEsModelInput-d580a9f7.js";import"./Link-c687dc07.js";import"./useIncludeFieldNames-35a180a9.js";import"./index-147ad7aa.js";import"./Add-be7f5660.js";import"./isPlainObject-07477f89.js";const y=U({paper:{padding:10,marginTop:10},settingTitle:{fontWeight:"bold",fontSize:"1.5rem"},settingSubtitle:{marginBottom:10},mainContent:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",alignContent:"center",rowGap:10},input:{display:"none"},inputLabel:{marginTop:10,justifySelf:"center"},imageLogo:{objectFit:"contain"}}),B=({onChange:i,disabled:r,children:c})=>{const l=y();return t.jsxs(t.Fragment,{children:[t.jsx("input",{disabled:r,accept:"image/*",className:l.input,id:"contained-button-file",type:"file",onChange:i}),t.jsx("label",{className:l.inputLabel,htmlFor:"contained-button-file",children:t.jsx(j,{disabled:r,variant:"contained",color:"primary",component:"span",startIcon:t.jsx(S,{}),children:c})})]})};function ft(){const[i,r]=a.useState(),[c,l]=a.useState(),[f,x]=a.useState(!1),e=y();L({paths:[{label:"",link:"/"},{label:"Setting",link:"/setting"},{label:"Logo",link:"/settings/logo"}]});const g=a.useCallback(async()=>{var m,n;try{const o=await s.list("logo/logo");if((m=o[0])!=null&&m.key){const d=await s.get((n=o[0])==null?void 0:n.key);r(d)}}catch(o){l(o),console.log("Something went wrong wih fetching the item: ",o)}},[]);a.useEffect(()=>{g()},[g]);const b=async m=>{const n=m.target.files[0],o=n.name.split("."),d=o[o.length-1];try{x(!0);const h=await s.list("logo/");await Promise.all(h.map(w=>s.remove(w.key))),await s.put(`logo/logo.${d}`,n),g()}catch(h){console.log("something went wrong with uploading file: ",h)}finally{x(!1)}};return t.jsx(t.Fragment,{children:t.jsxs(u,{children:[t.jsx(p,{variant:"h1",className:e.settingTitle,children:"Company logo"}),t.jsx(p,{variant:"overline",className:e.settingSubtitle,children:"Displayed in Client Upload forms"}),t.jsxs(N,{className:e.paper,children:[c&&t.jsxs(u,{className:e.mainContent,children:[t.jsx(p,{children:"Something went wrong retrieving the logo"}),t.jsx(j,{onClick:()=>window.location.reload(),startIcon:t.jsx(C,{}),children:"Try again"})]}),t.jsxs(u,{className:e.mainContent,children:[i&&t.jsx("img",{src:i,alt:"company logo",className:e.imageLogo}),t.jsx(B,{disabled:f,onChange:b,children:f?t.jsx(k,{}):`${i?"Change":"Upload"} Logo`}),t.jsx(p,{variant:"subtitle2",className:e.inputLabel,children:"Photos larger than 300px in height will be resized."})]})]})]})})}export{ft as default};
