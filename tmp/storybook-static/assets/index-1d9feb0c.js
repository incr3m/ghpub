import{j as t}from"./TransitionGroupContext-9d36972e.js";import{R as h}from"./index-f1f749bf.js";import{h as S,a as g}from"./hotkeys-a6c2398e.js";import{A as v,v as H}from"./Play-87fed129.js";import{au as R,av as U,aC as E,T as c,B as m,i as B,a8 as A,j as T,C as W,at as _,bp as $}from"./papaparse.min-b66e70e7.js";import{E as G}from"./SortUpIcon-3aecf5f0.js";import{B as w}from"./Button-352c3435.js";import{u as P}from"./ProjectLink-987015ba.js";import"./assertThisInitialized-ad1db8e7.js";import"./_commonjsHelpers-042e6b4d.js";import"./react-router-19e5b27c.js";import"./index-4d501b15.js";import"./tiny-invariant-dd7d57d2.js";import"./index-bcfaa842.js";import"./index-96c5f47c.js";import"./isNativeReflectConstruct-05c29d01.js";import"./iframe-ed7f5a3f.js";import"../sb-preview/runtime.js";import"./filter-f99df4e5.js";import"./LocalizationProvider-a287304f.js";import"./_baseForOwn-9b89c4b6.js";import"./react-router-dom-60ea8218.js";import"./debounce-213cd46f.js";import"./uniq-0d482d7b.js";import"./_arrayIncludes-2cfb33ae.js";import"./cloneDeep-91467704.js";import"./isPlainObject-07477f89.js";import"./pick-dba65392.js";import"./index-61adb48a.js";import"./useGetProjectSummaryFields-0ab32aca.js";import"./SelectEsModelInput-d580a9f7.js";import"./Link-c687dc07.js";import"./useIncludeFieldNames-35a180a9.js";import"./Save-b67fa0ac.js";import"./index-147ad7aa.js";import"./Add-be7f5660.js";var k={},q=U;Object.defineProperty(k,"__esModule",{value:!0});var I=k.default=void 0,M=q(R()),O=t;I=k.default=(0,M.default)((0,O.jsx)("path",{d:"M20 7v10H4V7zm0-2H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m-9 3h2v2h-2zm0 3h2v2h-2zM8 8h2v2H8zm0 3h2v2H8zm-3 0h2v2H5zm0-3h2v2H5zm3 6h8v2H8zm6-3h2v2h-2zm0-3h2v2h-2zm3 3h2v2h-2zm0-3h2v2h-2z"}),"KeyboardOutlined");function D({character:n}){return t.jsx(E,{style:{display:"grid",justifyContent:"center",alignItems:"center",height:41,minWidth:48,padding:"10px 20px"},children:t.jsx(c,{style:{fontSize:14,fontWeight:600,color:"#151D27",textTransform:"uppercase",letterSpacing:.75},children:n})})}function L({hotkey:n,onEditClick:o}){return t.jsxs(m,{style:{display:"grid",gridTemplateColumns:"36px repeat(2, auto)",alignItems:"center",columnGap:30,justifyContent:"start"},children:[t.jsx(B,{onClick:o,size:"large",children:t.jsx(G,{style:{height:18,width:18}})}),t.jsx(m,{style:{display:"grid",gridTemplateColumns:`repeat(${n.binding.split(" + ").length}, auto)`,columnGap:10,justifyContent:"start"},children:n.binding.split(" + ").map((r,s)=>t.jsx(D,{character:r},s))}),t.jsx(c,{style:{fontSize:16,letterSpacing:.5,color:"#151D27"},children:n.description})]})}function K(){return t.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.87066 4.375H6.25V5.625H1.875V1.25H3.125V3.29397C4.20319 1.98907 5.74735 1.25 7.5 1.25C10.9518 1.25 13.75 4.04822 13.75 7.5C12.5 7.5 13.75 7.5 12.5 7.5C12.5 4.73858 10.2614 2.5 7.5 2.5C6.00398 2.5 4.72096 3.17419 3.87066 4.375ZM11.1293 10.625H8.75V9.375H13.125V13.75H11.875V11.706C10.7968 13.0109 9.25265 13.75 7.5 13.75C4.04822 13.75 1.25 10.9518 1.25 7.5H2.5C2.5 10.2614 4.73858 12.5 7.5 12.5C8.99602 12.5 10.279 11.8258 11.1293 10.625Z",fill:"#052649"})})}function F({description:n,value:o=[],onReset:r,onConfirm:s,...f}){const[l,b]=h.useState(!1);return t.jsx(A,{...f,children:t.jsxs(m,{style:{width:430,padding:40},children:[t.jsxs(m,{style:{display:"grid",gridTemplateColumns:"auto 20px",alignItems:"center",justifyContent:"space-between",marginBottom:30},children:[t.jsx(c,{style:{color:"#052649",fontSize:20,fontWeight:600,textTransform:"uppercase",letterSpacing:1.25},children:"Edit hotkey"}),t.jsx(B,{style:{width:20,height:20},onClick:f.onClose,size:"large",children:t.jsx(T,{fontSize:"small"})})]}),t.jsx(c,{style:{fontSize:10,color:"#9BA8B6",letterSpacing:.25},children:"Hotkey function"}),t.jsx(c,{style:{color:"#37516D",fontSize:14,letterSpacing:.5,marginBottom:15},children:n}),t.jsxs(c,{style:{color:"#9BA8B6",fontSize:10,letterSpacing:.25,marginBottom:30},children:[t.jsx("span",{style:{fontWeight:600},children:"Please press the combination of keys you want."})," ","You may need to press them one by one but when you need to trigger them, you will have to press all the keys at once."]}),(o==null?void 0:o.length)===0?t.jsx(m,{style:{border:"1px dashed #CDD3DB",padding:"10px 20px",marginBottom:40},children:t.jsx(c,{style:{textTransform:"uppercase",color:"#CDD3DB",fontSize:14,fontWeight:600,letterSpacing:.75},children:"Press key combination"})}):t.jsx(m,{style:{display:"grid",gridTemplateColumns:`repeat(${o.length+o.length-1}, auto)`,alignItems:"center",justifyContent:"center",columnGap:10,marginBottom:40},children:o.map((u,y)=>t.jsxs(t.Fragment,{children:[t.jsx(D,{character:u},y),y!==o.length-1&&t.jsx(c,{style:{fontWeight:600,color:"#151D27",fontSize:14},children:"+"})]}))}),t.jsxs(m,{style:{display:"grid",gridTemplateColumns:"repeat(2, auto)",justifyContent:"end",columnGap:15},children:[t.jsx(w,{disabled:l,startIcon:t.jsx(K,{}),variant:"outlined",onClick:r,children:"Reset"}),t.jsx(w,{disabled:l,startIcon:t.jsx(I,{}),variant:"contained",color:"primary",style:{minWidth:167},onClick:()=>{b(!0),s()},children:l?t.jsx(W,{style:{width:15,height:15}}):"Update hotkey"})]})]})})}const z=Object.keys(g);function Z(){P({paths:[{label:"",link:"/"},{label:"Settings",link:"/settings"},{label:"Hotkeys",link:"/settings/hotkeys"}]});const{globalState:{authUser:n},updateGlobalState:o}=_(),[{trigger:r,value:s,description:f},l]=h.useState({trigger:"",description:"",value:[],error:""}),b=h.useCallback(()=>{l(i=>({...i,value:[]}))},[]);h.useEffect(()=>{if(r){S.setScope("nonExistent");const i={meta:"command",control:"ctrl",shift:"shift"};document.onkeydown=d=>{d.preventDefault();const{key:e}=d,x=i[e.toLowerCase()],j=[].concat(s);let a=[];if(x){if(!s.includes(x)){if(x==="shift"){const p=s[0];(p==="command"||p==="ctrl")&&(a=[j.shift()])}a=a.concat(x,j)}}else{const p=e.toLowerCase();j.includes(p)||(a=[p]),a=j.concat(a)}if(a.length){const p=[];let C=a[0];for(;C==="command"||C==="ctrl"||C==="shift";)p.push(a.shift()),C=a[0];l(V=>({...V,value:p.concat(a.sort())}))}}}else document.onkeydown=null,S.setScope("embrace")},[r,s]);const u=h.useCallback(()=>{l(i=>({...i,trigger:"",error:null}))},[]),y=h.useCallback(()=>{(async()=>{const i=s.join(" + ");if(!i){l(e=>({...e,error:"Please type the combination you want to use."}));return}if(n.hotkeys.items.find(e=>e.trigger!==r&&e.binding===i)||z.find(e=>e!==r&&g[e].binding===i)){l(e=>({...e,error:"That combination already exists."}));return}const d=n.hotkeys.items.find(e=>e.trigger===r);if(d){if(d.binding===i){u();return}await v.graphql(H(`mutation ($input: UpdateUserHotkeyInput!) {
            updateUserHotkey (input: $input) {
              id
              binding
              trigger
              userId
              createdAt
              updatedAt
            }
          }`,{input:{id:d.id,binding:i}})),o({authUser:{...n,hotkeys:{items:n.hotkeys.items.map(e=>e.id!==d.id?e:{...e,binding:i})}}})}else{if(i===g[r].binding){u();return}const{data:{createUserHotkey:e}}=await v.graphql(H(`mutation ($input: CreateUserHotkeyInput!) {
            createUserHotkey (input: $input) {
              id
              binding
              trigger
              userId
              createdAt
              updatedAt
            }
          }`,{input:{id:$(),binding:i,trigger:r,userId:n.id}}));o({authUser:{...n,hotkeys:{items:n.hotkeys.items.concat(e)}}})}u()})()},[r,s,n,o,u]);return t.jsxs(t.Fragment,{children:[t.jsx(c,{style:{fontWeight:600,fontSize:20,color:"#052649",textTransform:"uppercase",marginBottom:30,letterSpacing:"0.05em"},children:"Hotkeys settings"}),t.jsx(m,{style:{display:"grid",rowGap:15},children:z.map(i=>{var d;return t.jsx(L,{hotkey:{...g[i],binding:((d=n.hotkeys.items.find(e=>e.trigger===i))==null?void 0:d.binding)||g[i].binding},onEditClick:()=>{l(e=>({...e,value:[],description:g[i].description,trigger:i}))}},i)})}),t.jsx(F,{value:s,open:!!r,onClose:u,description:f,onReset:b,onConfirm:y})]})}const Vt=h.memo(Z);export{Vt as default};
