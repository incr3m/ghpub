import{j as t}from"./TransitionGroupContext-9d36972e.js";import{b as ne,h as We,l as ge,u as be,f as ze,S as P}from"./index-bcfaa842.js";import{R as j,r as A}from"./index-f1f749bf.js";import{dk as Je,dl as Ze,ar as Ue,as as xe,X as Ce,i as Ye,b2 as Z,a as ve,cA as D,a_ as O,dm as B,b1 as Ke,br as Ge,b0 as Qe,bx as we,dn as Xe,E as ee,F as et,au as _,av as F,r as tt,P as nt,B as f,ah as rt,aj as at,Y as Se,J as M,a6 as Le,dp as it,a2 as Ae,T as b,am as st,an as ot,at as ct,dq as lt,aY as dt,W as ut,dr as ht,o as mt,ds as pt,e as ye,aq as N,a8 as Te,ag as Me,a9 as Ve,bo as xt,dt as yt,ad as G,u as ft,l as Ie,b6 as jt,cV as gt,aV as bt,du as fe,x as Ct}from"./papaparse.min-b66e70e7.js";import{C as vt,c as U,a as re,u as wt}from"./index.esm-bf21a293.js";import{s as St}from"./zod-575fe4a8.js";import{F as q}from"./index-ce960f89.js";import{f as Lt,R as k}from"./filter-f99df4e5.js";import{L as Q}from"./userGroups-edff3f7b.js";import"./_baseForOwn-9b89c4b6.js";import"./index-96c5f47c.js";import{F as V}from"./index-f70ce446.js";import{s as At}from"./searchUsers-04324aeb.js";import{F as _e}from"./find-8750f979.js";import{B as S}from"./Button-352c3435.js";import{au as Tt,L as Mt,J as Vt,ak as It}from"./Play-87fed129.js";import{u as _t}from"./useFetchMore-be228481.js";import{u as Ft}from"./useTagSearch-f4fcfbe9.js";import{S as Et}from"./Skeleton-cd6f071e.js";function Pt(){const[e,n]=j.useState(!1),{enqueueSnackbar:a}=ne();return{loading:e,action:j.useCallback((r,s)=>async(...i)=>{n(!0);try{await Promise.resolve(r(...i)),s!=null&&s.message&&a(s.message,{variant:"success"})}catch(o){const c=o;console.log("Error"),console.log(c)}finally{n(!1)}},[a])}}var kt=function(e,n){e===void 0&&(e=!0);var a=A.useCallback(function(r){var s=typeof e=="function"?e():!0;if(s)return r.preventDefault(),n&&(r.returnValue=n),n},[e,n]);A.useEffect(function(){if(e)return Je(window,"beforeunload",a),function(){return Ze(window,"beforeunload",a)}},[e,a])};const Ht=kt;function W(e){var s;const n=We();return!!(((s=n==null?void 0:n.getAttributes())==null?void 0:s.teamList)??[]).find(i=>i.toUpperCase()===e.toUpperCase())}function Fe(){const e=W("admin"),n=W("sales"),a=W("management"),r=W("valuation");return{isAdminTeam:e,isSalesTeam:n,isManagementTeam:a,isValuationTeam:r}}function te({control:e,name:n,rules:a,label:r,defaultValue:s=!1,...i}){return t.jsx(vt,{control:e,name:n,rules:a,defaultValue:s,render:({field:{value:o,onChange:c},fieldState:{error:l}})=>(l&&console.error("FormCheckbox>>name, error:",n,l),r?t.jsx(Ue,{label:r.text,labelPlacement:(r==null?void 0:r.placement)??"end",control:t.jsx(xe,{...i,onChange:u=>c(u.target.checked),checked:o,name:n,sx:{...i.sx}})}):t.jsx(xe,{...i,onChange:u=>c(u.target.checked),checked:o,name:n}))})}function qt(e){const{color:n,title:a,...r}=e;function s(i){let o="";return typeof n=="string"?o=n:n&&(o=n(i)),o}return t.jsx(Ce,{title:a,children:t.jsx(Ye,{sx:{border:i=>`solid 1px ${s(i)}`,borderRadius:"10px",color:i=>s(i)||i.palette.text.primary},size:"small",...r})})}const Dt=async e=>{var l;const{searchText:n,contactCompanyId:a,ids:r=[],limit:s=50}=e,i=Z([...(l=r==null?void 0:r.filter(Boolean))==null?void 0:l.map(u=>({id:{eq:u}})).filter(Boolean),n&&{fullName:{matchPhrasePrefix:n}}]),o={archived:{ne:!0}};i.length&&(o.or=i),a&&(o.contactCompanyId={eq:a});const c=await ve({key:"searchContacts",variables:{limit:s,filter:o},depthLimit:1});return console.log({query:c}),c},Ot=e=>{const{form:n,name:a="contact",contactCompanyId:r,label:s,placeholder:i,...o}=e,{bind:c}=D({form:n,name:a,queryKey:l=>[l,r],getOptionLabel:l=>(l==null?void 0:l.fullName)??`${l==null?void 0:l.firstName} ${l==null?void 0:l.lastName}`,queryFn:async({queryKey:l})=>{const[{searchText:u,ids:d}]=l,h=await Dt({searchText:u,ids:d,contactCompanyId:r});return h==null?void 0:h.items}});return t.jsx(V,{...c,...o,options:c.options.sort((l,u)=>l.label.localeCompare(u.label)),textFieldProps:{label:s??"Contact",placeholder:i??"Search contact",...o.textFieldProps||{}}})},z=({form:e,name:n="user",...a})=>{const{bind:r}=D({form:e,name:n,queryKey:O.member.search,getOptionLabel:s=>s.fullname,queryFn:async({queryKey:s})=>{const[{searchText:i,ids:o}]=s,c=await At({searchText:i,ids:o,roleName:a.roleName});return c==null?void 0:c.items}});return t.jsx(V,{textFieldProps:{label:"Team Members",placeholder:"Search team member"},options:r.options.sort((s,i)=>s.label.localeCompare(i.label)),...r,...a})},Rt=async e=>{const{parentId:n,salesJobType:a,liveJobStatus:r,variant:s=Q.valuation}=e||{},i=s==="sales";let o;switch(s){case Q.valuation:o=["PROJECT","LAWD_VALUATION"];break;case Q.sales:o=["LAWD_SALES"];break;default:o=["PROJECT","LAWD_VALUATION"]}let c;switch(r){case B.invoiced:c=[B.invoiced];break;case B.lost:c=[B.lost];break;default:c=void 0}const l=await Ke({index:"project",body:{size:999,query:{bool:{must_not:{exists:{field:"archived"}},filter:Z([{terms:{"type.keyword":o}},i&&a&&{terms:{"attributes.salesJobType.keyword":a}},i&&r&&{terms:{"attributes.liveJobStatus.keyword":c}},n&&{term:{"groups.id.keyword":{value:n}}}])}}}});return console.log("@ListProjects",l),Z(l==null?void 0:l.hits.hits.map(d=>d!=null&&d._source?Ge(Qe,d._source):null))},$t=({form:e,name:n="job",...a})=>{const{bind:r}=D({form:e,name:n,queryKey:O.job.search,queryFn:async({queryKey:s})=>{const[{searchText:i}]=s,o=await Rt({variant:"sales"});return i?Lt(o,c=>{var l;return(l=c==null?void 0:c.name)==null?void 0:l.toLowerCase().includes(i.toLowerCase())}):o},getOptionLabel:s=>s.name});return console.log({bind:r}),t.jsx(V,{textFieldProps:{label:a.label??"Sales Job",placeholder:a.placeholder??"Search Sales Job"},...r,...a,options:r.options.sort((s,i)=>s.label.localeCompare(i.label))})},Bt=async e=>{const{index:n,query:a,parameters:r,format:s=!0}=e,i=await we.query({query:Xe,variables:{index:n.join(","),type:"_sql",body:JSON.stringify({query:a,parameters:r})},fetchPolicy:"network-only"});if(!i.data)return null;const o=JSON.parse(i.data.q);if(s){const{schema:c,datarows:l=[]}=o;return l.map(d=>{const h={};return d.forEach((m,C)=>{const{alias:v,name:g}=c[C],x=v||g;h[x]=m}),h})}return o},Nt=async({searchText:e,ids:n=[],companyId:a="",limit:r=50,status:s=[]})=>{const i=[];if(n=n.filter(u=>!!u),e&&i.push(`name LIKE '%${e}%'`),a&&i.push(`companyId = '${a}'`),n.length&&i.push(`id IN ('${n.join("','")}')`),s.length){const u=s.map(d=>`status = '${d}'`).join(" OR ");i.push(`(${u})`)}const o=[];o.push("SELECT * FROM {{ project }}"),i.length&&o.push(`WHERE ${i.join(" OR ")}`),o.push(`LIMIT ${r}`);const c=await Bt({index:["project"],query:o.join(" "),format:!0});return console.log("DEBUG: search project",{result:{items:c},query:o.join(" ")}),{items:c}},Wt=({form:e,name:n="project",...a})=>{const{bind:r}=D({form:e,name:n,queryKey:O.project.search,getOptionLabel:s=>s.name,queryFn:async({queryKey:s})=>{const[{searchText:i,ids:o}]=s,c=await Nt({searchText:i,ids:o});return c==null?void 0:c.items}});return console.log({bind:r}),t.jsx(V,{textFieldProps:{label:a.label??ee("Project",{singular:!0}),placeholder:a.placeholder??`Search ${ee("Project",{singular:!0}).toLowerCase()}`},...r,...a,options:r.options.sort((s,i)=>s.label.localeCompare(i.label))})};function zt(e){return t.jsx(et,{...e,width:"21",height:"21",viewBox:"0 0 21 21",paths:["M9.45825 12.5833V9.45825H11.5416V12.5833H14.6666V14.6666H11.5416V17.7916H9.45825V14.6666H6.33325V12.5833H9.45825ZM18.8333 6.33325V3.20825H16.7499V4.24992H14.6666V3.20825H6.33325V4.24992H4.24992V3.20825H2.16659V6.33325H18.8333ZM18.8333 8.41659H2.16659V18.8333H18.8333V8.41659ZM16.7499 1.12492H18.8333C19.9838 1.12492 20.9166 2.05766 20.9166 3.20825V18.8333C20.9166 19.9838 19.9838 20.9166 18.8333 20.9166H2.16659C1.01599 20.9166 0.083252 19.9838 0.083252 18.8333V3.20825C0.083252 2.05766 1.01599 1.12492 2.16659 1.12492H4.24992V0.083252H6.33325V1.12492H14.6666V0.083252H16.7499V1.12492Z"]})}var ae={},Jt=F;Object.defineProperty(ae,"__esModule",{value:!0});var Ee=ae.default=void 0;Yt(A);var Zt=Jt(_()),Ut=t;function Pe(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,a=new WeakMap;return(Pe=function(r){return r?a:n})(e)}function Yt(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var a=Pe(n);if(a&&a.has(e))return a.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}Ee=ae.default=(0,Zt.default)((0,Ut.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"}),"Apple");function Kt(){return t.jsxs("svg",{width:"22",height:"23",viewBox:"0 0 256 262",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid",children:[t.jsx("path",{d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027",fill:"#4285F4"}),t.jsx("path",{d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1",fill:"#34A853"}),t.jsx("path",{d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782",fill:"#FBBC05"}),t.jsx("path",{d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251",fill:"#EB4335"})]})}function Gt(){return t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[t.jsx("path",{fill:"#03A9F4",d:"M21,31c0,1.104,0.896,2,2,2h17c1.104,0,2-0.896,2-2V16c0-1.104-0.896-2-2-2H23c-1.104,0-2,0.896-2,2V31z"}),t.jsx("path",{fill:"#B3E5FC",d:"M42,16.975V16c0-0.428-0.137-0.823-0.367-1.148l-11.264,6.932l-7.542-4.656L22.125,19l8.459,5L42,16.975z"}),t.jsx("path",{fill:"#0277BD",d:"M27 41.46L6 37.46 6 9.46 27 5.46z"}),t.jsx("path",{fill:"#FFF",d:"M21.216,18.311c-1.098-1.275-2.546-1.913-4.328-1.913c-1.892,0-3.408,0.669-4.554,2.003c-1.144,1.337-1.719,3.088-1.719,5.246c0,2.045,0.564,3.714,1.69,4.986c1.126,1.273,2.592,1.91,4.378,1.91c1.84,0,3.331-0.652,4.474-1.975c1.143-1.313,1.712-3.043,1.712-5.199C22.869,21.281,22.318,19.595,21.216,18.311z M19.049,26.735c-0.568,0.769-1.339,1.152-2.313,1.152c-0.939,0-1.699-0.394-2.285-1.187c-0.581-0.785-0.87-1.861-0.87-3.211c0-1.336,0.289-2.414,0.87-3.225c0.586-0.81,1.368-1.211,2.355-1.211c0.962,0,1.718,0.393,2.267,1.178c0.555,0.795,0.833,1.895,0.833,3.31C19.907,24.906,19.618,25.968,19.049,26.735z"})]})}function Qt(){return t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:t.jsx("path",{fill:"#673AB7",d:"M9,5c0,0,1.4,0.3,2.5,0.3S14,5,14,5l10,17L34.1,5c0,0,1.1,0.4,2.4,0.4C37.9,5.4,39,5,39,5L26,27l0.4,16c0,0-1.4-0.4-2.4-0.4S21.5,43,21.5,43L22,27L9,5z"})})}const Xt=({form:e})=>{const n={apple:{label:"Apple Calendar",logo:Ee},google:{label:"Google Calendar",logo:Kt},outlook:{label:"Outlook",logo:Gt},yahoo:{label:"Yahoo",logo:Qt}},[a,r]=j.useState(null),s=A.useCallback(d=>{const[h,m]=e.getValues(["when","subject"]),v=d.target.closest(".MuiListItem-button").getAttribute("name"),g=window.location.href,x=h.substring(0,10),y=`https://calndr.link/d/event/?service=${v}&start=${x}&title=${m}&description=${g}`;window.open(y,"_blank")},[e]),i=d=>{r(d.currentTarget)},o=()=>{r(null)},c=!!a,l=c?"activity-form-add-to-calendar-button":void 0,u=U({control:e.control,name:"subject"});return t.jsxs(t.Fragment,{children:[t.jsxs(S,{variant:"outlined",disabled:!u,onClick:i,children:[t.jsx(zt,{})," Add to Calendar"]}),t.jsx(tt,{id:l,open:c,anchorEl:a,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:t.jsx(nt,{children:t.jsx(f,{minWidth:"200px",children:t.jsx(rt,{children:Object.keys(n).map(d=>{const h=n[d].logo;return t.jsxs(Tt,{name:d,onClick:s,children:[t.jsx(Mt,{children:n[d].logo&&t.jsx(h,{})}),t.jsx(at,{primary:n[d].label})]},d)})})})})})]})},X=({form:e,options:n,field:a,fieldLabel:r,fieldPlaceholder:s,sx:i={}})=>{const[o]=Se(["kwActivityType"]),c="type",l=A.useMemo(()=>{var u;return(u=o==null?void 0:o.kwActivityType)==null?void 0:u.map(d=>({label:M(d),value:d.toLowerCase()}))},[o]);return t.jsx(V,{control:e.control,name:a??c,textFieldProps:{label:r??"Select type",placeholder:s??"Select type"},options:n??l,onOptionSelected:(u,d)=>!d&&e.setValue(a??c,""),sx:i})},en=({form:e,sx:n={}})=>{const a=A.useMemo(()=>["pending","inProgress","done","missed"].map(r=>({label:ge.startCase(r),value:r})),[]);return t.jsx(V,{control:e.control,name:"status",textFieldProps:{label:"Select status",placeholder:"Select status"},options:a,sx:n})},tn=({form:e})=>{const n=U({control:e.control,name:"isRepeatingActivity"}),a=U({control:e.control,name:"repeat.period"});return A.useEffect(()=>{var o;const[r,s]=e.getValues(["when","repeatSetting"]),i=JSON.parse(s||"{}");(o=Object.keys(i))!=null&&o.length&&e.reset({isRepeatingActivity:!0,repeatDate:r,repeat:i})},[e]),n?t.jsxs(t.Fragment,{children:[t.jsx(f,{children:t.jsx(te,{control:e.control,name:"isRepeatingActivity",label:{text:"Is Repeating Activity?",placement:"start"}})}),t.jsxs(f,{children:[t.jsx(_e,{control:e.control,name:"repeatDate",textFieldProps:{label:"Repeat Date",placeholder:"DD/MM/YYYY"}}),t.jsx(q,{fullWidth:!0,control:e.control,name:"repeat.every",label:"Period Rate",placeholder:"Enter period rate",inputProps:{type:"number",maxLength:"2",inputMode:"numeric",pattern:"[0-9]*",min:1},defaultValue:1}),t.jsx(V,{control:e.control,name:"repeat.period",textFieldProps:{label:"Select period",placeholder:"Select period"},options:["day","week","month","year"].map(r=>({label:ge.startCase(r),value:r})),defaultValue:"day"}),a==="week"&&t.jsx(V,{control:e.control,name:"repeat.weekDay",textFieldProps:{label:"Select week day",placeholder:"Select week day"},autoSelect:!0,options:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((r,s)=>({label:r,value:s+1}))})]})]}):t.jsx(f,{children:t.jsx(te,{control:e.control,name:"isRepeatingActivity",label:{text:"Is Repeating Activity?",placement:"start"}})})},nn="settings/email/templates",rn=async e=>{var c;console.log({result:e});const n=await e.Body.text(),a=it((c=e==null?void 0:e.Metadata)==null?void 0:c.params),r=(a==null?void 0:a.fields)??{},s=/\{\{(?<field>[^}]+)\}\}/gm,i=/([{}]+)/gm,o=n.replaceAll(s,l=>{const u=l.replaceAll(i,"");return(r==null?void 0:r[u])??""});return{html:n,fields:r,replacedHtml:o}},an=async e=>{var s,i,o;const n=await Le.get(e,{download:!0,cacheControl:"no-cache",contentType:"text/html"}),a=await rn(n),r=(o=(i=(s=e.split(nn))==null?void 0:s[1])==null?void 0:i.replace(".html",""))==null?void 0:o.replace("/","");return console.log({path:e,label:r}),{...a,label:r,value:e}},sn=({onSuccess:e})=>{const[n,a]=A.useState("");console.log({templateId:n});const r=Ae({queryKey:[O.settingEmailTemplate.get(n)],queryFn:()=>an(n),onSuccess:s=>{e==null||e({...s,id:n})},enabled:!!n,refetchOnWindowFocus:!1});return{templateId:n,setTemplateId:a,templateQuery:r}},on=({title:e,editorRef:n,initialEditType:a="wysiwyg",...r})=>t.jsxs(f,{children:[e&&t.jsx(b,{variant:"subtitle1",sx:{textDecoration:"underline"},children:e}),t.jsx(st,{children:t.jsx(ot.Editor,{usageStatistics:!1,previewStyle:"vertical",initialEditType:a,useCommandShortcut:!0,ref:n,hideModeSwitch:!0,...r})})]}),je="settings/email/templates",cn=async()=>{const e=await Le.list(je,{download:!0,cacheControl:"no-cache",contentType:"text/html"});return e==null?void 0:e.map(a=>{var r,s,i;return{name:(i=(s=(r=a.key.split(je))==null?void 0:r[1])==null?void 0:s.replace(".html",""))==null?void 0:i.replace("/",""),id:a.key}})},ln=({form:e,name:n="templates",...a})=>{const{bind:r}=D({form:e,name:n,queryKey:O.settingEmailTemplate.all,getOptionLabel:s=>s.name,queryFn:async()=>cn()});return t.jsx(V,{textFieldProps:{label:"Email Template",placeholder:"Search template"},...r,...a})},dn=({templateDataRef:e,editorRef:n})=>{const{globalState:{authUser:a}}=ct(),r=async()=>{var d,h,m,C,v,g,x;const s=((m=(h=(d=e.current)==null?void 0:d.fields)==null?void 0:h.emailBccs)==null?void 0:m.split(","))??[],i=lt(a==null?void 0:a.email,{subject:(v=(C=e.current)==null?void 0:C.fields)==null?void 0:v.emailSubject,cc:(x=(g=e.current)==null?void 0:g.fields)==null?void 0:x.emailCcs,bcc:s}),c=n.current.getInstance().getHtml(),l=jn(c),u=`${i.href}&body=${encodeURIComponent(l)}`;window.open(u)};return t.jsx(f,{mt:2,display:"flex",justifyContent:"flex-end",children:t.jsx(S,{variant:"contained",onClick:r,children:"Email Directly"})})},un=({form:e})=>{const n=re(),a=A.useRef(),r=A.useRef(),{field:s}=wt({name:"details",control:e.control,rules:{required:!0}}),{setTemplateId:i,templateQuery:{isFetching:o}}=sn({onSuccess:({replacedHtml:c,html:l,fields:u})=>{var d;(d=a.current)==null||d.getInstance().setHtml(c),e.setValue("subject",(u==null?void 0:u.emailSubject)??""),e.setValue("details",c),r.current={html:l,fields:u,replacedHtml:c}}});return t.jsx(t.Fragment,{children:t.jsxs(f,{children:[o&&t.jsx(f,{children:"Loading... Template"}),t.jsx(f,{children:t.jsx(ln,{form:n,onOptionSelected:(c,l)=>i(l==null?void 0:l.id)})}),t.jsx(on,{title:"Details",editorRef:a,initialValue:s.value,onChange:()=>{var l;const c=(l=a.current)==null?void 0:l.getInstance().getHtml();console.log("EDITOR",{result:c}),s.onChange(c)}}),t.jsx(dn,{templateDataRef:r,editorRef:a})]})})},hn=({form:e,sx:n={}})=>{const a=U({control:e.control,name:"type"});return console.log({watchType:a}),t.jsx(t.Fragment,{children:a==="email"?t.jsx(un,{form:e}):t.jsx(q,{fullWidth:!0,multiline:!0,control:e.control,name:"details",label:"Details",placeholder:"Enter details",clearable:!0,clearFn:()=>e.setValue("details",""),sx:n})})},mn=({form:e})=>t.jsx(te,{control:e.control,name:"isFollowUp",label:{text:"Should Follow Up?",placement:"start"}}),pn=async(e,n=!1)=>{await dt(e.map(a=>({...a,__typename:"Activity",id:n?void 0:a.id})))};var ie={},xn=F;Object.defineProperty(ie,"__esModule",{value:!0});var ke=ie.default=void 0,yn=xn(_()),J=t;ke=ie.default=(0,yn.default)([(0,J.jsx)("path",{d:"M14 12h4v1.5h-4zm0 3h4v1.5h-4z"},"0"),(0,J.jsx)("path",{d:"M20 7h-5V4c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2m-9 0V4h2v5h-2zm9 13H4V9h5c0 1.1.9 2 2 2h2c1.1 0 2-.9 2-2h5z"},"1"),(0,J.jsx)("circle",{cx:"9",cy:"13.5",r:"1.5"},"2"),(0,J.jsx)("path",{d:"M11.08 16.18c-.64-.28-1.34-.43-2.08-.43s-1.44.15-2.08.43c-.56.24-.92.78-.92 1.39V18h6v-.43c0-.61-.36-1.15-.92-1.39"},"3")],"BadgeOutlined");function fn({onSaved:e,style:n,onToggle:a,awaitEsRecord:r=!0,spannedButton:s=!0,Icon:i}){const o=j.useRef(null),c=j.useCallback(()=>{o.current.open()},[]),l=i||ke,u=j.useCallback((...h)=>{o.current.close(),e&&e(...h)},[e]),d=j.useCallback(()=>{o.current.close()},[]);return t.jsxs(t.Fragment,{children:[t.jsx(Ce,{title:"Create Business Card",children:s?t.jsx(S,{variant:"contained",color:"primary",onClick:c,style:n,children:t.jsx(f,{component:"span",mt:"5px",children:t.jsx(l,{})})}):t.jsx(S,{variant:"contained",color:"primary",onClick:c,style:n,children:t.jsx(l,{})})}),t.jsx(ut,{onToggle:a,scroll:"body",maxWidth:"md",variant:"dialog",ref:o,dialogProps:{maxWidth:"sm",fullWidth:!0},children:t.jsx(ht,{onSaved:u,onCancel:d,awaitEsRecord:r})})]})}const jn=e=>{const n=document.createElement("span");return n.innerHTML=e,n.textContent||n.innerText},gn=({id:e,initialValues:n,handleClose:a,handleSubmit:r,handleDelete:s,formOnProject:i,contactId:o,viewMode:c})=>{var he,me;const l=mt(),{enqueueSnackbar:u}=ne(),d=Pt(),{enquiry:h,user:m,project:C,salesJob:v,lawdUser:g}=be("ACTIVITY_FORM_FIELDS").value,{isSalesTeam:x,isValuationTeam:y,isAdminTeam:Y}=Fe(),[T]=Se(["lawddevKwActivityType","lawddevKwEnquiryType"]),R=T==null?void 0:T.lawddevKwActivityType.map(I=>({label:M(I),value:I.toLowerCase()})),E=T==null?void 0:T.lawddevKwEnquiryType.map(I=>({label:M(I),value:I.toLowerCase()})),p=re({resolver:St(pt),defaultValues:{...n,activityProjectId:(he=n==null?void 0:n.project)==null?void 0:he.id}}),H=p.watch("type"),$=j.useMemo(()=>H==="enquiry",[H]);Ht((me=p==null?void 0:p.formState)==null?void 0:me.isDirty,"You have unsaved changes, are you sure?");const He=p.handleSubmit(async(I,qe)=>{try{const{isRepeatingActivity:K,isFollowUp:De,repeat:pe,activityContactId:Oe,activityTeamMemberId:Re,...$e}=p.getValues(),Be={...$e,repeatSetting:K&&pe?JSON.stringify({...pe,key:`${ye.v4().split("-").pop()}${new Date().getMilliseconds()}`}):void 0,source:De?`FOLLOW_UP:${e||ye.v4()}`:void 0,activityContactId:Oe,activityTeamMemberId:Re},Ne=await(r==null?void 0:r(Be,qe));return l.refetchQueries({include:["ListActivities"]}),u("Activity successfully saved",{variant:"success"}),p.reset(),Ne}catch(K){console.error(K),u("Activity failed to save",{variant:"error"})}},I=>{console.error(I),console.error({formValues:p.getValues()}),u("There are still errors on the form",{variant:"error"})}),w=c?{pointerEvents:"none"}:{};return t.jsx(t.Fragment,{children:t.jsxs(f,{children:[!c&&t.jsx(N,{container:!0,spacing:2,justifyContent:"flex-end",children:t.jsx(N,{item:!0,children:t.jsx(Xt,{form:p})})}),e&&!c&&t.jsx(N,{container:!0,spacing:2,justifyContent:"flex-end",children:t.jsx(N,{item:!0,children:t.jsx(mn,{form:p})})}),t.jsxs("form",{onSubmit:He,children:[h.show?t.jsxs(t.Fragment,{children:[t.jsx(X,{form:p,options:R,sx:w}),$&&t.jsx(X,{form:p,options:E!=null&&E.length?E:[],field:"enquiryType",fieldLabel:"Enquiry type",fieldPlaceholder:"Enquiry type",sx:w})]}):t.jsx(X,{form:p,sx:w}),t.jsx(q,{fullWidth:!0,control:p.control,name:"subject",label:"Subject",placeholder:"Enter subject",sx:w,clearable:!0,clearFn:()=>p.setValue("subject","")}),t.jsx(en,{form:p,sx:w}),t.jsx(_e,{control:p.control,name:"when",textFieldProps:{label:"When",placeholder:"DD/MM/YYYY",disabled:c},sx:w}),m.show&&t.jsx(z,{form:p,name:"activityTeamMemberId",sx:w}),g.show&&t.jsxs(t.Fragment,{children:[x&&t.jsx(z,{form:p,name:"activityTeamMemberId",roleName:"sales",sx:w}),y&&t.jsx(z,{form:p,name:"activityTeamMemberId",roleName:"valuer",sx:w}),Y&&t.jsx(z,{form:p,name:"activityTeamMemberId",sx:w})]}),!o&&t.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",columnGap:1},children:[t.jsx(Ot,{form:p,name:"activityContactId",sx:{width:1,...w}}),t.jsx(fn,{style:{paddingTop:"3px",paddingBottom:"3px",marginTop:"8px",borderRadius:"5px"}})]}),!i&&C.show&&t.jsx(Wt,{form:p,name:"activityProjectId",sx:w}),!i&&v.show&&t.jsx($t,{form:p,name:"activityProjectId",sx:w}),t.jsx(hn,{form:p,sx:w}),!c&&t.jsx(tn,{form:p}),t.jsxs(f,{sx:{display:"grid",gap:2,mt:2,gridTemplateColumns:"1fr auto auto"},children:[s&&t.jsx(S,{variant:"outlined",color:"error",sx:{justifySelf:"start"},disabled:d.loading,onClick:d.action(s),children:"Delete"}),t.jsx(S,{variant:"outlined",disabled:d.loading,onClick:a,sx:{width:c?300:"inherit"},children:c?"Close":"Cancel"}),!c&&t.jsx(S,{variant:"contained",type:"submit",disabled:p.formState.isSubmitting||d.loading,children:"Save Activity"})]})]})]})})};function bn(e){return{activityCompanyId:e==null?void 0:e.activityCompanyId,activityContactId:e==null?void 0:e.activityContactId,activityProjectId:e==null?void 0:e.activityProjectId,activityTeamMemberId:e==null?void 0:e.activityTeamMemberId,details:e==null?void 0:e.details,repeatSetting:e==null?void 0:e.repeatSetting,source:e==null?void 0:e.source,status:e==null?void 0:e.status,subject:e==null?void 0:e.subject,type:e==null?void 0:e.type,when:e==null?void 0:e.when}}const P1=({id:e,open:n,handleClose:a,handleSubmit:r,handleDelete:s,initialValues:i,loading:o,projectId:c,formOnProject:l=!1,contactId:u,viewMode:d})=>{const{isSalesTeam:h}=Fe();return t.jsxs(Te,{open:n,onClose:a,maxWidth:"sm",fullWidth:!0,children:[t.jsxs(Me,{children:[d?"View":e?"Update":"Add"," Activity"]}),t.jsxs(Ve,{children:[o&&t.jsx(f,{children:"Loading..."}),!o&&t.jsx(gn,{id:e,viewMode:d,contactId:u,formOnProject:l,initialValues:i,handleDelete:e?s:null,handleClose:a,handleSubmit:async m=>{const C=m==null?void 0:m.isFollowUp,v=(m==null?void 0:m.activityProjectId)??c,g=(m==null?void 0:m.activityContactId)??u,x={};h&&(m!=null&&m.enquiryType)&&(x.attributes=JSON.stringify({enquiryType:m==null?void 0:m.enquiryType})),await pn([{...bn(m),id:e,activityProjectId:v,activityContactId:g,__typename:"Activity",...x}],C),r==null||r(m)}})]})]})};function k1(e){const{onDelete:n,message:a,title:r,tooltip:s,IconButtonProps:i}=e,[o,c]=j.useState(!1),l=xt();async function u(){if(c(!0),!await l({title:r??"Delete",options:{width:"400px"},content:h=>t.jsxs("div",{children:[t.jsx(b,{children:a??"Are you sure you want to proceed?"}),t.jsxs(f,{textAlign:"right",m:2,mr:0,children:[t.jsx(S,{onClick:()=>{h.close()},children:"Cancel"}),t.jsx(f,{component:"span",mr:2}),t.jsx(S,{variant:"contained",color:"primary",size:"small",onClick:()=>{h.submit(!0)},children:"Continue"})]})]})})){c(!1);return}await Promise.resolve(n()),c(!1)}return t.jsx(qt,{title:s??"Delete",color:d=>d.palette.error.light,disabled:o,onClick:u,...i,children:t.jsx(Vt,{})})}const Cn=e=>{const{defaultState:n,onStateChange:a}=e||{},[r,s]=j.useState({isEditing:(n==null?void 0:n.isEditing)||!1,isSaving:(n==null?void 0:n.isSaving)||!1,canSave:(n==null?void 0:n.canSave)||!0}),i=j.useRef({});return i.current.updateState=o=>{s(c=>{const l={...c,...o};return a==null||a(l),l})},{state:r,setEditing:j.useCallback(o=>{i.current.updateState({isEditing:o})},[]),setSaving:j.useCallback(o=>{i.current.updateState({isSaving:o})},[]),setCanSave:j.useCallback(o=>{i.current.updateState({canSave:o})},[])}};function vn(){const e=j.useContext(yt);if(!e.control)throw new Error("Control not defined");return e}function wn(e){const{keyword:n}=e,{data:a=[]}=Ae({enabled:!!n,queryKey:["SEARCH_PROJECT_BY_NAME",n],queryFn:async()=>{var s;const r=await ve({key:"searchProjects",variables:{filter:{name:{wildcard:`*${n}*`}}}});return Z((s=r==null?void 0:r.items)==null?void 0:s.map(i=>i==null?void 0:i.id))}});return a}const Sn=e=>{var g;const{qParams:n,activityOpportunityId:a,activityProjectId:r,activityContactId:s,userId:i,companyId:o}=e,c=Ft({model:"Activity",keyword:n.search}),l=wn({keyword:n.search}),u=j.useMemo(()=>{const x={archived:{ne:!0}};return n.search&&n.search.length>2&&G(x,"or.0",{or:[{subject:{matchPhrasePrefix:n.search}},{details:{matchPhrasePrefix:n.search}},...(c||[]).map(y=>({id:{eq:y.id}})),...(l||[]).map(y=>({activityProjectId:{eq:y}}))]}),n.locationId&&G(x,"location.id.eq",n.locationId),n.userId&&G(x,"activityTeamMemberId.eq",n.userId),n.status&&(n.status==="unactioned"?x.status={ne:"done"}:x.status={eq:n.status}),s&&(x.activityContactId={eq:s}),r&&(x.activityProjectId={eq:r}),a&&(x.activityOpportunityId={eq:a}),i&&(x.activityTeamMemberId={eq:i}),o&&(x.activityCompanyId={eq:o}),x},[s,a,r,o,n.locationId,n.search,n.status,n.userId,c,l,i]),d=ft(Ie`
      query ListActivities($nextToken: String, $filter: AWSJSON, $sort: AWSJSON) {
        searchActivitys: nestedSearch(
          type: "Activity"
          filter: $filter
          nextToken: $nextToken
          sort: $sort
          limit: 30
        ) {
          nextToken
          items {
            ... on Activity {
              id
              type
              subject
              details
              status
              when
              source
              activityContactId
              activityTeamMemberId
              activityCompanyId
              attributes
              contact {
                id
                firstName
                lastName
                profilePhoto
                email
                mobileNumber
                telephoneNumber
              }
              teamMember {
                id
                fullname
                profilePhoto
                position
              }
              project {
                id
                name
              }
            }
          }
        }
      }
    `,{variables:{filter:JSON.stringify(u),sort:JSON.stringify({field:"when",direction:"desc"})},fetchPolicy:"network-only",nextFetchPolicy:"cache-first"}),{data:h,loading:m}=d,C=_t({...d,model:"Activity",op:"search",maxLength:5});return{activities:j.useMemo(()=>{var x;return(x=h==null?void 0:h.searchActivitys)!=null&&x.items?h.searchActivitys.items.map(y=>{var E,p,H,$;const Y=(E=y==null?void 0:y.contact)==null?void 0:E.email,T=(p=y==null?void 0:y.contact)==null?void 0:p.telephoneNumber,R=(H=y==null?void 0:y.contact)==null?void 0:H.mobileNumber;return{...y,contactEmail:Y,contactNumber:R||T||"",sourceAndJob:{source:(y==null?void 0:y.source)??"",job:(($=y==null?void 0:y.project)==null?void 0:$.name)??""}}}):[]},[(g=h==null?void 0:h.searchActivitys)==null?void 0:g.items]),refetch:d.refetch,loading:m,more:C.more}},H1={useListActivities:Sn,async deleteActivity(e){await jt([{id:e,__typename:"Activity",__op:"delete"}],{waitEs:!0})},filterActivities:(e,n,a,r,s,i,o)=>{const c={archived:{ne:!0}};return e.search&&e.search.length>2&&(c.or=[{subject:{matchPhrasePrefix:e.search}},{details:{matchPhrasePrefix:e.search}},...(n||[]).map(l=>({id:{eq:l.id}}))]),e.locationId&&(c.location={id:{eq:e.locationId}}),e.userId&&(c.activityTeamMemberId={eq:e.userId}),e.status&&(e.status==="unactioned"?c.status={ne:"done"}:c.status={eq:e.status}),a&&(c.activityContactId={eq:a}),r&&(c.activityProjectId={eq:r}),s&&(c.activityOpportunityId={eq:s}),i&&(c.activityTeamMemberId={eq:i}),o&&(c.activityCompanyId={eq:o}),c}};function q1(e){var m,C,v,g;const{open:n,handleClose:a,data:r,maxWidth:s="sm",fullWidth:i=!0}=e,{enquiry:o,source:c,contactEmail:l,contactNumber:u}=be("ACTIVITY_FORM_FIELDS").value,d=Cn(),h={isLoading:r===void 0};return t.jsx(Te,{open:n,onClose:a,maxWidth:s,fullWidth:i,children:t.jsxs(gt,{control:d,context:h,children:[t.jsx(Me,{children:"View Activity"}),t.jsxs(Ve,{children:[t.jsx(Ln,{type:r==null?void 0:r.type}),o.show&&t.jsx(An,{type:r==null?void 0:r.enquiryType}),c.show&&t.jsx(Tn,{source:r==null?void 0:r.source}),t.jsx(Mn,{subject:r==null?void 0:r.subject}),t.jsx(Vn,{date:r==null?void 0:r.when}),t.jsx(In,{fname:(m=r==null?void 0:r.contact)==null?void 0:m.firstName,lname:(C=r==null?void 0:r.contact)==null?void 0:C.lastName}),l.show&&t.jsx(_n,{email:r==null?void 0:r.contactEmail}),u.show&&t.jsx(Fn,{number:r==null?void 0:r.contactNumber}),t.jsx(En,{proj:(v=r==null?void 0:r.project)==null?void 0:v.name}),t.jsx(Pn,{member:(g=r==null?void 0:r.teamMember)==null?void 0:g.fullname}),t.jsx(kn,{details:r==null?void 0:r.details})]}),t.jsx(bt,{children:t.jsx(S,{variant:"contained",onClick:a,children:"Close"})})]})})}const L=e=>{const{fieldLabel:n,children:a,width:r,height:s}=e,{context:i}=vn();return t.jsxs(f,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",mb:1.25},children:[t.jsx(b,{variant:"caption",sx:{color:"text.secondary"},children:n}),i.isLoading?t.jsx(Et,{animation:!1,width:r,height:s}):a]})},Ln=({type:e})=>t.jsx(L,{fieldLabel:"Type",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e?M(e):"-"})}),An=({type:e})=>t.jsx(L,{fieldLabel:"Enquiry Type",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e?M(e):"-"})}),Tn=({source:e})=>t.jsx(L,{fieldLabel:"Source",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e})}),Mn=({subject:e})=>t.jsx(L,{fieldLabel:"Subject",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e?M(e):"-"})}),Vn=({date:e})=>t.jsx(L,{fieldLabel:"When",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e?ze(new Date(e),"MMM dd, yyyy"):"-"})}),In=({fname:e,lname:n})=>t.jsx(L,{fieldLabel:"Contact",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e?`${M(e)} ${M(n??"")}`:"-"})}),_n=({email:e})=>t.jsx(L,{fieldLabel:"Contact Email",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e})}),Fn=({number:e})=>t.jsx(L,{fieldLabel:"Contact Number",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e})}),En=({proj:e})=>t.jsx(L,{fieldLabel:ee("Project",{singular:!0})||"",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e})}),Pn=({member:e})=>t.jsx(L,{fieldLabel:"Team Member",width:150,height:34,children:t.jsx(b,{variant:"subtitle1",children:e?M(e):"-"})}),kn=({details:e})=>t.jsx(L,{fieldLabel:"Details",width:150,height:34,children:t.jsx(b,{component:"pre",sx:{overflowX:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word"},children:e})});function Hn(e){const n=e.gradient&&!e.gradient.disabled;return t.jsxs(P,{...e,children:[t.jsx("g",{fill:n?"url(#linear)":"inherit",children:t.jsx("path",{d:"M10.9745 6.25443C11.5605 6.90396 11.3747 7.63981 10.8566 8.33802C10.7337 8.50356 10.5921 8.66666 10.4211 8.84639C10.3391 8.93266 10.2751 8.99754 10.1412 9.13155C9.83714 9.43589 9.58155 9.69161 9.37441 9.89874C9.27396 9.99918 9.95978 11.3697 11.2908 12.702C12.621 14.0335 13.9914 14.7198 14.0924 14.6188L14.8586 13.8522C15.2806 13.4298 15.504 13.226 15.8111 13.0246C16.4495 12.6058 17.1458 12.492 17.733 13.0171C19.6504 14.3886 20.7354 15.2302 21.267 15.7825C22.3038 16.8598 22.1679 18.5181 21.2729 19.4641C20.9625 19.7921 20.569 20.1859 20.1042 20.634C17.2926 23.4471 11.359 21.7351 6.81145 17.1831C2.26291 12.6301 0.551877 6.69589 3.35753 3.88873C3.86122 3.37712 4.0273 3.21113 4.51785 2.72777C5.43118 1.82784 7.16595 1.68693 8.22051 2.72866C8.77521 3.27662 9.65955 4.41445 10.9745 6.25443ZM16.2722 15.2662L15.5058 16.0331C14.2031 17.3365 11.9845 16.2254 9.87703 14.1159C7.76808 12.0048 6.65827 9.78712 7.96142 8.48408C8.16829 8.27723 8.42363 8.02174 8.72744 7.71764C8.85002 7.59494 8.90609 7.5381 8.97339 7.46737C9.06509 7.37099 9.14044 7.28635 9.20077 7.21145C8.0354 5.58811 7.2432 4.57376 6.81614 4.15189C6.59558 3.93401 6.10172 3.97413 5.92042 4.15278C5.43686 4.62924 5.27792 4.7881 4.77626 5.29761C2.97194 7.10291 4.35321 11.8934 8.22519 15.7692C12.096 19.6438 16.8858 21.0257 18.7038 19.2069C19.1614 18.7656 19.5342 18.3925 19.8212 18.0892C20.0286 17.87 20.0657 17.4177 19.8271 17.1698C19.4298 16.757 18.457 15.9985 16.7774 14.7923C16.6549 14.8909 16.5044 15.0338 16.2722 15.2662Z"})}),e.gradient&&k(e.gradient)]})}function qn(e){const n=e.gradient&&!e.gradient.disabled;return t.jsxs(P,{...e,children:[t.jsx("g",{fill:n?"url(#linear)":"inherit",children:t.jsx("path",{d:"M21 7.38247V5H3V7.38199L12 11.8825L21 7.38247ZM21 9.61853L12 14.1185L3 9.61811V19H21V9.61853ZM3 3H21C22.1046 3 23 3.89543 23 5V19C23 20.1046 22.1046 21 21 21H3C1.89543 21 1 20.1046 1 19V5C1 3.89543 1.89543 3 3 3Z"})}),e.gradient&&k(e.gradient)]})}function Dn(e){const n=e.gradient&&!e.gradient.disabled;return t.jsxs(P,{...e,children:[t.jsx("g",{fill:n?"url(#linear)":"inherit",children:t.jsx("path",{d:"M15.1027 5.22654C14.6669 5.22961 14.2341 5.25109 13.7768 5.37386C13.3195 5.49663 12.8622 5.69306 12.3772 6.01225C11.7757 5.65929 11.1925 5.36772 10.6339 5.3002C9.94029 5.21426 9.29576 5.2603 8.54688 5.27564C7.65988 5.29406 7.0798 5.7483 6.14062 6.11047C5.20145 6.47263 3.99219 6.82252 2.28571 6.82252H1.5V14.385L1.94196 14.606L3.39062 15.3181L8.54688 21.0636L8.57143 21.0881C9.16071 21.6713 9.95564 21.8155 10.6585 21.7756C11.3613 21.7357 12.0212 21.5301 12.5491 21.2109C13.7093 20.5111 16.8705 18.3136 16.8705 18.3136L16.9442 18.2645L16.9933 18.2154C17.3677 17.844 17.555 17.3898 17.6808 16.914L20.7009 15.3917L22.9598 14.6306L23.5 14.4587V6.82252H22.7143C21.0109 6.82252 19.7985 6.45422 18.8594 6.08591C17.9202 5.71761 17.3493 5.26951 16.4531 5.25109C15.9743 5.24188 15.5385 5.22347 15.1027 5.22654ZM15.1272 6.79797C15.4802 6.7949 15.8884 6.81331 16.404 6.82252C16.4869 6.82559 17.2419 7.14785 18.2946 7.55913C19.1847 7.90902 20.4216 8.219 21.9286 8.32029V13.3292L20.1116 13.9431H20.0625L20.0134 13.9676L17.6317 15.1707C17.4997 14.8116 17.3186 14.4802 17.0424 14.1886L16.9933 14.1149L13.654 10.0145L13.1629 9.40064L12.5491 9.89172L10.4375 11.6105C9.72852 12.1015 9.15458 11.9604 8.57143 11.6841C8.40262 11.6043 8.41183 11.5798 8.27679 11.4877L11.8616 8.51672L11.9107 8.46761C12.9757 7.41181 13.6295 7.04657 14.1942 6.89618C14.4766 6.81945 14.7743 6.80103 15.1272 6.79797ZM9.65179 6.82252C9.95257 6.81638 10.2042 6.81945 10.4375 6.84707C10.6431 6.87163 10.8764 7.04657 11.0759 7.11716C10.9961 7.19082 10.9378 7.23379 10.8549 7.31359C10.8365 7.33201 10.8242 7.34428 10.8058 7.3627L6.50893 10.923L5.84598 11.4631L6.43527 12.077C6.43527 12.077 7.00307 12.6908 7.88393 13.1082C8.76479 13.5256 10.1244 13.762 11.346 12.9118L11.3951 12.8627L12.9174 11.6105L15.8147 15.1707L15.8393 15.2198L15.8638 15.2444C16.3825 15.757 16.3703 16.5641 15.8638 17.0859C15.8577 17.0921 15.87 17.1043 15.8638 17.1105C15.8577 17.1135 15.7533 17.1749 15.7411 17.1841L14.7098 15.7846L13.433 16.7176L14.4397 18.0681C14.0315 18.3443 13.8474 18.4885 13.4085 18.7801L12.3527 17.356L11.0759 18.289L12.0826 19.6395C11.9936 19.6947 11.8094 19.8175 11.7388 19.8605C11.4902 20.0109 11.0114 20.1797 10.5848 20.2042C10.1828 20.2257 9.87584 20.1336 9.72545 20.0078L9.70089 19.9832L4.44643 14.164L4.34821 14.0413L3.07143 13.4029V8.32029C4.57227 8.22207 5.81836 7.92436 6.70536 7.58368C7.75502 7.18162 8.50391 6.85014 8.59598 6.84707C8.99805 6.83787 9.351 6.82866 9.65179 6.82252Z"})}),e.gradient&&k(e.gradient)]})}function On(e){const n=e.gradient&&!e.gradient.disabled;return t.jsxs(P,{...e,children:[t.jsx("g",{fill:n?"url(#linear)":"inherit",children:t.jsx("path",{d:"M15 3.41421V7H18.5858L15 3.41421ZM19 9H15C13.8954 9 13 8.10457 13 7V3H5V21H19V9ZM5 1H15.4142L21 6.58579V21C21 22.1046 20.1046 23 19 23H5C3.89543 23 3 22.1046 3 21V3C3 1.89543 3.89543 1 5 1ZM8 17V15H14V17H8ZM8 13V11H16V13H8Z"})}),e.gradient&&k(e.gradient)]})}function Rn(e){const n=e.gradient&&!e.gradient.disabled;return t.jsxs(P,{...e,children:[t.jsx("g",{fill:n?"url(#linear)":"inherit",children:t.jsx("path",{d:"M6,15A2,2 0 0,1 4,17A2,2 0 0,1 2,15A2,2 0 0,1 4,13H6V15M7,15A2,2 0 0,1 9,13A2,2 0 0,1 11,15V20A2,2 0 0,1 9,22A2,2 0 0,1 7,20V15M9,7A2,2 0 0,1 7,5A2,2 0 0,1 9,3A2,2 0 0,1 11,5V7H9M9,8A2,2 0 0,1 11,10A2,2 0 0,1 9,12H4A2,2 0 0,1 2,10A2,2 0 0,1 4,8H9M17,10A2,2 0 0,1 19,8A2,2 0 0,1 21,10A2,2 0 0,1 19,12H17V10M16,10A2,2 0 0,1 14,12A2,2 0 0,1 12,10V5A2,2 0 0,1 14,3A2,2 0 0,1 16,5V10M14,18A2,2 0 0,1 16,20A2,2 0 0,1 14,22A2,2 0 0,1 12,20V18H14M14,17A2,2 0 0,1 12,15A2,2 0 0,1 14,13H19A2,2 0 0,1 21,15A2,2 0 0,1 19,17H14Z"})}),e.gradient&&k(e.gradient)]})}function $n(e){const n=e.gradient&&!e.gradient.disabled;return t.jsxs(P,{...e,children:[t.jsx("g",{fill:n?"url(#linear)":"inherit",children:t.jsx("path",{d:"M7 1H17C18.1046 1 19 1.89543 19 3V21C19 22.1046 18.1046 23 17 23H7C5.89543 23 5 22.1046 5 21V3C5 1.89543 5.89543 1 7 1ZM10 3H7V21H17V3H14C14 3.55228 13.5523 4 13 4H11C10.4477 4 10 3.55228 10 3Z"})}),e.gradient&&k(e.gradient)]})}function Bn(e){const n=e.gradient&&!e.gradient.disabled;return t.jsxs(P,{...e,children:[t.jsx("g",{fill:n?"url(#linear)":"inherit",children:t.jsx("path",{d:"M21 4V14C21 15.1046 20.1046 16 19 16H13V17.4338L17.5145 20.1425L16.4855 21.8575L13 19.7662V22H11V19.7662L7.5145 21.8575L6.4855 20.1425L11 17.4338V16H5C3.89543 16 3 15.1046 3 14V4H2V2H22V4H21ZM5 4V14H19V4H5ZM10 12H8V8H10V12ZM13 12H11V6H13V12ZM16 12H14V9H16V12Z"})}),e.gradient&&k(e.gradient)]})}const D1={email:qn,phone:Hn,meeting:Dn,proposal:On,slack:Rn,sms:$n,demo:Bn};var se={},Nn=F;Object.defineProperty(se,"__esModule",{value:!0});var Wn=se.default=void 0,zn=Nn(_()),Jn=t;Wn=se.default=(0,zn.default)((0,Jn.jsx)("path",{d:"M9 11h3.63L9 15.2V17h6v-2h-3.63L15 10.8V9H9zm7.056-7.654 1.282-1.535 4.607 3.85-1.28 1.54zM3.336 7.19l-1.28-1.536L6.662 1.81l1.28 1.536zM12 6c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7m0-2c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9-4.03-9-9-9"}),"SnoozeOutlined");var oe={},Zn=F;Object.defineProperty(oe,"__esModule",{value:!0});var Un=oe.default=void 0,Yn=Zn(_()),Kn=t;Un=oe.default=(0,Yn.default)((0,Kn.jsx)("path",{d:"M11 17c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1m0-14v4h2V5.08c3.39.49 6 3.39 6 6.92 0 3.87-3.13 7-7 7s-7-3.13-7-7c0-1.68.59-3.22 1.58-4.42L12 13l1.41-1.41-6.8-6.8v.02C4.42 6.45 3 9.05 3 12c0 4.97 4.02 9 9 9 4.97 0 9-4.03 9-9s-4.03-9-9-9zm7 9c0-.55-.45-1-1-1s-1 .45-1 1 .45 1 1 1 1-.45 1-1M6 12c0 .55.45 1 1 1s1-.45 1-1-.45-1-1-1-1 .45-1 1"}),"AvTimerOutlined");var ce={},Gn=F;Object.defineProperty(ce,"__esModule",{value:!0});var Qn=ce.default=void 0,Xn=Gn(_()),e1=t;Qn=ce.default=(0,Xn.default)((0,e1.jsx)("path",{d:"M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v2c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2m0 12-4.34 4.34L12 14H3v-2l3-7h9zm4-12h4v12h-4z"}),"ThumbDownOutlined");var le={},t1=F;Object.defineProperty(le,"__esModule",{value:!0});var n1=le.default=void 0,r1=t1(_()),a1=t;n1=le.default=(0,r1.default)((0,a1.jsx)("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V9h14zm0-12H5V5h14zM7 11h5v5H7z"}),"TodayOutlined");var de={},i1=F;Object.defineProperty(de,"__esModule",{value:!0});var s1=de.default=void 0,o1=i1(_()),c1=t;s1=de.default=(0,o1.default)((0,c1.jsx)("path",{d:"M11 21h-1l1-7H7.5c-.58 0-.57-.32-.38-.66.19-.34.05-.08.07-.12C8.48 10.94 10.42 7.54 13 3h1l-1 7h3.5c.49 0 .56.33.47.51l-.07.15C12.96 17.55 11 21 11 21"}),"Bolt");var ue={},l1=F;Object.defineProperty(ue,"__esModule",{value:!0});var d1=ue.default=void 0,u1=l1(_()),h1=t;d1=ue.default=(0,u1.default)((0,h1.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6m0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20"}),"AccountCircle");const m1=async({clientId:e,clientSecret:n}={clientId:fe,clientSecret:fe})=>{await we.mutate({mutation:Ie(It),variables:{type:"sync-eagle-data",options:JSON.stringify({disableAsync:!0,params:{input:{api:{clientId:e,clientSecret:n}}}})}})},p1=window.location.host.includes("localhost"),O1=({isFieldsRemoved:e})=>{const{enqueueSnackbar:n}=ne(),a=re({defaultValues:{clientId:"",clientSecret:""}});return t.jsx("form",{onSubmit:a.handleSubmit(async r=>{n("Syncing... Enquiries from eagle",{variant:"info"}),await m1(r),n("Enquiries from eagle synced",{variant:"info"})}),children:t.jsxs(Ct,{spacing:2,children:[!e&&t.jsx(t.Fragment,{children:p1&&t.jsxs(t.Fragment,{children:[t.jsx(b,{children:"Note: you can replace this with eagle client id and secret if no values applied it will get it from lawdEagleAPI setting"}),t.jsx(q,{control:a.control,name:"clientId",label:"Client Id",type:"password"}),t.jsx(q,{control:a.control,name:"clientSecret",label:"Client Secret",type:"password"})]})}),t.jsx(f,{display:"flex",justifyContent:"flex-end",children:t.jsx(S,{type:"submit",variant:"contained",children:"Sync Eagle Enquiries"})})]})})};export{H1 as A,fn as C,k1 as D,te as F,qt as I,on as M,O1 as S,q1 as a,P1 as b,n1 as c,d1 as d,Wn as e,Un as f,Qn as g,D1 as h,s1 as i,ln as j,vn as k,z as l,Cn as m,pn as n,Pt as o,Ot as p,Rt as q,Fe as r,Dt as s,sn as u};
