import{g as v,s as m,b as p}from"./index.esm-bf21a293.js";var c=function(o,i,e){if(o&&"reportValidity"in o){var r=v(e,i);o.setCustomValidity(r&&r.message||""),o.reportValidity()}},l=function(o,i){var e=function(s){var n=i.fields[s];n&&n.ref&&"reportValidity"in n.ref?c(n.ref,s,o):n.refs&&n.refs.forEach(function(t){return c(t,s,o)})};for(var r in i.fields)e(r)},y=function(o,i){i.shouldUseNativeValidation&&l(o,i);var e={};for(var r in o){var s=v(i.fields,r);m(e,r,Object.assign(o[r],{ref:s&&s.ref}))}return e},g=function(o,i){for(var e={};o.length;){var r=o[0],s=r.code,n=r.message,t=r.path.join(".");if(!e[t])if("unionErrors"in r){var u=r.unionErrors[0].errors[0];e[t]={message:u.message,type:u.code}}else e[t]={message:n,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return o.push(h)})}),i){var a=e[t].types,f=a&&a[r.code];e[t]=p(t,i,e,s,f?[].concat(f,r.message):r.message)}o.shift()}return e},V=function(o,i,e){return e===void 0&&(e={}),function(r,s,n){try{return Promise.resolve(function(t,u){try{var a=Promise.resolve(o[e.mode==="sync"?"parse":"parseAsync"](r,i)).then(function(f){return n.shouldUseNativeValidation&&l({},n),{errors:{},values:e.rawValues?r:f}})}catch(f){return u(f)}return a&&a.then?a.then(void 0,u):a}(0,function(t){return{values:{},errors:t.isEmpty?{}:y(g(t.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)}}))}catch(t){return Promise.reject(t)}}};export{V as s};
